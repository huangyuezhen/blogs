{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u8fd0\u7ef4\u5f00\u53d1 \u6587\u6863\u8d44\u6e90","title":"\u8fd0\u7ef4\u5f00\u53d1 \u6587\u6863\u8d44\u6e90"},{"location":"#_1","text":"","title":"\u8fd0\u7ef4\u5f00\u53d1 \u6587\u6863\u8d44\u6e90"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/","text":"\u638c\u8d1d\u8fd0\u7ef4\u5f00\u53d1\u73af\u5883\u914d\u7f6e\u4e0e\u8fd0\u884c \u524d\u8a00 \u8fd0\u7ef4\u5f00\u53d1\u76f8\u5173\u7684\u7cfb\u7edf \u5728\u6211\u4eec\u5f00\u53d1\u7684\u8fd9\u51e0\u4e2a\u7cfb\u7edf\uff1a cmdb /watcher/publish \u4e0e\u53ca\u57fa\u4e8e\u5f00\u6e90\u9879\u76ee\u7684dbms , \u91c7\u7528\u7684\u540e\u7aef\u5f00\u53d1\u8bed\u8a00\u90fd\u662fpython, \u524d\u7aef\u4e5f\u4e3b\u8981\u662f\u4ee5vue +js \u4e3a\u4e3b\u3002\u5728\u8fd0\u7ef4\u5f00\u53d1\u4e2d\uff0c\u4e3b\u8981\u6d89\u53ca\u5230\u4e09\u7c7b\u73af\u5883\uff1a \u5f00\u53d1\u73af\u5883 \u6d4b\u8bd5\u73af\u5883 \u751f\u4ea7\u73af\u5883 \u6d4b\u8bd5\u4e0e\u53ca\u751f\u4ea7\u73af\u5883\u7684\u90e8\u7f72\u4e4b\u524d\u5df2\u6709\u76f8\u5173\u7684wiki \u8fdb\u884c\u4ecb\u7ecd\uff0c\u90a3\u4e48\u73b0\u5728\u4e3b\u8981\u7ed9\u5927\u5bb6\u5206\u4eab\u4e0b\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\u3002 \u9879\u76ee \u524d\u7aefor\u540e\u7aef \u5f00\u53d1\u8bed\u8a00and \u6846\u67b6 python/nodejs\u7248\u672c \u662f\u5426\u9700\u8981\u4f9d\u8d56linux cmdb-server \u540e\u7aef python and tornado python3.6.2 \u5426\uff0cwindows/linux \u5747\u53ef\u8fd0\u884c cmdb-web \u524d\u7aef js and vue +element ui nodejs 8.8.0 32\u4f4d \u5426\uff0cwindows\u501f\u52a9node.js \u53ef\u8fd0\u884c monitor-center \u540e\u7aef python and tornado python3.6.2 \u5426\uff0cwindows/linux \u5747\u53ef\u8fd0\u884c monitor-web \u524d\u7aef js and vue +element ui nodejs 12.16.0 64\u4f4d \u5426\uff0cwindows\u501f\u52a9node.js \u53ef\u8fd0\u884c publish-server \u540e\u7aef python and tornado+ansible+celery python3.6.2 \u662f\uff0cwindows \u4e0d\u80fd\u72ec\u7acb\u8fd0\u884c publish-web \u524d\u7aef js and vue +element ui nodejs 12.16.0 64\u4f4d \u5426\uff0cwindows\u501f\u52a9node.js \u53ef\u8fd0\u884c dbms \u524d\u540e\u7aef\u4e0d\u5206\u79bb python and django python3.6.2 \u5426\uff0cwindows/linux \u5747\u53ef\u8fd0\u884c \u5e02\u9762\u4e0a\u5f00\u53d1\u6240\u7528\u7684IDE \u6709\u5f88\u591a\uff0c \u6bd4\u5982pycharm \u4e13\u95e8\u9488\u5bf9 python\u8bed\u8a00\u7684\u4e00\u6b3eIDE,\u8fd8\u6709 \u5fae\u8f6f\u65b0\u5f00\u653e\u7684visual studio code\u3002 \u8fd0\u7ef4\u5f00\u53d1\u5de5\u5177\u7684\u9009\u62e9 \u63a8\u8350\u4f7f\u7528 Visual Studio Code \u548c Jupyter \u4f5c\u4e3a\u65e5\u5e38\u7684\u9879\u76ee\u5f00\u53d1\u4e0e\u811a\u672c\u7f16\u5199\u5de5\u5177\u3002 1) Pycharm \u517c\u5bb9\u6027\uff1a Windows\u3001Linux\u3001Mac OS \u4f18\u70b9\uff1a \u96c6\u6210\u5355\u5143\u6d4b\u8bd5\uff0c \u4ee3\u7801\u68c0\u6d4b\uff0c \u96c6\u6210\u7248\u672c\u63a7\u5236\uff0c \u4ee3\u7801\u91cd\u6784\u5de5\u5177\uff0c \u5404\u79cd\u5bfc\u822a\u5de5\u5177\u4ee5\u53ca\u671f\u671b\u7684\u7a81\u51fa\u663e\u793a\u548c\u81ea\u52a8\u5b8c\u6210\u529f\u80fd \u8fdc\u7a0b\u8c03\u8bd5 \u7f3a\u70b9\uff1a \u9700\u8981\u4ed8\u8d39\uff0c\u7f51\u4e0a\u7684\u514d\u8d39\u7834\u89e3\u7248\uff0c\u4f1a\u65f6\u4e0d\u65f6\u88ab\u5c01\uff0c\u9700\u8981\u91cd\u65b0\u627e\u65b0\u7684\u7834\u89e3\u7801 2) Visual Studio Code(\u63a8\u8350) \u517c\u5bb9\u6027\uff1a Windows\u3001Linux\u3001Mac OS \u201cVisual Studio Code is an editor for any developer, no matter what programming language you use.\u201d \u201cVisual Studio Code\u662f\u4efb\u4f55\u5f00\u53d1\u4eba\u5458\u7684\u7f16\u8f91\u5668\uff0c\u65e0\u8bba\u60a8\u4f7f\u7528\u4f55\u79cd\u7f16\u7a0b\u8bed\u8a00\u3002\u201d \u4f18\u70b9\uff1a \u8f7b\u4fbf\u7075\u6d3b\uff0c\u63d2\u4ef6\u5f0f\u7684\u8bbe\u8ba1\uff0c\u63d2\u4ef6\u4e30\u5bcc\uff0c\u51e0\u4e4epycharm \u4e0a\u63d0\u4f9b\u7684\u529f\u80fd\u90fd\u53ef\u901a\u8fc7\u63d2\u4ef6\u6765\u8fdb\u884c\u652f\u6301 \u652f\u6301\u591a\u79cd\u8bed\u8a00\uff0cjs +vue ,python \uff0cjava \u7b49 \u7ed3\u5408 windows\u4e0b\u7684powshell ,\u652f\u6301\u547d\u4ee4\u884c\u5de5\u5177 \u914d\u7f6e\u540e\u8fdc\u7a0b\u8c03\u8bd5\u975e\u5e38\u65b9\u4fbf\uff0c\u5e76\u4e14\u548cwindwos\u81ea\u5e26\u7684linux\u7d27\u5bc6\u7ed3\u5408\u3002 \u5f00\u6e90\u514d\u8d39\uff0c\u4f7f\u7528\u8005\u4f17\u591a\uff0c\u51fa\u73b0\u95ee\u9898 \u793e\u533a\u652f\u6301\u7ed9\u529b \u7f3a\u70b9\uff1a \u200b vs code \u7531\u4e8e\u652f\u6301\u4e86\u591a\u8bed\u8a00\uff0c\u914d\u7f6e\u76f8\u5bf9pycharm\u6765\u8bf4\u7a0d\u4e3a\u590d\u6742\u4e00\u4e9b\u3002\u5bf9\u4e8e\u5927\u578b\u7684\u9879\u76ee\u5f00\u53d1\u6216\u8005Debug\u73af\u5883\uff0c\u9700\u8981\u7f16\u5199\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5982python \u9879\u76ee\u7684 launch.json\u3002 3) Jupyter Notebook(\u63a8\u8350) Jupyter Notebook \u7684\u672c\u8d28\u662f\u4e00\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u4fbf\u4e8e\u521b\u5efa\u548c\u5171\u4eab\u6587\u5b66\u5316\u7a0b\u5e8f\u6587\u6863\uff0c\u652f\u6301\u5b9e\u65f6\u4ee3\u7801\uff0c\u6570\u5b66\u65b9\u7a0b\uff0c\u53ef\u89c6\u5316\u548c markdown\u3002 \u7528\u9014\u5305\u62ec\uff1a\u6570\u636e\u6e05\u7406\u548c\u8f6c\u6362\uff0c\u6570\u503c\u6a21\u62df\uff0c\u7edf\u8ba1\u5efa\u6a21\uff0c\u673a\u5668\u5b66\u4e60\u7b49\u7b49\uff0c\u76ee\u524d\u5728\u5b66\u672f\u754c\u548c\u673a\u5668\u5b66\u4e60\u65b9\u9762\u975e\u5e38\u6d41\u884c\uff0c\u9002\u7528\u4e8e\u6211\u4eec\u5e73\u65f6\u7684Python\u5b66\u4e60\u548c\u5b66\u4e60\u7b14\u8bb0\u4f7f\u7528\u3002 \u4e00\u822c\u5728\u672c\u673a\u5b89\u88c5\u76f4\u63a5\u8fd0\u884c\uff0c\u6216\u8005\u4f7f\u7528\u5185\u7f51\u516c\u5171Jupyter\u3002 \u6d4b\u8bd5\u73af\u5883\u5730\u5740\uff1ahttp://10.10.50.30:7080/tree\uff0c \u5bc6\u7801\uff1ayunnex \u7ed3\u8bba \u57fa\u4e8e\u4ee5\u4e0a\u7684\u5bf9\u6bd4\uff0c \u6211\u4eec\u7684\u524d\u7aef\u548c\u540e\u7aef\u9879\u76ee\u91c7\u7528\u7684\u90fd\u662f visual studio code \u4e0b\u6587\u7b80\u79f0\u4e3a vs code \uff09 \u4f5c\u4e3aIDE\u3002 Python\u865a\u62df\u73af\u5883virtualenv\u914d\u7f6e virtualenv \u662f\u4e2apython \u7684\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u5728\u5bf9\u591a\u9879\u76ee\u5f00\u53d1\u65f6\uff0c\u7531\u4e8e\u4e0d\u540c\u7684\u9879\u76ee\u53ef\u80fd\u5bf9\u540c\u4e00\u4e2a\u5305\u7684\u7248\u672c\u4f9d\u8d56\u4e0d\u540c\uff0c\u5982\u679c\u591a\u4e2a\u9879\u76ee\u90fd\u4f7f\u7528\u540c\u4e00\u4e2a python \u7684sitepackages \u53ef\u80fd\u4f1a\u5bfc\u81f4\u51b2\u7a81\uff0c\u56e0\u800c\u9700\u8981\u6309\u5206\u9879\u76eepython \u5305\u8fdb\u884c\u7ba1\u7406\u3002 virtualenv \u5c31\u662f\u8fd9\u6837\u4e00\u4e2a\u5de5\u5177\uff0c\u4f7f\u7528\u540c\u4e00\u4e2a python \u89e3\u91ca\u5668\uff0c\u4f46\u662f\u4f7f\u7528\u4e0d\u540c\u7684\u5e93\u3002 virtualenv \u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a python \u5e93\uff0c\u5b89\u88c5\u65b9\u6cd5\u540c\u666e\u901a\u7684python \u5305 #\u5207\u6362\u5230\u76ee\u6807python \u7248\u672c\u4e0b\u7684pip\uff0c\u6307\u5b9a\u5f53\u524d\u6700\u65b0\u7684virtualenv\u7248\u672c pip install virtualenv==20.0.18 \u4ece2020\u5e74\u5f00\u59cb\uff0cvirtualenv \u76f4\u63a5\u4ece\u539f\u6765\u768416.x \u7248\u672c \u4e00\u4e0b\u5b50\u8df3\u5230\u4e8620.x \u7248\u672c\uff0c\u5e76\u4e14\u53bb\u6389\u4e86 \u2013no-sitepackages \u8fd9\u4e2a\u53c2\u6570\uff0c\u76f4\u63a5\u9ed8\u8ba4\u6709\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e5f\u5c31\u662f 16.x\u53ca\u4e4b\u524d\u7684\u7248\u672c\u662f\u9700\u8981\u5e26\u2013no-sitepackages \u624d\u53ef\u4ee5\u521d\u59cb\u5316\u4e00\u4e2a\u5e72\u51c0\u7684python\u73af\u5883\uff0c\u4ece20.X\u7248\u672c \u8fd9\u4e2a\u53c2\u6570\u76f4\u63a5\u662f\u9ed8\u8ba4\u7684\u4e86\uff0c\u65e0\u9700\u5e26\u4e0a\u3002 Linux/WSL\u7684virtualenv\u914d\u7f6e ## \u5b89\u88c5virtualenv(\u57fa\u7840) # \u6784\u5efa\u865a\u62df\u73af\u5883 pip3 install virtualenv # \u8fdb\u5165\u4f60\u60f3\u8981\u6784\u5efa\u7684\u8def\u5f84- cd /mmt/f/yunex/env # -p\u6307\u5b9a\u54ea\u4e2apython \u7d27\u8ddf\u7684\u662f\u865a\u62df\u73af\u5883\u7684\u540d\u79f0 virtualenv -p python3 py3-publish # \u5b89\u88c5requirements.txt \u5230\u6307\u5b9a\u865a\u62df\u73af\u5883 # \u4e0b\u9762\u8fd9\u4e2a\u662f\u4ee5publish-server\u4e3a\u4f8b\uff0c\u5148\u8fdb\u5165\u5230\u4ee3\u7801\u76ee\u5f55\uff0c\u6fc0\u6d3bpython3.6\u73af\u5883\uff0c\u7136\u540e\u5b89\u88c5 cd /mmt/f/yunex/publish-server source /mnt/f/yunex/env/py3-publish/bin/activate pip3 install -r requirements.txt #\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9000\u51fa\u5f53\u524d\u7684\u865a\u62df\u73af\u5883 deactivate ## \u5b89\u88c5virtualenv\u540e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5b89\u88c5virtualenvwrapper\u7ba1\u7406Python\u865a\u62df\u73af\u5883 pip3 install virtualenvwrapper export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3 #\u914d\u7f6e\u4f9d\u8d56\u7684python export WORKON_HOME=/mnt/f/yunex/env #\u8bbe\u5b9a\u865a\u4f3c\u73af\u5883\u96c6\u4e2d\u76ee\u5f55 mkvirtualenv --python=/usr/bin/python3 publish-server #\u521b\u5efa\u865a\u62df\u73af\u5883 ## \u5f00\u59cb\u4f7f\u7528 workon #\u67e5\u770b\u5f53\u524d\u7684\u865a\u62df\u73af\u5883\u76ee\u5f55 workon publish-server #\u5207\u6362\u5230\u865a\u62df\u73af\u5883 python -V cd /mmt/f/yunex/publish-server #\u6b64\u65f6\u53ef\u4ee5\u5b89\u88c5\u9879\u76ee\u7684\u4f9d\u8d56\u5305\uff0c\u4ee5publish-server\u4e3a\u4f8b pip3 install -r requirements.txt #\u5b89\u88c5\u4f9d\u8d56\u5305 deactivate #\u9000\u51fa\u865a\u62df\u73af\u5883 ## \u5220\u9664\u5b89\u88c5 rmvirtualenv venv #\u5220\u9664\u865a\u62df\u73af\u5883 Windows\u7684virtualenv\u914d\u7f6e \u5728\u4f60\u60f3\u8981\u7684\u76ee\u5f55\u4e0b\u865a\u62df\u51fa python \u73af\u5883 # \u4e0b\u9762\u7684\u4f8b\u5b50\u91cc\uff0c\u56e0\u4e3a\u662f\u5728 windows\u5f00\u53d1\u73af\u5883\u4e0b\uff0c\u4e3a\u65b9\u4fbf\u7edf\u4e00\u7ba1\u7406 #\u6211\u76f4\u63a5\u5728 \u9879\u76ee\u6e90\u7801\u7684\u6839\u76ee\u5f55\u4e0b \u865a\u62df\u4e86\u5bf9\u5e94\u7684\u865a\u62df\u73af\u5883\uff0c \u5982\u9879\u76ee cmdb-server ,\u76f4\u63a5\u5728\u6839\u76ee\u5f55\u4e0b\u865a\u62dfpython36cmdb # \u7136\u540e\u5728 .gitignore\u6587\u4ef6\u91cc\u589e\u52a0 \u4e00\u884c\uff1a python36cmdb/* ,\u8ba9git \u4e0d\u8ffd\u8e2a\u8fd9\u4e2a\u6587\u4ef6\u7684\u53d8\u5316 #\u865a\u62df\u51fapython \u73af\u5883 virtualenv python36cmdb #\u91c7\u7528\u865a\u62df\u73af\u5883\u7684pip \u5b89\u88c5requirements.txt .\\python36cmdb\\Scripts\\pip-3.6.exe install -r .\\requirements.txt \u8fd9\u6837\u5b50 cmdb\u7684python\u73af\u5883\u5c31\u865a\u62df\u597d\u4e86 \u518d\u56de\u5230vs code \u4e0b\u7684\u914d\u7f6e\uff0c \u5728/.vscode/settings.json \u6587\u4ef6\u91cc\u6dfb\u52a0\u8fdb\u65b0\u865a\u62df\u51fa\u7684python \u8def\u5f84\u5373\u53ef { \"python.pythonPath\": \"python36cmdb\\\\Scripts\\\\python.exe\" } \u5982\u679c\u5f53\u524dvs code \u7684\u9879\u76ee\u91cc\uff0c\u6ca1\u6709/.vscode/settings.json \u8fd9\u4e2a\u6587\u4ef6\uff0c\u6309\u4e00\u4e0bF5, vs code \u5c31\u4f1a\u63d0\u793a\u4f60\u9009\u62e9python \u89e3\u6790\u5668\uff0c\u9009\u62e9\u5b8c\u6210\u540e\u5c31\u4f1a\u81ea\u52a8\u751f\u6210\u8be5\u6587\u4ef6\u3002 \u547d\u4ee4\u8bf4\u660e \u2022 mkvirtualenv wxhpython01\uff1a\u521b\u5efa\u8fd0\u884c\u73af\u5883wxhpython01 \u2022 workon wxhpython01: \u5de5\u4f5c\u5728 zqxt \u73af\u5883 \u6216 \u4ece\u5176\u5b83\u73af\u5883\u5207\u6362\u5230 wxhpython01\u73af\u5883 \u2022 deactivate: \u9000\u51fa\u7ec8\u7aef\u73af\u5883 \u2022 rmvirtualenv ENV\uff1a\u5220\u9664\u8fd0\u884c\u73af\u5883ENV \u2022 mkproject mic\uff1a\u521b\u5efamic\u9879\u76ee\u548c\u8fd0\u884c\u73af\u5883mic \u2022 mktmpenv\uff1a\u521b\u5efa\u4e34\u65f6\u8fd0\u884c\u73af\u5883 \u2022 lsvirtualenv: \u5217\u51fa\u53ef\u7528\u7684\u8fd0\u884c\u73af\u5883 lssitepackages: \u5217\u51fa\u5f53\u524d\u73af\u5883\u5b89\u88c5\u4e86\u7684\u5305 VS Code\u8fd0\u884c\u73af\u5883\u914d\u7f6e \u5f00\u53d1\u73af\u5883\u7684\u4e09\u79cd\u6a21\u5f0f \u7531\u4e8e\u6709\u90e8\u5206\u7c7b\u5e93\uff0c\u4e0d\u652f\u6301windows \u4e0b\u73af\u5883\u8fd0\u884c\uff0c\u5982 ansible kafka \u7b49\uff0c\u90a3\u4e48\u5f00\u53d1\u73af\u5883\u6709\u4e09\u79cd\u65b9\u5f0f\u53ef\u9009\u62e9\uff1a windows vs code + \u8fdc\u7a0b\u8fd0\u884c\u8c03\u8bd5\u5de5\u5177\uff08remote ssh \uff09+ \u672c\u5730\u865a\u62dflinux\u6216\u8fdc\u7a0b\u670d\u52a1\u5668 \uff08 \u63a8\u8350 \uff09 win10 \u7cfb\u7edf\u6709\u4e2a\u65b0\u51fa\u7684WSL(windows subsystem for linux), \u5f00\u542f\u8be5\u529f\u80fd \u5b89\u88c5ubuntu \u684c\u9762\u7cfb\u7edf\uff0c\u5728ubuntu\u7cfb\u7edf\u4e0b\u914d\u7f6evs code \u7b49\u5f00\u53d1\u73af\u5883 \uff08 \u4e00\u822c \uff09 win10 \u5f00\u542f wsl,ubuntu\u53ea\u5b89\u88c5python \u4e0e\u53ca\u9879\u76ee\u7684requirements.txt\uff0cvs code \u5728win10 \u4e0b\u901a\u8fc7remote wsl \u8fde\u63a5\uff0c\u5e76\u5728\u672c\u5730win\u7cfb\u7edf\u5f00\u53d1\u8c03\u8bd5 \uff08 \u63a8\u8350 \uff09 \uff08\u4e00\u822c\u60c5\u51b5\u8fd9\u4e2a\u662f\u591f\u7528\u7684\uff0c\u4f46\u662f\u53d1\u5e03\u7cfb\u7edf \u9700\u8981\u62ff\u5305\uff0c\u56db\u53f0\u6d4b\u8bd5\u4e3b\u673a10.10.51.41-44 \u4e0e\u6211\u4eec\u529e\u516c\u7f51\u7edc \u6ca1\u6709\u5b8c\u5168\u53cc\u5411\u6253\u901a\uff0c\u6240\u4ee5\u8fd9\u79cd\u6a21\u5f0f\uff0c\u572810.10.51.41-4 \u4e3b\u673a\u4ece\u6211\u4eec\u529e\u516c\u4e3b\u673a\u4e0a\u4f1a\u62c9\u53d6\u4e0d\u5230\u5305\uff09 \u7ed3\u8bba\uff1a \u7531\u4e8e\u6211\u4eec\u7684cmdb-server/cmdb-web watcher-server/watcher-web publish-web \u90fd\u662f\u53ea\u9700\u8981\u5728win \u73af\u5883\u4e0b\u7684vs code \u5373\u53ef\u8fd0\u884c\uff0c\u53ea\u6709publish-server\u9700\u8981\u4f9d\u8d56 linux\u73af\u5883\uff0c\u4e3a\u65b9\u4fbf\u7edf\u4e00\uff0c\u6bd4\u8f83\u63a8\u8350\u7b2c\u4e09\u79cd\u5f00\u53d1\u65b9\u5f0f\uff0c\u4e0b\u6587\u4e5f\u4e3b\u8981\u91c7\u7528\u6b64\u79cd\u65b9\u5f0f\u6765\u89e3\u51b3 publish-server \u5bf9linux \u7684\u4f9d\u8d56\u3002 1.\u4e0b\u8f7d widows \u7248\u7684 vs code VS Code\u5b89\u88c5 vs code \u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1ahttps://code.visualstudio.com/Download \u6309\u6b65\u9aa4\u5b89\u88c5\u5373\u53ef win10 \u642d\u5efawsl win10 \u642d\u5efa WSL \u7684\u8fc7\u7a0b\u8bf7\u53c2\u89c1\uff1ahttp://wiki.corp.yunnex.com/pages/viewpage.action?pageId=26673982 2. \u5b89\u88c5python windows\u5b89\u88c5 python \u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.python.org/downloads/ \u9009\u62e93.6.X \u7248\u672c(\u4e0d\u5efa\u8bae\u5b89\u88c5\u6700\u65b0\u7248\u76843.8\uff0c\u4e0e\u73b0\u6709\u4ee3\u7801\u6709\u90e8\u5206\u517c\u5bb9\u95ee\u9898)\uff0c\u5e76\u628a\u8def\u5f84\u6dfb\u52a0\u5230 \u73af\u5883\u53d8\u91cf \u68c0\u9a8c\u5b89\u88c5\u662f\u5426\u6210\u529f\uff1a \u8c03\u51facmd \u6267\u884c python , \u5982\u679c\u63d0\u793a\u627e\u4e0d\u5230\u547d\u4ee4\uff0c\u5148\u770b\u770b\u73af\u5883\u53d8\u91cf\u662f\u4e0d\u662f\u6ca1\u914d\u7f6e\u6210\u529f ubuntu(WSL) \u5b89\u88c5python apt install python3.6 \u9a8c\u8bc1\u662f\u5426\u6210\u529f product@DESKTOP-VAL3SFG:~$ python3 Python 3.6.9 (default, Nov 7 2019, 10:44:02) [GCC 8.3.0] on linux Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. \u63d0\u793a: \u4f7f\u7528windows10\u7684WSL\u65f6\uff0c\u8bbe\u7f6essh\u5f00\u59cb\u542f\u52a8\u7684\u65b9\u6cd5: win10\u7684\u5f00\u59cb-\u8fd0\u884c\u91cc\u9762(\u6216Win + r\u952e)\u91cc\uff0c \u8f93\u5165shell:startup\u6253\u5f00\u542f\u52a8\u6587\u4ef6\u5939\uff0c\u65b0\u589estartservice.vbs\u811a\u672c\u653e\u8fdb\u53bb [C:\\Users\\admin1\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup]$ type wsl-startservice.vbs Set ws = WScript.CreateObject(\"WScript.Shell\") ws.run \"ubuntu run sudo service ssh restart\", vbhide 3.\u5b89\u88c5pip windows\u5b89\u88c5pip python3\u4ee5\u4e0a\u7684\u7248\u672c\uff0c\u5b89\u88c5\u4e86python \u540e\u90fd\u4f1a\u6709\u81ea\u5e26\u7684pip,\u4e0d\u7528\u518d\u989d\u5916\u5b89\u88c5\uff0c\u9a8c\u8bc1 PS F:\\yunex\\cmdb-server> pip -V pip 18.1 from d:\\program files\\python3.6\\lib\\site-packages\\pip (python 3.6) ubuntu \u5b89\u88c5pip apt install python3-pip pip\u914d\u7f6e\u56fd\u5185\u6e90 # cat ~/.pip/pip.conf [global] index-url=https://mirrors.aliyun.com/pypi/simple 4.\u5b89\u88c5 git \u5ba2\u6237\u7aef windows \u5b89\u88c5 git \u4e0b\u8f7d\u5730\u5740https://git-scm.com/downloads, \u6309\u6b65\u9aa4\u70b9\u9ed8\u8ba4\u9009\u9879\u5b89\u88c5\u5373\u53ef \u914d\u7f6egit \u7528\u6237\u540d\u79f0 \u8bbe\u7f6e\u5168\u5c40\u7528\u6237\u540d\uff0c\u5982\u679c\u521b\u5efa\u540e\u9700\u8981\u4fee\u6539\uff0c\u4e5f\u662f\u8fd9\u4e2a\u547d\u4ee4\uff0c\u76f4\u63a5\u8986\u76d6\u539f\u6765\u7684\u914d\u7f6e git config --global user.name \"huangyuezhen\" git config --global user.email \"huangyuezhen@yunnex.com\" \u4e3a\u5355\u4e2a\u4ed3\u5e93\u8bbe\u7f6e Git \u7528\u6237\u540d, \u53bb\u6389\u4e0a\u9762\u7684 global \u5373\u53ef\uff0c\u5355\u4e2a\u4ed3\u5e93\u7684\u72ec\u7acb\u914d\u7f6e\u4f1a\u8986\u76d6global\u914d\u7f6e 1.\u6253\u5f00 Git Bash\u3002 2.\u5c06\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u66f4\u6539\u4e3a\u60a8\u60f3\u8981\u5728\u5176\u4e2d\u914d\u7f6e\u4e0e Git \u63d0\u4ea4\u5173\u8054\u7684\u540d\u79f0\u7684\u672c\u5730\u4ed3\u5e93\u3002 3.\u8bbe\u7f6e Git \u7528\u6237\u540d\uff1a $ git config user.name \"huangyuezhen\" \u67e5\u770b\u5168\u5c40\u8bbe\u7f6e PS C:\\Users\\87217> git config --global -l user.name=huangyuezhen user.email=huangyuezhen@yunnex.com \u67e5\u770b\u67d0\u4e2a\u4ed3\u5e93\u7684\u8bbe\u7f6e git config -l \u6267\u884c\u4e0b git pull \u7b49\u547d\u4ee4\uff0c\u4f1a\u5f39\u51fa\u6846\u8981\u6c42\u8f93\u5165 git\u4ed3\u5e93\u7684\u8d26\u53f7\u5bc6\u7801\uff0c \u8d26\u53f7\u548c\u5bc6\u7801\u4f1a\u88ab\u4fdd\u5b58\u5230 windows \u4e0b\u7684\u201c\u51ed\u636e\u7ba1\u7406\u5668\u201d\uff0c\u4fee\u6539\u6216\u5220\u9664\u90fd\u9700\u8981\u8fdb\u5165\u5230\u8fd9\u91cc\u3002 \u6ce8\u610f\u70b9\uff1a git \u4ed3\u5e93\u7684\u8d26\u53f7\u5bc6\u7801\uff0c \u548c user.name \u7684\u7528\u6237\u540d\u79f0\u53ef\u4ee5\u4e0d\u4e00\u81f4\uff0c user.name \u624d\u662f\u771f\u6b63\u8bb0\u5f55log \u5bf9\u5e94\u7684 \u7528\u6237\uff0c\u5f39\u51fa\u8f93\u51fa\u7684\u8d26\u53f7\u5bc6\u7801\u53ea\u662f\u4f5c\u4e3a\u4e0e\u8fdc\u7a0b\u4ed3\u5e93\u8fde\u63a5\u7684\u51ed\u8bc1\uff0c \u5f53\u53ea\u8f93\u5165\u5f39\u51fa\u8f93\u51fa\u7684\u8d26\u53f7\u5bc6\u7801\uff0c \u672a\u8bbe\u7f6e global user.name \u6216\u4ed3\u5e93\u72ec\u7acb\u7684 user.name \u65f6\uff0c\u4f1a\u63d0\u793a\u9700\u8981\u8bbe\u7f6euser.name \u548cuser.email \u4fe1\u606f,\u5982\u4e0b ```powershell S F:\\yunex\\publish-web> git commit -m \u201ctest\u201d *** Please tell me who you are. Run git config --global user.email \"you@example.com\" git config --global user.name \"Your Name\" to set your account\u2019s default identity. Omit \u2013global to set the identity only in this repository. fatal: unable to auto-detect email address (got \u201887217@DESKTOP-VAL3SFG.(none)\u2019) ``` ubuntu \u5b89\u88c5git ubuntu\u53d1\u884c\u7248\u4e00\u822c\u4f1a\u81ea\u5e26\u8fd9\u4e9b\u5e38\u7528\u7684\u5de5\u5177\uff0c\u4e0d\u7528\u989d\u5916\u5b89\u88c5 \u9a8c\u8bc1\uff1a ```power shell product@DESKTOP-VAL3SFG:~$ git \u2013version git version 2.17.1 ### 5.\u914d\u7f6e vs code\u7684python \u8fd0\u884c\u73af\u5883 \u6253\u5f00 vs code \u540e\uff0c\u5feb\u6377\u952e ctrl + \u201c~\u201d \u8c03\u51fa powershell \u7a97\u53e3\uff0c\u68c0\u9a8cpython\u73af\u5883\u662f\u5426\u5b89\u88c5\u6210\u529f\uff1a ```powershell PS C:\\Users\\87217> python Python 3.6.8rc1 (v3.6.8rc1:cc3e73212a, Dec 12 2018, 00:15:46) [MSC v.1900 64 bit (AMD64)] on win32 Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. >>> PS C:\\Users\\87217> pip -V pip 18.1 from d:\\program files\\python3.6\\lib\\site-packages\\pip (python 3.6) PS F:\\yunex\\publish-server> git --version git version 2.26.0.windows.1 5.1 \u5b89\u88c5python\u7b49\u63d2\u4ef6 \u8be5\u63d2\u4ef6\u652f\u6301 python \u8bed\u6cd5\u9ad8\u4eae\uff0c\u8bed\u6cd5\u68c0\u6d4b\uff0c\u81ea\u52a8\u8865\u5168\u3001\u8c03\u8bd5\u3001\u4ee3\u7801\u683c\u5f0f\u5316\u3001\u5355\u5143\u6d4b\u8bd5\u7b49\u529f\u80fd \u4fa7\u8fb9\u680f\u627e\u5230\u6700\u4e0b\u9762\u7684\u201c\u65b9\u5f62\u79ef\u6728 \u201d Extensions\u2013> \u641c\u7d22\u6846\u641c\u7d22 python \u2013>\u627e\u5230\u540e\u70b9\u51fb\u5b89\u88c5\u2013>>\u5b89\u88c5\u5b8c\u540e\u9009\u62e9\u201c\u91cd\u65b0\u52a0\u8f7d\u201d\u6216\u624b\u52a8\u91cd\u542fVS Code\u5373\u53ef \u63a8\u8350\u5b89\u88c5\u7684\u63d2\u4ef6\u5982\u4e0b: Python\u63d2\u4ef6 VScode\u81ea\u5e26\u7684\u5b98\u65b9\u63d2\u4ef6 vscode-icons \u6587\u4ef6\u56fe\u6807\u96c6 Guides\uff1a \u5c06\u7f29\u8fdb\u7ebf\u663e\u793a\u4e3a\u7ea2\u8272 filesize \u4e00\u6b3e\u5728\u5de6\u4e0b\u89d2\u663e\u793a\u6587\u4ef6\u5927\u5c0f\u7684\u63d2\u4ef6 Bracket Pair Colorizer \u62ec\u53f7\u989c\u8272 Anaconda Extension Pack \u81ea\u52a8\u8865\u5168anaconda\u5305\u4e2d\u7684\u5c5e\u6027\u540d\u79f0 Code Spell Checker \u62fc\u5199\u68c0\u67e5 GitLens \u6253\u5f00\u4ee3\u7801\u540e\uff0c\u5728\u4ee3\u7801\u5757\u4e0a\u4f1a\u663e\u793a \u6700\u540e\u4e00\u6b21\u7684commit\u4fe1\u606f\uff0c \u652f\u6301\u591a\u7a97\u53e3\u5bf9\u6bd4\u67e5\u770b\u672c\u5730\u4fee\u6539\u6216\u5386\u53f2\u4fee\u6539 Git History \u652f\u6301file \u6216\u8005\u7684line \u7684commit \u5386\u53f2\u4fe1\u606f\u67e5\u770b \u5728vs code \u7684power shell\u53ef\u4ee5\u4f7f\u7528git \u7684\u547d\u4ee4\u884c\u6267\u884c\u4efb\u52a1\u7684\u63d0\u4ea4\uff0c\u6216\u8005\u4e5f\u53ef\u627e\u627e\u652f\u6301\u56fe\u5f62\u5316\u64cd\u4f5c\u7684\u63d2\u4ef6\uff0c 5.2 \u914d\u7f6e\u8fd0\u884c\u8c03\u8bd5 \u6253\u5f00\u9879\u76ee\u6587\u4ef6\u6216\u8005\u7f16\u8f91\u5355\u4e2apython\u811a\u672c\u540e\uff0c\u6309F5\u5373\u53ef\u8fd0\u884c\u7a0b\u5e8f\uff0c\u5982\u9700debug ,\u76f4\u63a5\u5728\u4ee3\u7801\u91cc \u6253\u65ad\u70b9\u5c31\u884c\u3002 \u4e00\u822c\u5efa\u8bae\u5728\u9879\u76ee\u76ee\u5f55\u91cc\u8fdb\u884c\u8c03\u8bd5\u7684\u8bbe\u7f6e\uff0c\u914d\u7f6e\u6587\u4ef6\u5728VS Code\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684 /.vscode \u4e0b\uff0c\u6ca1\u6709\u627e\u5230\u4e5f\u6ca1\u5173\u7cfb\uff0c\u7b49\u4f1a\u914d\u7f6e\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa\u3002 launch.json \u6587\u4ef6\uff0c\u5b83\u7684\u4f4d\u7f6e\u4e00\u822c\u5728VS Code\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684 /.vscode/launch.json \u3002\u6ca1\u6709\u627e\u5230\u4e5f\u6ca1\u5173\u7cfb\uff0c\u7b49\u4f1a\u914d\u7f6e\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa\u3002 \u70b9\u51fbFile\uff0c\u6253\u5f00\u9879\u76ee\u76ee\u5f55\u6216\u5de5\u4f5c\u76ee\u5f55\u540e\uff0c\u6253\u5f00\u9879\u76ee\u5165\u53e3\u6587\u4ef6(\u5982publish-server.py)\uff0c\u6309F5\u8fdb\u884c\u8fd0\u884c\u8c03\u8bd5\u3002\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\uff0c\u9700\u8981\u70b9\u51fb\u5de6\u4fa7\u7684run\u56fe\u6807\u521b\u5efalaunch.json\u6587\u4ef6\u3002 \u5bf9\u4e8e\u9879\u76ee\uff0c\u9009\u62e9Module\u7c7b\u578b\uff0c\u7136\u540e\u8f93\u5165\u6a21\u5757\u540d\uff0c\u6a21\u5757\u540d\u4e0e\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684publish-server.py \u5165\u53e3\u6587\u4ef6\u540d\u4e00\u81f4\uff0c\u586b\u5165\u201dpublish-server\u201d\u3002 \u5b8c\u6210\u540e\uff0cvs code \u4f1a\u81ea\u52a8\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u7684 .vscode/launch.json \u6587\u4ef6\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e # launch.json { \"name\": \"Python: Module\", \"type\": \"python\", \"request\": \"launch\", \"module\": \"publish-server\" #\u8be5\u540d\u79f0\u4e00\u5b9a\u9700\u8981 \u8ddf\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684publish-server.py \u5165\u53e3\u6587\u4ef6\u4e00\u81f4 } settings.json \u6587\u4ef6\u7684\u4f5c\u7528\u662f\uff0c \u5f53\u5b58\u5728\u591a\u4e2apython \u7684\u8fd0\u884c\u73af\u5883\uff0cvs code \u4e0d\u77e5\u9053\u8981\u9009\u5b9a\u54ea\u4e2apython \u6765\u4f5c\u4e3a\u672c\u9879\u76ee\u7684python \u89e3\u91ca\u5668\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5728settings.json \u6587\u4ef6\u4e2d\u53bb\u6307\u5b9apython\u89e3\u91ca\u5668\u7684\u8def\u5f84\u3002 \u5207\u6362\u5230\u865a\u62df\u73af\u5883\u4e0b, \u4f7f\u7528\u201cwhich python\u201d\u547d\u4ee4\u83b7\u53d6\u865a\u62df\u73af\u5883\u7684python\u8def\u5f84\uff0c\u7136\u540e\u914d\u7f6e\u5230\u9879\u76ee\u76ee\u5f55\u4e0b\u7684 .vscode/settings.json \u3002 { \"python.pythonPath\": \"/mnt/d/dev/envs/publish/bin/python\", \"vsintellicode.modelDownloadPath\": \"\", \"python.jediEnabled\": false } \u6b64\u65f6\u518d\u6309F5\u65f6\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u7a0b\u5e8f\u3002 \u5230\u4ee5\u4e0a\u6b65\u9aa4\uff0c cmdb-server, watcher, dbms \u5df2\u7ecf\u53ef\u4ee5\u5728windows \u4e0b\u7684vs code \u4e0b\u6309\u7167\u5404\u4e2aserver \u7684REAME\u64cd\u4f5c\u8dd1\u8d77\u6765\u4e86\u3002 \u4e0b\u9762\u4ecb\u7ecd\u7684\u65b9\u6cd5\u4e3b\u8981\u662f\u9488\u5bf9 publish-server \u5bf9ansible \u6709\u4f9d\u8d56 \uff0c\u4f46 ansible \u5728windows\u8fd0\u884c\u65f6\u4e0d\u652f\u6301\uff0c\u9700\u8981\u9700\u8981\u6784\u5efalinux \u7684\u8fd0\u884c\u73af\u5883 5.3 \u9644\u5f55: VS Code\u5e38\u7528\u70ed\u952e \u4f7f\u7528VScode\u7f16\u8f91 F1/Ctrl+Shit+P\u4e07\u80fd\u952e\uff0c\u8c01\u7528\u8c01\u77e5\u9053 Ctrl+P\uff1a\u6587\u4ef6\u5207\u6362 Ctrl+\u7a7a\u683c\uff1a\u81ea\u52a8\u63d0\u793a F12/Ctrl+\u5de6\u952e\uff1a\u8df3\u8f6c\u5230\u5b9a\u4e49 Shift+F12\uff1a\u9884\u89c8\u5b9a\u4e49 Ctrl+G\uff1a\u8df3\u8f6c\u884c\u53f7 Ctrl+/\uff1a\u6ce8\u91ca\u5207\u6362 Alt+\u2191\u2193\uff1a\u6574\u884c\u4e0a\u4e0b\u79fb\u52a8 Ctrl+\u2191\u2193\uff1a\u7f16\u8f91\u5668\u5782\u76f4\u6eda\u52a8\u6761\u4e0a\u4e0b\u79fb\u52a8\uff0c\u5149\u6807\u4e0d\u52a8 Ctrl+Backspace/Delete\uff1a\u6574\u8bcd/\u8fde\u7eed\u7a7a\u767d\u5220\u9664 Ctrl+\u2192\u2190\uff1a\u5149\u6807\u6574\u8bcd\u79fb\u52a8 Ctrl+F\u67e5\u627e/Ctrl+Shift+F\u5728\u6587\u4ef6\u4e2d\u67e5\u627e Alt+Shift+F\uff0cvscode\u5c31\u4f1a\u8c03\u7528autopep8\u81ea\u52a8\u683c\u5f0f\u5316\u4ee3\u7801 Ctrl+\u9f20\u6807\u5de6\u952e\u70b9\u51fd\u6570\u540d\u8df3\u8f6c\uff0c\u6216\u5728\u7c7b\u540d\u4e0a\u6309F12 \u53d8\u91cf\u4e0a\u6309F2\u53ef\u5b9e\u73b0\u91cd\u547d\u540d\u53d8\u91cf \u8c03\u8bd5\u4ee3\u7801: \u884c\u53f7\u5de6\u8fb9\u70b9\u51fb\u53ef\u8bbe\u7f6e\u65ad\u70b9 F5\uff1a\u8c03\u8bd5/\u7ee7\u7eed\uff0c F10\uff1a\u5355\u6b65\u8df3\u8fc7\uff0c F11\uff1a\u5355\u6b65\u8fdb\u5165\uff0c Shift+F11\uff1a\u8df3\u51fa\u3002 F9\uff1a\u5207\u6362\u65ad\u70b9 \u4f7f\u7528Jupyter: \u521b\u5efaNoterbook: \u200b Ctrl+Shift+P\u8f93\u5165\u201cpython:create\u201d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Notebook. \u89c6\u56fe: \u200b Ctrl+Shift+P\u8f93\u5165\u201cpython:switch\u201d \u547d\u4ee4\u6a21\u5f0f(\u84dd\u8272)\u548c\u7f16\u8f91\u6a21\u5f0f(\u7eff\u8272) \u200b \u5728\u547d\u4ee4\u6a21\u5f0f\u4e0b(\u5c0f\u5199): \u200b Ctrl + Enter\uff1a\u8fd0\u884c\u5f53\u524d\u5355\u5143\u683c\u3002 \u200b Shift + Enter\uff1a\u8fd0\u884c\u5f53\u524d\u5355\u5143\u683c\uff0c\u5e76\u8df3\u5230\u4e0b\u4e00\u5355\u5143\u683c\u3002 \u200b Alt + Enter\uff1a\u8fd0\u884c\u5f53\u524d\u5355\u5143\u683c\uff0c\u5e76\u5728\u4e0b\u65b9\u521b\u5efa\u4e00\u4e2a\u5355\u5143\u683c\u3002 \u200b Ctrl + M \u5207\u6362\u6210 MarkDown \u6a21\u5f0f \u200b Ctrl + Y \u5207\u6362\u6210\u4ee3\u7801\u6a21\u5f0f \u200b Enter\uff1a\u5207\u6362\u5230\u7f16\u8f91\u6a21\u5f0f\u3002 \u200b Esc\uff1a\u5207\u6362\u5230\u547d\u4ee4\u6a21\u5f0f\u3002 \u200b \u53cc\u51fbD\uff1a\u5220\u9664\u5f53\u524d\u5355\u5143\u683c\u3002 \u200b A\uff1a\u5728\u4e0a\u65b9\u521b\u5efa\u4e00\u4e2a\u5355\u5143\u683c\u3002 \u200b B\uff1a\u5728\u4e0b\u65b9\u521b\u5efa\u4e00\u4e2a\u5355\u5143\u683c\u3002 \u200b L\uff1a\u4e3a\u5f53\u524d\u5355\u5143\u683c\u6dfb\u52a0\u884c\u53f7\u3002 \u200b TAB\uff1a\u4ee3\u7801\u8865\u5168 6.\u914d\u7f6e\u524d\u7aef\u8fd0\u884c\u73af\u5883 6.1\u4e0b\u8f7dnode.js ,\u6309\u6b65\u9aa4\u8fdb\u884c\u5b89\u88c5 node.js \u662f\u4e2a\u57fa\u4e8e chrome v8 \u5f15\u64ce\u7684js \u8fd0\u884c\u65f6\u5de5\u5177\uff0c\u5728\u524d\u7aef\u5f00\u53d1\u65f6\uff0c\u53ef\u4ee5\u7528\u6765\u8c03\u8bd5\u4ee3\u7801\u3002 node.js \u7684\u5b89\u88c5\u5305\u4e2d\u4f1a\u5e26\u6709npm \u5de5\u5177\uff0cnpm \u662f\u4e2a\u7c7b\u4f3c\u4e8epython \u7684pip ,\u4e3b\u8981\u662f\u7528\u6765\u5b89\u88c5\u5305\u4f9d\u8d56\u7684\u3002 \u7531\u4e8e\u6211\u4eec\u5177\u6709\u591a\u9879\u76ee\uff0c\u800c\u5404\u9879\u76ee\u95f4\u5bf9node.js\u7684\u7248\u672c\u4e0d\u540c\uff0c\u56e0\u800c\u6709\u4e86\u4e2awindows \u4e0bnodejs \u7248\u672c\u7ba1\u7406\u5de5\u5177 nvm\u3002 windows \u4e0b node.js \u591a\u7248\u672c\u7ba1\u7406\u5de5\u5177nvm nvm \u4e0b\u8f7d\u5730\u5740 https://github.com/coreybutler/nvm-windows/releases \u5b89\u88c5nvm\u524d\u4e00\u5b9a\u8981\u628a\u539f\u6765\u7684 node.js \u5168\u90e8\u5378\u8f7d\uff0c\u5e76\u628a\u6587\u4ef6\u5939\u6e05\u7406\u5e72\u51c0 \u3002 \u5e38\u7528\u547d\u4ee4 \u8bbe\u7f6e\u56fd\u5185\u955c\u50cf nvm node_mirror https://npm.taobao.org/mirrors/node/ nvm npm_mirror https://npm.taobao.org/mirrors/npm/ \u67e5\u627e\u5e2e\u52a9 nvm help \u5b89\u88c5node nvm install <version> [32|64] nvm install 12.3.1 \u5217\u4e3e nvm list \u5207\u6362\u7248\u672c nvm use 12.3.1 \u5378\u8f7dnode nvm uninstall 12.3.1 \u5728\u8fd0\u884c cmdb-web \u9879\u76ee\u65f6\uff0c\u5207\u6362\u5230 8.8.0 32\u4f4d\u7684\u7248\u672c\uff1a PS F:\\yunex\\cmdb-web> nvm list * 12.16.0 (Currently using 64-bit executable) 8.8.0 PS F:\\yunex\\cmdb-web> nvm use 8.8.0 32 Now using node v8.8.0 (32-bit) \u5728\u8fd0\u884c publish-web /monitor-web \u9879\u76ee\u65f6\uff0c\u5207\u6362\u5230 12.16.0 64 \u4f4d\u7248\u672c PS F:\\yunex\\publish-web> nvm use 12.16.0 64 Now using node v12.16.0 (64-bit) \u7136\u540e\u6839\u636e\u5404\u4e2a\u9879\u76ee\u7684readme \u8fdb\u884c\u5305\u7684\u5b89\u88c5\uff0c\u542f\u52a8\u7b49\u3002 6.2\u5b89\u88c5vue /eslint \u63d2\u4ef6 \u65b9\u6cd5\u540c\u4e0a\u6587\uff0c \u70b9\u51fb\u4fa7\u8fb9\u680f\u7684\u201c\u65b9\u5f62\u79ef\u6728\u201d\uff0c\u641c\u7d20\u8f93\u5165 \u8fdb\u884c\u5b89\u88c5\u5373\u53ef\uff0c\u5bf9eslint ,Vetur \u8fdb\u884c\u5b89\u88c5 \u81f3\u6b64\u524d\u7aef\u7684\u8fd0\u884c\u73af\u5883\u914d\u7f6e\u5b8c\u6bd5 \u6839\u636e\u5404\u524d\u7aef\u7684readme.md \u8fdb\u884c\u5305\u7684\u5b89\u88c5\uff0c\u8fd0\u884cnpm run dev \u5373\u53ef\u8fd0\u884c\u8d77\u524d\u7aef\u9879\u76ee npm install npm run dev 7.\u914d\u7f6eRemote WSL(Windows 10) Remote WSL\u662f\u4e2a\u8fde\u63a5\u672c\u5730WSL \u7684\u63d2\u4ef6\uff0c\u4e8c\u8005\u540c\u51fa\u81ea \u5fae\u8f6f\uff0c\u6240\u4ee5\u4e8c\u8005\u7684\u65e0\u7f1d\u8fde\u63a5\u4f53\u9a8c\u8fd8\u662f\u6bd4\u8f83\u597d\u7684\u3002 \u652f\u6301\u5728windows \u73af\u5883\u4e0b\u8fd0\u884cvs code , windows vs code \u4e0b\u5f00\u53d1\uff0c\u4fee\u6539\u4ee3\u7801 \u53ef\u4ee5\u8c03\u7528ubuntu \u7684\u8fd0\u884c\u73af\u5883\u6765\u8fd0\u884c\u8c03\u8bd5\uff0c 7.1 \u5b89\u88c5Remote WSL\u63d2\u4ef6 \u6253\u5f00 vs code ,\u70b9\u51fb\u4fa7\u8fb9\u680f\u7684\u201c\u65b9\u5f62\u79ef\u6728\u201d\uff08Extensions\uff09\uff0c\u641c\u7d22 Remote Development \u8fdb\u884c\u5b89\u88c5\u3002 7.2 \u5207\u6362\u5230WSL\u73af\u5883 \u4e0a\u9762\u5b89\u88c5\u597d\u540e\uff0c\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\u7eff\u8272\u56fe\u6807\u5207\u6362\u5230WSL\u3002 \u53ef\u4ee5\u770b\u5230\u5e95\u90e8\u7684\u53d8\u6210WSL \uff0c\u8bf4\u660e\u5df2\u7ecf\u662f\u5728WSL\u7684\u73af\u5883\u4e0b 7.3 WSL\u73af\u5883\u5b89\u88c5\u63d2\u4ef6 \u5728 WSL:Ubuntu \u73af\u5883\u4e0b\uff0c\u90e8\u5206\u63d2\u4ef6\u9700\u8981\u8fd0\u884c\u5728Linux\u4e0b\uff0c\u5728\u754c\u9762\u4e0a\u70b9\u51fb\u5c06\u81ea\u52a8\u8fdb\u884c\u5b89\u88c5\uff0c\u5b89\u88c5\u5b8c\u6210\u9700\u8981reload\u4e00\u4e0bVS Code\u3002 WSL\u4e0b\u7684\u8c03\u8bd5\u914d\u7f6e\uff0c\u4e0eWindows\u4e0b\u76f8\u540c\uff0c\u8bf7\u89c15.2\u8282\u4e2d\u5173\u4e8elaunch.json\u548csettings.json\u7684\u914d\u7f6e\u3002 \u4e00\u822c\u6765\u8bf4 \u4f9d\u8d56\u4e8e linux \u7cfb\u7edf\u7684publish-server \u5728\u5b89\u88c5\u4e86\u4ee5\u4e0a\u7684WSL \u4e4b\u540e\uff0c\u8fd0\u884c\u5c31\u6ca1\u95ee\u9898\u4e86\u3002\u4f46\u5bf9\u4e8e\u4e0e\u73af\u5883\u4e25\u91cd\u4f9d\u8d56\u7684\u9879\u76ee\u6765\u8bf4\uff0cWSL\u96be\u4ee5\u5355\u72ec\u8fd0\u884c\u8d77\u6765\uff0c\u4f8b\u5982\u53d1\u5e03\u7cfb\u7edf\u7684\u4e1a\u52a1\u4e3b\u673a(\u5728\u6d4b\u8bd5\u73af\u5883)\u9700\u8981\u5230Publish Server(Windows)\u4e0b\u8f7d\u5305\u6587\u4ef6\uff0c\u5982\u679cWSL\u4e0e\u4e1a\u52a1\u4e3b\u673a\u4e0d\u5728\u540c\u4e00\u4e2a\u73af\u5883\uff0c\u8c03\u8bd5\u7a0b\u5e8f\u7684\u8fd0\u884c\u5c31\u76f8\u5f53\u56f0\u96be\u4e86\u3002\u5728\u672c\u5730Windows\u4e0a\u8c03\u8bd5\u8fdc\u7a0bLinux\u9879\u76ee\u5219\u9700\u8981\u4f7f\u7528\u53e6\u4e00\u4e2a\u529f\u80fd \u2013 Remote SSH\u3002 8. \u914d\u7f6eRemote SSH remote ssh \u662f\u4f55\u65b9\u795e\u5723\uff1f \u5b83\u5c31\u662f\u4e2a vs code \u7684\u4e00\u4e2a\u63d2\u4ef6(2019\u5e745\u6708\u63a8\u51fa)\uff0c\u5b89\u88c5\u65b9\u6cd5\u540c\u4e0a\uff0c\u5728 Remote Development \u63d2\u4ef6\u4e2d\u5df2\u5305\u542b\u3002 \u4e0eWSL\u4e0d\u540c\uff0cRemote SSH\u9700\u8981\u4e0e\u8fdc\u7a0b\u7684Linux\u5efa\u7acb\u514d\u5bc6\u767b\u5f55\u3002 8.1 \u5728Windows\u4e0a\u5b89\u88c5OpenSSL \u4e0b\u8f7dOpenSSL https://openssh.en.softonic.com/, \u4e0b\u8f7d\u5e76\u89e3\u538b\u5230\u672c\u5730\u76ee\u5f55\uff0c\u5e76\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u3002 \u6ce8\u610f\uff0c\u867d\u7136Windows\u81ea\u5e26SSL(\u5e94\u7528\u548c\u529f\u80fd -> \u53ef\u9009\u529f\u80fd -> Openssh\u5ba2\u6237\u7aef)\uff0c\u4f46\u65e7\u7248\u672c\u5728\u4f7f\u7528\u65f6\u4f1a\u6709\u95ee\u9898\u3002 \u751f\u6210\u5bc6\u94a5 ``` D:\\Tools\\OpenSSH-Win64\\ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa-remote-ssh ``` \u4fee\u6b63\u751f\u6210\u7684\u5bc6\u94a5\u6743\u9650 \u6253\u5f00\u76ee\u5f55C:\\Users\\admin1.ssh, \u53f3\u952eid_rsa-remote-ssh->\u5c5e\u6027->\u5b89\u5168->\u9ad8\u7ea7 \u66f4\u6539\u6240\u6709\u8005\u4e3a\u672c\u4eba \u53d6\u6d88\u7ee7\u627f\uff0c\u53ea\u4fdd\u7559\u672c\u4eba\uff0c\u5e76\u8bbe\u7f6e\u672c\u4eba\u6743\u9650\u4e3aFull\u3002 SSL\u767b\u5f55\u514d\u5bc6\u6d4b\u8bd5 \u628a~/.ssh/id_rsa-remote-ssh.pub\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u76ee\u6807\u673a\u5668\u7684~/.ssh/authorized_keys\u91cc \u5728\u672c\u5730powershell\u4e2d\u6d4b\u8bd5: ssh root@10.10.50.30 -i ~/.ssh/id_rsa-remote-ssh 8.2 \u8fdc\u7aefLinux\u673a\u5668\u8981\u6c42 \u901a\u5e38\u662f\u8981\u6c42CentOS7\u6216\u4ee5\u4e0a\u3002 https://code.visualstudio.com/docs/remote/ssh \u5982\u679c\u662fcentos6\uff0c\u9700\u8981\u5347\u7ea7\u5305: https://code.visualstudio.com/docs/remote/linux#_updating-glibc-and-libstdc-on-rhel-centos-6 8.3 \u5728vscode\u91cc\u914d\u7f6e\u63d2\u4ef6Remote - SSH \u53f3\u952eRemote-ssh\u63d2\u4ef6\uff0c\u8fdb\u5165\u6269\u5c55\u8bbe\u7f6e\uff0c\u5728\u201dRemote.SSH: Path\u201d\u4e2d\u6307\u5b9assh\u7684\u8def\u5f84\u3002\u201dD:\\Lawrence\\Tools\\OpenSSH-Win64\\ssh.exe\u201d \u786e\u4fddRemote.SSH:Show Login Terminal\u662f\u5df2\u52fe\u4e0a\u3002 VSCode\u4e0actrl+shift+p, \u5f00\u59cbremote\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u8fde\u63a5\u6210\u529f\u540e\u5b89\u88c5Python\u7b49\u63a7\u4ef6\u5230\u8fdc\u7a0b\u673a\u5668\u3002 VSCode\u5bf9\u8fdc\u7a0b\u673a\u5668\u7684\u5b9a\u4e49\u793a\u4f8b\u5982\u4e0b: Host 10.10.50.30 HostName 10.10.50.30 User root IdentityFile ~/.ssh/id_rsa-remote-ssh Jupyter\u73af\u5883\u914d\u7f6e \u5b89\u88c5Jupyter \u4ee5\u7ba1\u7406\u5458\u6743\u9650\u6253\u5f00cmd pip install jupyter_contrib_nbextensions jupyter contrib nbextension install --user pip install jupyter_nbextensions_configurator \u542f\u52a8Jupyter C:\\Python36\\Scripts\\jupyter-notebook.exe \u5728\u6253\u5f00\u7684\u6d4f\u89c8\u5668\u754c\u9762\u4e0a\uff0c\u5efa\u8bae\u5728Nbextensions\u9875\u4e0a\u52fe\u9009\u4e0a\u6240\u9700\u7684\u529f\u80fd\uff1a \u25cb Table of Contents(2) \u76ee\u5f55\u529f\u80fd \u25cb Collapsible headings \u6298\u53e0\u6807\u9898 \u25cb Notify \u901a\u77e5\u673a\u5236\uff0c\u8dd1\u4e00\u4e9b\u8017\u65f6\u8f83\u4e45\u7684\u4efb\u52a1\uff0c\u5b8c\u6210\u540e\u901a\u77e5 \u25cb Codefolding \u6298\u53e0\u4ee3\u7801 \u25cb Zen mode extension \u9690\u85cf\u6d3b\u52a8\u72b6\u6001\u680f\uff0c\u65b9\u4fbf\u6ce8\u610f\u4ee3\u7801 \u914d\u7f6eJupyter # \u67e5\u770b\u914d\u7f6e ipython locate # \u5982\u679c\u6ca1\u6709 ~/.jupyter/jupyter_notebook_config.py \uff0c\u5219\u6267\u884c\u8fd9\u6761\u547d\u4ee4\uff0c\u4e4b\u540e\u5728\u6b64\u505a\u914d\u7f6e jupyter notebook --generate-config # \u7f16\u8f91\u914d\u7f6e vim ~/.jupyter/jupyter_notebook_config.py or C:\\Users\\Administrator\\.jupyter\\jupyter_notebook_config.py # \u914d\u7f6e\u5185\u5bb9 # The directory to use for notebooks.\u8fd9\u51b3\u5b9a\u4e86jupyter\u542f\u52a8\u76ee\u5f55 c.NotebookApp.notebook_dir = u'/path/to/your/notebooks' or c.NotebookApp.notebook_dir = u'D:\\\\PythonLearning' \u6ce8: \u90e8\u95e8\u516c\u7528\u5730\u5740\uff1ahttp://10.10.50.30:7080/tree\uff0c \u5bc6\u7801\uff1ayunnex \u5e38\u89c1\u95ee\u9898\uff1a 1.pip\u5b89\u88c5MarkupSafe==1.0 \u95ee\u9898 Using cached MarkupSafe-1.0.tar.gz (14 kB) ERROR: Command errored out with exit status 1: command: 'D:\\yunnex\\env\\publish-server\\Scripts\\python.exe' -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\yunnex\\\\AppData\\\\Local\\\\Temp\\\\pip-install-3wp8lp4x\\\\MarkupSafe\\\\setu p.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\yunnex\\\\AppData\\\\Local\\\\Temp\\\\pip-install-3wp8lp4x\\\\MarkupSafe\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"' \"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base 'C:\\Users\\yunnex\\AppData\\Local\\Temp\\pip-install-3wp8lp4x\\MarkupSafe\\pip-egg-info' cwd: C:\\Users\\yunnex\\AppData\\Local\\Temp\\pip-install-3wp8lp4x\\MarkupSafe\\ Complete output (5 lines): Traceback (most recent call last): File \"<string>\", line 1, in <module> File \"C:\\Users\\yunnex\\AppData\\Local\\Temp\\pip-install-3wp8lp4x\\MarkupSafe\\setup.py\", line 6, in <module> from setuptools import setup, Extension, Feature ImportError: cannot import name 'Feature' from 'setuptools' (D:\\yunnex\\env\\publish-server\\lib\\site-packages\\setuptools\\__init__.py) ---------------------------------------- ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output. \u89e3\u51b3\u65b9\u6cd5 \u8fd9\u4e2a\u95ee\u9898\u4e3b\u8981\u662f setuptool\u7248\u672c\u7684\u95ee\u9898\uff0cpython3.6\u7684setuptoll \u5df2\u7ecf\u5347\u7ea7\u523046 \u4ee5\u4e0a\uff0c\u9700\u8981\u505a\u964d\u7ea7\u523045\u5904\u7406 \u5347\u7ea7\u4e0bsetuptools\u7684\u7248\u672c\u5373\u53ef (py3) [root@500cf2fd4b0c opt]# pip -V pip 20.0.2 from /opt/py3/lib64/python3.6/site-packages/pip (python 3.6)(py3) [root@500cf2fd4b0c opt]# (py3-publish) root@DESKTOP-VAL3SFG:/mnt/f/yunex/publish-server# pip list|grep setuptools setuptools 46.1.3 \u628a\u811a\u672c\u4ece\u539f\u6765\u7684pip install --upgrade pip setuptools \u4fee\u6539\u4e3apip install --upgrade pip setuptools==45.2.0 2.pip\u5b89\u88c5mysqlclient==1.3.12 \u89e3\u51b3\u529e\u6cd5\uff1a sudo apt-get install libmysqlclient-dev \u7136\u540e\u8fdb\u5165mysql_config\u7684\u8def\u5f84\uff08/usr/bin/mysql_config\uff09 sudo updatedb locate mysql_config 3. ubuntu pip\u5b89\u88c5ansible File \"/mnt/f/yunex/env/py3-publish/lib/python3.6/site-packages/pip/_vendor/urllib3/response.py\", line 430, in _error_catcher raise ReadTimeoutError(self._pool, None, \"Read timed out.\") pip._vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='files.pythonhosted.org', port=443): Read timed out. solution: pip3 install --default-timeout=1000 ansible==2.5.0 3. daemon: command not found \u5728wsl \u7684ubuntu \u4e0a\u4f7f\u7528 supervisord \u51fa\u73b0\u7684\u95ee\u9898 /# sh /data/sh/supervisord.sh start Starting supervisord: /data/sh/supervisord.sh: line 24: daemon: command not found cat /etc/rc.d/init.d/functions |grep daemon daemon() { '') echo $\"$0: Usage: daemon [+/-nicelevel] {program}\" \"[arg1]...\" *) echo $\"$0: Usage: daemon [+/-nicelevel] {program}\" \"[arg1]...\" \u200b # Echo daemon \u89e3\u51b3\u65b9\u6cd5 \uff1a \u8fd9\u4e2adeamon \u547d\u4ee4\u6765\u6e90\u4e8e /etc/rc.d/init.d/functions, \u8fd9\u4e2a\u811a\u672c\u662f centos\u7cfb\u7edf\u5b89\u88c5\u65f6 \u521d\u59cb\u5316\u7684\u4e00\u4e2a\u811a\u672c, wsl ubuntu \u6ca1\u6709\u6b64\u6587\u4ef6\u3002 \u5728\u5f00\u53d1\u73af\u5883\u4e0b \uff0c\u6ca1\u5fc5\u8981\u53bb\u8fd0\u884c supervisord \uff0c\u53ea\u9700\u5728\u6d4b\u8bd5\u73af\u5883\u8fdb\u884csepervisord \u7684\u914d\u7f6e\u9a8c\u8bc1\u5373\u53ef 4.celery woker \u8fd0\u884c\u65f6\u62a5 DuplicateNodenameWarning \u5728\u8fd0\u884c publish-server \u7684celery worker\u6a21\u5757\u65f6 \u62a5warning: [I 200415 11:22:32 mixins:224] Connected to redis://10.10.50.30:6379/2 /mnt/d/dev/envs/publish/lib/python3.6/site-packages/celery/app/control.py:45: DuplicateNodenameWarning: Received multiple replies from node name: celery@UGZB-Devops-test1-002. Please make sure you give each node a unique nodename using the celery worker `-n` option. pluralize(len(dupes), 'name'), ', '.join(sorted(dupes)), \u539f\u56e0\uff1a \u8fd9\u4e2a\u95ee\u9898\u4e3b\u8981\u662f\u56e0\u4e3a\uff0c\u5728 publish-server/conf/celery_config.py \u4e2d\u6307\u5411\u7684redis \u6570\u636e\u5e93\u6709\u591a\u4e2acelery worker\u5171\u7528. \u89e3\u51b3\u529e\u6cd5 \uff1a \u628a publish-server/conf/celery_config.py \u6307\u5411\u7684\u6570\u636e\u5e93\uff0c\u6307\u5411\u6ca1\u6709\u4eba\u5728\u7528\u7684\uff0c\u5982 redis \u9ed8\u8ba4\u662f\u521b\u5efa\u4e8616\u4e2a\u6570\u636e\u5e93\uff0c\u4e0b\u9762\u7684\u6570\u5b57\u4e0d\u8981\u5927\u4e8e16\u5373\u53ef\uff0c\u5982\u679c\u9700\u8981\u5927\u4e8e16\u9700\u8981\u6539redis.conf \u914d\u7f6e 5.windows python2 \u548cpython3\u5171\u5b58\u540e\uff0cpip \u65e0\u6cd5\u4f7f\u7528 \u95ee\u9898\uff1a PS F:\\yunex\\cmdb-web> pip3 Fatal error in launcher: Unable to create process using '\"d:\\program files\\python3.6\\python.exe\" \"D:\\Program Files\\python3.6\\Scripts\\pip3.exe\" ' \u89e3\u51b3\u65b9\u6cd5\uff1a \u4f7f\u7528\u4fee\u6539\u540d\u79f0\u540epython3 \u5347\u7ea7\u4ee5\u4e0bpip python3 -m pip install --upgrade pip \u4f46\u5982\u679cpip\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5148\u5378\u8f7d\u6389\u518d\u91cd\u65b0\u5b89\u88c5 python3 -m pip install --upgrade --force-reinstall pip 6.\u524d\u7aef npm install\u51fa\u9519 \u5728cmdb-web \u8fdb\u884cnpm install \u7684\u65f6\u5019\u603b\u662f\u51fa\u9519\uff0c\u5982\u4e0b \u751f\u6210\u5931\u8d25\u3002 MSBUILD : error MSB4132: \u65e0\u6cd5\u8bc6\u522b\u5de5\u5177\u7248\u672c\u201c2.0\u201d\u3002\u53ef\u7528\u7684\u5de5\u5177\u7248\u672c\u4e3a \"4.0\"\u3002 0 \u4e2a\u8b66\u544a 1 \u4e2a\u9519\u8bef \u5df2\u7528\u65f6\u95f4 00:00:00.07 gyp ERR! build error gyp ERR! stack Error: `C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\msbuild.exe` failed with exit code: 1 gyp ERR! stack at ChildProcess.onExit (F:\\yunex\\cmdb-web\\node_modules\\node-gyp\\lib\\build.js:262:23) gyp ERR! stack at ChildProcess.emit (events.js:311:20) gyp ERR! stack at Process.ChildProcess._handle.onexit (internal/child_process.js:275:12) gyp info spawn C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\msbuild.exe gyp info spawn args [ gyp info spawn args 'build/binding.sln', gyp info spawn args '/nologo', gyp info spawn args '/p:Configuration=Release;Platform=x64' gyp info spawn args ] \u5728\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u4e00\u6b21\u751f\u6210\u4e00\u4e2a\u9879\u76ee\u3002\u82e5\u8981\u542f\u7528\u5e76\u884c\u751f\u6210\uff0c\u8bf7\u6dfb\u52a0\u201c/m\u201d\u5f00\u5173\u3002 \u751f\u6210\u542f\u52a8\u65f6\u95f4\u4e3a 2020/4/24 12:07:20\u3002 \u539f\u6765\u8fd9\u662f\u7531\u4e8enodejs \u7248\u672c\u7684\u95ee\u9898\uff0ccmdb-web\u9879\u76ee\u5927\u6982\u662f2017\u5e74\u521b\u5efa\u7684\uff0c\u5f53\u65f6\u4f7f\u7528\u76f8\u5173\u5e93\u7684\u7248\u672c\u662f\u6bd4\u8f83\u65e7\u7684\uff0c \u6211\u4eec\u91c7\u7528\u9ed8\u8ba4\u5b89\u88c5\u7684\u65b9\u5f0f\u5b89\u88c5\u7684nodejs \uff0c\u81ea\u7136\u5b89\u88c5\u7684\u662f12.X\u7248\u672c\u7684\uff0c\u628anodejs \u7684\u7248\u672c\u56de\u9000\u4e00\u4e0b\u5373\u53ef\uff0c\u56de\u9000\u52308.X \u7248\u672c\u3002 7.\u5b89\u88c5mysqlclient==1.3.13 \u5931\u8d25 \u51fa\u73b0\u7684\u95ee\u9898 building '_mysql' extension creating build\\temp.win-amd64-3.6 creating build\\temp.win-amd64-3.6\\Release C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX86\\x64\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -Dversion_info=(1,3,13,'final',0) -D__version__=1.3.13 \"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\" -IF:\\yunex\\dbms\\python36dbms\\include \"-Id:\\program files\\python3.6\\include\" \"-Id:\\program files\\python3.6\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\cppwinrt\" /Tc_mysql.c /Fobuild\\temp.win-amd64-3.6\\Release\\_mysql.obj /Zl _mysql.c _mysql.c(29): fatal error C1083: \u65e0\u6cd5\u6253\u5f00\u5305\u62ec\u6587\u4ef6: \u201cmysql.h\u201d: No such file or directory error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit status 2 ---------------------------------------- ERROR: Failed building wheel for mysqlclient Running setup.py clean for mysqlclient Failed to build mysqlclient Installing collected packages: mysqlclient Running setup.py install for mysqlclient ... error \u89e3\u51b3\u65b9\u6cd5\uff1a \u5728Windows\u4e2d\uff0c\u4f7f\u7528 python unofficial binaries \u5b89\u88c5MySQL\u3002\u4f7f\u7528\u6b64\u94fe\u63a5\u5e76\u4e0b\u8f7d\u60a8\u6240\u9700\u7684python\u8f6f\u4ef6\u5305\u3002 \u4f7f\u7528\u5b89\u88c5\u5b83\uff0c pip install ~/Downloads/mysqlclient\u20111.3.10\u2011cp36\u2011cp36m\u2011win_amd64.whl \u638c\u8d1d-\u9ec4\u6708\u73cd 20200415 \u21a9","title":"\u5f00\u53d1\u5de5\u5177"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#_1","text":"","title":"\u638c\u8d1d\u8fd0\u7ef4\u5f00\u53d1\u73af\u5883\u914d\u7f6e\u4e0e\u8fd0\u884c"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#_2","text":"","title":"\u524d\u8a00"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#_3","text":"\u5728\u6211\u4eec\u5f00\u53d1\u7684\u8fd9\u51e0\u4e2a\u7cfb\u7edf\uff1a cmdb /watcher/publish \u4e0e\u53ca\u57fa\u4e8e\u5f00\u6e90\u9879\u76ee\u7684dbms , \u91c7\u7528\u7684\u540e\u7aef\u5f00\u53d1\u8bed\u8a00\u90fd\u662fpython, \u524d\u7aef\u4e5f\u4e3b\u8981\u662f\u4ee5vue +js \u4e3a\u4e3b\u3002\u5728\u8fd0\u7ef4\u5f00\u53d1\u4e2d\uff0c\u4e3b\u8981\u6d89\u53ca\u5230\u4e09\u7c7b\u73af\u5883\uff1a \u5f00\u53d1\u73af\u5883 \u6d4b\u8bd5\u73af\u5883 \u751f\u4ea7\u73af\u5883 \u6d4b\u8bd5\u4e0e\u53ca\u751f\u4ea7\u73af\u5883\u7684\u90e8\u7f72\u4e4b\u524d\u5df2\u6709\u76f8\u5173\u7684wiki \u8fdb\u884c\u4ecb\u7ecd\uff0c\u90a3\u4e48\u73b0\u5728\u4e3b\u8981\u7ed9\u5927\u5bb6\u5206\u4eab\u4e0b\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\u3002 \u9879\u76ee \u524d\u7aefor\u540e\u7aef \u5f00\u53d1\u8bed\u8a00and \u6846\u67b6 python/nodejs\u7248\u672c \u662f\u5426\u9700\u8981\u4f9d\u8d56linux cmdb-server \u540e\u7aef python and tornado python3.6.2 \u5426\uff0cwindows/linux \u5747\u53ef\u8fd0\u884c cmdb-web \u524d\u7aef js and vue +element ui nodejs 8.8.0 32\u4f4d \u5426\uff0cwindows\u501f\u52a9node.js \u53ef\u8fd0\u884c monitor-center \u540e\u7aef python and tornado python3.6.2 \u5426\uff0cwindows/linux \u5747\u53ef\u8fd0\u884c monitor-web \u524d\u7aef js and vue +element ui nodejs 12.16.0 64\u4f4d \u5426\uff0cwindows\u501f\u52a9node.js \u53ef\u8fd0\u884c publish-server \u540e\u7aef python and tornado+ansible+celery python3.6.2 \u662f\uff0cwindows \u4e0d\u80fd\u72ec\u7acb\u8fd0\u884c publish-web \u524d\u7aef js and vue +element ui nodejs 12.16.0 64\u4f4d \u5426\uff0cwindows\u501f\u52a9node.js \u53ef\u8fd0\u884c dbms \u524d\u540e\u7aef\u4e0d\u5206\u79bb python and django python3.6.2 \u5426\uff0cwindows/linux \u5747\u53ef\u8fd0\u884c \u5e02\u9762\u4e0a\u5f00\u53d1\u6240\u7528\u7684IDE \u6709\u5f88\u591a\uff0c \u6bd4\u5982pycharm \u4e13\u95e8\u9488\u5bf9 python\u8bed\u8a00\u7684\u4e00\u6b3eIDE,\u8fd8\u6709 \u5fae\u8f6f\u65b0\u5f00\u653e\u7684visual studio code\u3002 \u8fd0\u7ef4\u5f00\u53d1\u5de5\u5177\u7684\u9009\u62e9 \u63a8\u8350\u4f7f\u7528 Visual Studio Code \u548c Jupyter \u4f5c\u4e3a\u65e5\u5e38\u7684\u9879\u76ee\u5f00\u53d1\u4e0e\u811a\u672c\u7f16\u5199\u5de5\u5177\u3002 1) Pycharm \u517c\u5bb9\u6027\uff1a Windows\u3001Linux\u3001Mac OS \u4f18\u70b9\uff1a \u96c6\u6210\u5355\u5143\u6d4b\u8bd5\uff0c \u4ee3\u7801\u68c0\u6d4b\uff0c \u96c6\u6210\u7248\u672c\u63a7\u5236\uff0c \u4ee3\u7801\u91cd\u6784\u5de5\u5177\uff0c \u5404\u79cd\u5bfc\u822a\u5de5\u5177\u4ee5\u53ca\u671f\u671b\u7684\u7a81\u51fa\u663e\u793a\u548c\u81ea\u52a8\u5b8c\u6210\u529f\u80fd \u8fdc\u7a0b\u8c03\u8bd5 \u7f3a\u70b9\uff1a \u9700\u8981\u4ed8\u8d39\uff0c\u7f51\u4e0a\u7684\u514d\u8d39\u7834\u89e3\u7248\uff0c\u4f1a\u65f6\u4e0d\u65f6\u88ab\u5c01\uff0c\u9700\u8981\u91cd\u65b0\u627e\u65b0\u7684\u7834\u89e3\u7801 2) Visual Studio Code(\u63a8\u8350) \u517c\u5bb9\u6027\uff1a Windows\u3001Linux\u3001Mac OS \u201cVisual Studio Code is an editor for any developer, no matter what programming language you use.\u201d \u201cVisual Studio Code\u662f\u4efb\u4f55\u5f00\u53d1\u4eba\u5458\u7684\u7f16\u8f91\u5668\uff0c\u65e0\u8bba\u60a8\u4f7f\u7528\u4f55\u79cd\u7f16\u7a0b\u8bed\u8a00\u3002\u201d \u4f18\u70b9\uff1a \u8f7b\u4fbf\u7075\u6d3b\uff0c\u63d2\u4ef6\u5f0f\u7684\u8bbe\u8ba1\uff0c\u63d2\u4ef6\u4e30\u5bcc\uff0c\u51e0\u4e4epycharm \u4e0a\u63d0\u4f9b\u7684\u529f\u80fd\u90fd\u53ef\u901a\u8fc7\u63d2\u4ef6\u6765\u8fdb\u884c\u652f\u6301 \u652f\u6301\u591a\u79cd\u8bed\u8a00\uff0cjs +vue ,python \uff0cjava \u7b49 \u7ed3\u5408 windows\u4e0b\u7684powshell ,\u652f\u6301\u547d\u4ee4\u884c\u5de5\u5177 \u914d\u7f6e\u540e\u8fdc\u7a0b\u8c03\u8bd5\u975e\u5e38\u65b9\u4fbf\uff0c\u5e76\u4e14\u548cwindwos\u81ea\u5e26\u7684linux\u7d27\u5bc6\u7ed3\u5408\u3002 \u5f00\u6e90\u514d\u8d39\uff0c\u4f7f\u7528\u8005\u4f17\u591a\uff0c\u51fa\u73b0\u95ee\u9898 \u793e\u533a\u652f\u6301\u7ed9\u529b \u7f3a\u70b9\uff1a \u200b vs code \u7531\u4e8e\u652f\u6301\u4e86\u591a\u8bed\u8a00\uff0c\u914d\u7f6e\u76f8\u5bf9pycharm\u6765\u8bf4\u7a0d\u4e3a\u590d\u6742\u4e00\u4e9b\u3002\u5bf9\u4e8e\u5927\u578b\u7684\u9879\u76ee\u5f00\u53d1\u6216\u8005Debug\u73af\u5883\uff0c\u9700\u8981\u7f16\u5199\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5982python \u9879\u76ee\u7684 launch.json\u3002 3) Jupyter Notebook(\u63a8\u8350) Jupyter Notebook \u7684\u672c\u8d28\u662f\u4e00\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u4fbf\u4e8e\u521b\u5efa\u548c\u5171\u4eab\u6587\u5b66\u5316\u7a0b\u5e8f\u6587\u6863\uff0c\u652f\u6301\u5b9e\u65f6\u4ee3\u7801\uff0c\u6570\u5b66\u65b9\u7a0b\uff0c\u53ef\u89c6\u5316\u548c markdown\u3002 \u7528\u9014\u5305\u62ec\uff1a\u6570\u636e\u6e05\u7406\u548c\u8f6c\u6362\uff0c\u6570\u503c\u6a21\u62df\uff0c\u7edf\u8ba1\u5efa\u6a21\uff0c\u673a\u5668\u5b66\u4e60\u7b49\u7b49\uff0c\u76ee\u524d\u5728\u5b66\u672f\u754c\u548c\u673a\u5668\u5b66\u4e60\u65b9\u9762\u975e\u5e38\u6d41\u884c\uff0c\u9002\u7528\u4e8e\u6211\u4eec\u5e73\u65f6\u7684Python\u5b66\u4e60\u548c\u5b66\u4e60\u7b14\u8bb0\u4f7f\u7528\u3002 \u4e00\u822c\u5728\u672c\u673a\u5b89\u88c5\u76f4\u63a5\u8fd0\u884c\uff0c\u6216\u8005\u4f7f\u7528\u5185\u7f51\u516c\u5171Jupyter\u3002 \u6d4b\u8bd5\u73af\u5883\u5730\u5740\uff1ahttp://10.10.50.30:7080/tree\uff0c \u5bc6\u7801\uff1ayunnex \u7ed3\u8bba \u57fa\u4e8e\u4ee5\u4e0a\u7684\u5bf9\u6bd4\uff0c \u6211\u4eec\u7684\u524d\u7aef\u548c\u540e\u7aef\u9879\u76ee\u91c7\u7528\u7684\u90fd\u662f visual studio code \u4e0b\u6587\u7b80\u79f0\u4e3a vs code \uff09 \u4f5c\u4e3aIDE\u3002","title":"\u8fd0\u7ef4\u5f00\u53d1\u76f8\u5173\u7684\u7cfb\u7edf"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#pythonvirtualenv","text":"virtualenv \u662f\u4e2apython \u7684\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u5728\u5bf9\u591a\u9879\u76ee\u5f00\u53d1\u65f6\uff0c\u7531\u4e8e\u4e0d\u540c\u7684\u9879\u76ee\u53ef\u80fd\u5bf9\u540c\u4e00\u4e2a\u5305\u7684\u7248\u672c\u4f9d\u8d56\u4e0d\u540c\uff0c\u5982\u679c\u591a\u4e2a\u9879\u76ee\u90fd\u4f7f\u7528\u540c\u4e00\u4e2a python \u7684sitepackages \u53ef\u80fd\u4f1a\u5bfc\u81f4\u51b2\u7a81\uff0c\u56e0\u800c\u9700\u8981\u6309\u5206\u9879\u76eepython \u5305\u8fdb\u884c\u7ba1\u7406\u3002 virtualenv \u5c31\u662f\u8fd9\u6837\u4e00\u4e2a\u5de5\u5177\uff0c\u4f7f\u7528\u540c\u4e00\u4e2a python \u89e3\u91ca\u5668\uff0c\u4f46\u662f\u4f7f\u7528\u4e0d\u540c\u7684\u5e93\u3002 virtualenv \u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a python \u5e93\uff0c\u5b89\u88c5\u65b9\u6cd5\u540c\u666e\u901a\u7684python \u5305 #\u5207\u6362\u5230\u76ee\u6807python \u7248\u672c\u4e0b\u7684pip\uff0c\u6307\u5b9a\u5f53\u524d\u6700\u65b0\u7684virtualenv\u7248\u672c pip install virtualenv==20.0.18 \u4ece2020\u5e74\u5f00\u59cb\uff0cvirtualenv \u76f4\u63a5\u4ece\u539f\u6765\u768416.x \u7248\u672c \u4e00\u4e0b\u5b50\u8df3\u5230\u4e8620.x \u7248\u672c\uff0c\u5e76\u4e14\u53bb\u6389\u4e86 \u2013no-sitepackages \u8fd9\u4e2a\u53c2\u6570\uff0c\u76f4\u63a5\u9ed8\u8ba4\u6709\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e5f\u5c31\u662f 16.x\u53ca\u4e4b\u524d\u7684\u7248\u672c\u662f\u9700\u8981\u5e26\u2013no-sitepackages \u624d\u53ef\u4ee5\u521d\u59cb\u5316\u4e00\u4e2a\u5e72\u51c0\u7684python\u73af\u5883\uff0c\u4ece20.X\u7248\u672c \u8fd9\u4e2a\u53c2\u6570\u76f4\u63a5\u662f\u9ed8\u8ba4\u7684\u4e86\uff0c\u65e0\u9700\u5e26\u4e0a\u3002","title":"Python\u865a\u62df\u73af\u5883virtualenv\u914d\u7f6e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#linuxwslvirtualenv","text":"## \u5b89\u88c5virtualenv(\u57fa\u7840) # \u6784\u5efa\u865a\u62df\u73af\u5883 pip3 install virtualenv # \u8fdb\u5165\u4f60\u60f3\u8981\u6784\u5efa\u7684\u8def\u5f84- cd /mmt/f/yunex/env # -p\u6307\u5b9a\u54ea\u4e2apython \u7d27\u8ddf\u7684\u662f\u865a\u62df\u73af\u5883\u7684\u540d\u79f0 virtualenv -p python3 py3-publish # \u5b89\u88c5requirements.txt \u5230\u6307\u5b9a\u865a\u62df\u73af\u5883 # \u4e0b\u9762\u8fd9\u4e2a\u662f\u4ee5publish-server\u4e3a\u4f8b\uff0c\u5148\u8fdb\u5165\u5230\u4ee3\u7801\u76ee\u5f55\uff0c\u6fc0\u6d3bpython3.6\u73af\u5883\uff0c\u7136\u540e\u5b89\u88c5 cd /mmt/f/yunex/publish-server source /mnt/f/yunex/env/py3-publish/bin/activate pip3 install -r requirements.txt #\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9000\u51fa\u5f53\u524d\u7684\u865a\u62df\u73af\u5883 deactivate ## \u5b89\u88c5virtualenv\u540e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5b89\u88c5virtualenvwrapper\u7ba1\u7406Python\u865a\u62df\u73af\u5883 pip3 install virtualenvwrapper export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3 #\u914d\u7f6e\u4f9d\u8d56\u7684python export WORKON_HOME=/mnt/f/yunex/env #\u8bbe\u5b9a\u865a\u4f3c\u73af\u5883\u96c6\u4e2d\u76ee\u5f55 mkvirtualenv --python=/usr/bin/python3 publish-server #\u521b\u5efa\u865a\u62df\u73af\u5883 ## \u5f00\u59cb\u4f7f\u7528 workon #\u67e5\u770b\u5f53\u524d\u7684\u865a\u62df\u73af\u5883\u76ee\u5f55 workon publish-server #\u5207\u6362\u5230\u865a\u62df\u73af\u5883 python -V cd /mmt/f/yunex/publish-server #\u6b64\u65f6\u53ef\u4ee5\u5b89\u88c5\u9879\u76ee\u7684\u4f9d\u8d56\u5305\uff0c\u4ee5publish-server\u4e3a\u4f8b pip3 install -r requirements.txt #\u5b89\u88c5\u4f9d\u8d56\u5305 deactivate #\u9000\u51fa\u865a\u62df\u73af\u5883 ## \u5220\u9664\u5b89\u88c5 rmvirtualenv venv #\u5220\u9664\u865a\u62df\u73af\u5883","title":"Linux/WSL\u7684virtualenv\u914d\u7f6e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#windowsvirtualenv","text":"\u5728\u4f60\u60f3\u8981\u7684\u76ee\u5f55\u4e0b\u865a\u62df\u51fa python \u73af\u5883 # \u4e0b\u9762\u7684\u4f8b\u5b50\u91cc\uff0c\u56e0\u4e3a\u662f\u5728 windows\u5f00\u53d1\u73af\u5883\u4e0b\uff0c\u4e3a\u65b9\u4fbf\u7edf\u4e00\u7ba1\u7406 #\u6211\u76f4\u63a5\u5728 \u9879\u76ee\u6e90\u7801\u7684\u6839\u76ee\u5f55\u4e0b \u865a\u62df\u4e86\u5bf9\u5e94\u7684\u865a\u62df\u73af\u5883\uff0c \u5982\u9879\u76ee cmdb-server ,\u76f4\u63a5\u5728\u6839\u76ee\u5f55\u4e0b\u865a\u62dfpython36cmdb # \u7136\u540e\u5728 .gitignore\u6587\u4ef6\u91cc\u589e\u52a0 \u4e00\u884c\uff1a python36cmdb/* ,\u8ba9git \u4e0d\u8ffd\u8e2a\u8fd9\u4e2a\u6587\u4ef6\u7684\u53d8\u5316 #\u865a\u62df\u51fapython \u73af\u5883 virtualenv python36cmdb #\u91c7\u7528\u865a\u62df\u73af\u5883\u7684pip \u5b89\u88c5requirements.txt .\\python36cmdb\\Scripts\\pip-3.6.exe install -r .\\requirements.txt \u8fd9\u6837\u5b50 cmdb\u7684python\u73af\u5883\u5c31\u865a\u62df\u597d\u4e86 \u518d\u56de\u5230vs code \u4e0b\u7684\u914d\u7f6e\uff0c \u5728/.vscode/settings.json \u6587\u4ef6\u91cc\u6dfb\u52a0\u8fdb\u65b0\u865a\u62df\u51fa\u7684python \u8def\u5f84\u5373\u53ef { \"python.pythonPath\": \"python36cmdb\\\\Scripts\\\\python.exe\" } \u5982\u679c\u5f53\u524dvs code \u7684\u9879\u76ee\u91cc\uff0c\u6ca1\u6709/.vscode/settings.json \u8fd9\u4e2a\u6587\u4ef6\uff0c\u6309\u4e00\u4e0bF5, vs code \u5c31\u4f1a\u63d0\u793a\u4f60\u9009\u62e9python \u89e3\u6790\u5668\uff0c\u9009\u62e9\u5b8c\u6210\u540e\u5c31\u4f1a\u81ea\u52a8\u751f\u6210\u8be5\u6587\u4ef6\u3002","title":"Windows\u7684virtualenv\u914d\u7f6e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#_4","text":"\u2022 mkvirtualenv wxhpython01\uff1a\u521b\u5efa\u8fd0\u884c\u73af\u5883wxhpython01 \u2022 workon wxhpython01: \u5de5\u4f5c\u5728 zqxt \u73af\u5883 \u6216 \u4ece\u5176\u5b83\u73af\u5883\u5207\u6362\u5230 wxhpython01\u73af\u5883 \u2022 deactivate: \u9000\u51fa\u7ec8\u7aef\u73af\u5883 \u2022 rmvirtualenv ENV\uff1a\u5220\u9664\u8fd0\u884c\u73af\u5883ENV \u2022 mkproject mic\uff1a\u521b\u5efamic\u9879\u76ee\u548c\u8fd0\u884c\u73af\u5883mic \u2022 mktmpenv\uff1a\u521b\u5efa\u4e34\u65f6\u8fd0\u884c\u73af\u5883 \u2022 lsvirtualenv: \u5217\u51fa\u53ef\u7528\u7684\u8fd0\u884c\u73af\u5883 lssitepackages: \u5217\u51fa\u5f53\u524d\u73af\u5883\u5b89\u88c5\u4e86\u7684\u5305","title":"\u547d\u4ee4\u8bf4\u660e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#vs-code","text":"\u5f00\u53d1\u73af\u5883\u7684\u4e09\u79cd\u6a21\u5f0f \u7531\u4e8e\u6709\u90e8\u5206\u7c7b\u5e93\uff0c\u4e0d\u652f\u6301windows \u4e0b\u73af\u5883\u8fd0\u884c\uff0c\u5982 ansible kafka \u7b49\uff0c\u90a3\u4e48\u5f00\u53d1\u73af\u5883\u6709\u4e09\u79cd\u65b9\u5f0f\u53ef\u9009\u62e9\uff1a windows vs code + \u8fdc\u7a0b\u8fd0\u884c\u8c03\u8bd5\u5de5\u5177\uff08remote ssh \uff09+ \u672c\u5730\u865a\u62dflinux\u6216\u8fdc\u7a0b\u670d\u52a1\u5668 \uff08 \u63a8\u8350 \uff09 win10 \u7cfb\u7edf\u6709\u4e2a\u65b0\u51fa\u7684WSL(windows subsystem for linux), \u5f00\u542f\u8be5\u529f\u80fd \u5b89\u88c5ubuntu \u684c\u9762\u7cfb\u7edf\uff0c\u5728ubuntu\u7cfb\u7edf\u4e0b\u914d\u7f6evs code \u7b49\u5f00\u53d1\u73af\u5883 \uff08 \u4e00\u822c \uff09 win10 \u5f00\u542f wsl,ubuntu\u53ea\u5b89\u88c5python \u4e0e\u53ca\u9879\u76ee\u7684requirements.txt\uff0cvs code \u5728win10 \u4e0b\u901a\u8fc7remote wsl \u8fde\u63a5\uff0c\u5e76\u5728\u672c\u5730win\u7cfb\u7edf\u5f00\u53d1\u8c03\u8bd5 \uff08 \u63a8\u8350 \uff09 \uff08\u4e00\u822c\u60c5\u51b5\u8fd9\u4e2a\u662f\u591f\u7528\u7684\uff0c\u4f46\u662f\u53d1\u5e03\u7cfb\u7edf \u9700\u8981\u62ff\u5305\uff0c\u56db\u53f0\u6d4b\u8bd5\u4e3b\u673a10.10.51.41-44 \u4e0e\u6211\u4eec\u529e\u516c\u7f51\u7edc \u6ca1\u6709\u5b8c\u5168\u53cc\u5411\u6253\u901a\uff0c\u6240\u4ee5\u8fd9\u79cd\u6a21\u5f0f\uff0c\u572810.10.51.41-4 \u4e3b\u673a\u4ece\u6211\u4eec\u529e\u516c\u4e3b\u673a\u4e0a\u4f1a\u62c9\u53d6\u4e0d\u5230\u5305\uff09 \u7ed3\u8bba\uff1a \u7531\u4e8e\u6211\u4eec\u7684cmdb-server/cmdb-web watcher-server/watcher-web publish-web \u90fd\u662f\u53ea\u9700\u8981\u5728win \u73af\u5883\u4e0b\u7684vs code \u5373\u53ef\u8fd0\u884c\uff0c\u53ea\u6709publish-server\u9700\u8981\u4f9d\u8d56 linux\u73af\u5883\uff0c\u4e3a\u65b9\u4fbf\u7edf\u4e00\uff0c\u6bd4\u8f83\u63a8\u8350\u7b2c\u4e09\u79cd\u5f00\u53d1\u65b9\u5f0f\uff0c\u4e0b\u6587\u4e5f\u4e3b\u8981\u91c7\u7528\u6b64\u79cd\u65b9\u5f0f\u6765\u89e3\u51b3 publish-server \u5bf9linux \u7684\u4f9d\u8d56\u3002","title":"VS Code\u8fd0\u884c\u73af\u5883\u914d\u7f6e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#1-widows-vs-code","text":"","title":"1.\u4e0b\u8f7d widows \u7248\u7684 vs code"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#vs-code_1","text":"vs code \u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1ahttps://code.visualstudio.com/Download \u6309\u6b65\u9aa4\u5b89\u88c5\u5373\u53ef","title":"VS Code\u5b89\u88c5"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#win10-wsl","text":"win10 \u642d\u5efa WSL \u7684\u8fc7\u7a0b\u8bf7\u53c2\u89c1\uff1ahttp://wiki.corp.yunnex.com/pages/viewpage.action?pageId=26673982","title":"win10 \u642d\u5efawsl"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#2-python","text":"","title":"2. \u5b89\u88c5python"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#windows-python","text":"\u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.python.org/downloads/ \u9009\u62e93.6.X \u7248\u672c(\u4e0d\u5efa\u8bae\u5b89\u88c5\u6700\u65b0\u7248\u76843.8\uff0c\u4e0e\u73b0\u6709\u4ee3\u7801\u6709\u90e8\u5206\u517c\u5bb9\u95ee\u9898)\uff0c\u5e76\u628a\u8def\u5f84\u6dfb\u52a0\u5230 \u73af\u5883\u53d8\u91cf \u68c0\u9a8c\u5b89\u88c5\u662f\u5426\u6210\u529f\uff1a \u8c03\u51facmd \u6267\u884c python , \u5982\u679c\u63d0\u793a\u627e\u4e0d\u5230\u547d\u4ee4\uff0c\u5148\u770b\u770b\u73af\u5883\u53d8\u91cf\u662f\u4e0d\u662f\u6ca1\u914d\u7f6e\u6210\u529f","title":"windows\u5b89\u88c5 python"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#ubuntuwsl-python","text":"apt install python3.6 \u9a8c\u8bc1\u662f\u5426\u6210\u529f product@DESKTOP-VAL3SFG:~$ python3 Python 3.6.9 (default, Nov 7 2019, 10:44:02) [GCC 8.3.0] on linux Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. \u63d0\u793a: \u4f7f\u7528windows10\u7684WSL\u65f6\uff0c\u8bbe\u7f6essh\u5f00\u59cb\u542f\u52a8\u7684\u65b9\u6cd5: win10\u7684\u5f00\u59cb-\u8fd0\u884c\u91cc\u9762(\u6216Win + r\u952e)\u91cc\uff0c \u8f93\u5165shell:startup\u6253\u5f00\u542f\u52a8\u6587\u4ef6\u5939\uff0c\u65b0\u589estartservice.vbs\u811a\u672c\u653e\u8fdb\u53bb [C:\\Users\\admin1\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup]$ type wsl-startservice.vbs Set ws = WScript.CreateObject(\"WScript.Shell\") ws.run \"ubuntu run sudo service ssh restart\", vbhide","title":"ubuntu(WSL) \u5b89\u88c5python"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#3pip","text":"","title":"3.\u5b89\u88c5pip"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#windowspip","text":"python3\u4ee5\u4e0a\u7684\u7248\u672c\uff0c\u5b89\u88c5\u4e86python \u540e\u90fd\u4f1a\u6709\u81ea\u5e26\u7684pip,\u4e0d\u7528\u518d\u989d\u5916\u5b89\u88c5\uff0c\u9a8c\u8bc1 PS F:\\yunex\\cmdb-server> pip -V pip 18.1 from d:\\program files\\python3.6\\lib\\site-packages\\pip (python 3.6)","title":"windows\u5b89\u88c5pip"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#ubuntu-pip","text":"apt install python3-pip","title":"ubuntu \u5b89\u88c5pip"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#pip","text":"# cat ~/.pip/pip.conf [global] index-url=https://mirrors.aliyun.com/pypi/simple","title":"pip\u914d\u7f6e\u56fd\u5185\u6e90"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#4-git","text":"","title":"4.\u5b89\u88c5  git \u5ba2\u6237\u7aef"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#windows-git","text":"\u4e0b\u8f7d\u5730\u5740https://git-scm.com/downloads, \u6309\u6b65\u9aa4\u70b9\u9ed8\u8ba4\u9009\u9879\u5b89\u88c5\u5373\u53ef \u914d\u7f6egit \u7528\u6237\u540d\u79f0 \u8bbe\u7f6e\u5168\u5c40\u7528\u6237\u540d\uff0c\u5982\u679c\u521b\u5efa\u540e\u9700\u8981\u4fee\u6539\uff0c\u4e5f\u662f\u8fd9\u4e2a\u547d\u4ee4\uff0c\u76f4\u63a5\u8986\u76d6\u539f\u6765\u7684\u914d\u7f6e git config --global user.name \"huangyuezhen\" git config --global user.email \"huangyuezhen@yunnex.com\" \u4e3a\u5355\u4e2a\u4ed3\u5e93\u8bbe\u7f6e Git \u7528\u6237\u540d, \u53bb\u6389\u4e0a\u9762\u7684 global \u5373\u53ef\uff0c\u5355\u4e2a\u4ed3\u5e93\u7684\u72ec\u7acb\u914d\u7f6e\u4f1a\u8986\u76d6global\u914d\u7f6e 1.\u6253\u5f00 Git Bash\u3002 2.\u5c06\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u66f4\u6539\u4e3a\u60a8\u60f3\u8981\u5728\u5176\u4e2d\u914d\u7f6e\u4e0e Git \u63d0\u4ea4\u5173\u8054\u7684\u540d\u79f0\u7684\u672c\u5730\u4ed3\u5e93\u3002 3.\u8bbe\u7f6e Git \u7528\u6237\u540d\uff1a $ git config user.name \"huangyuezhen\" \u67e5\u770b\u5168\u5c40\u8bbe\u7f6e PS C:\\Users\\87217> git config --global -l user.name=huangyuezhen user.email=huangyuezhen@yunnex.com \u67e5\u770b\u67d0\u4e2a\u4ed3\u5e93\u7684\u8bbe\u7f6e git config -l \u6267\u884c\u4e0b git pull \u7b49\u547d\u4ee4\uff0c\u4f1a\u5f39\u51fa\u6846\u8981\u6c42\u8f93\u5165 git\u4ed3\u5e93\u7684\u8d26\u53f7\u5bc6\u7801\uff0c \u8d26\u53f7\u548c\u5bc6\u7801\u4f1a\u88ab\u4fdd\u5b58\u5230 windows \u4e0b\u7684\u201c\u51ed\u636e\u7ba1\u7406\u5668\u201d\uff0c\u4fee\u6539\u6216\u5220\u9664\u90fd\u9700\u8981\u8fdb\u5165\u5230\u8fd9\u91cc\u3002 \u6ce8\u610f\u70b9\uff1a git \u4ed3\u5e93\u7684\u8d26\u53f7\u5bc6\u7801\uff0c \u548c user.name \u7684\u7528\u6237\u540d\u79f0\u53ef\u4ee5\u4e0d\u4e00\u81f4\uff0c user.name \u624d\u662f\u771f\u6b63\u8bb0\u5f55log \u5bf9\u5e94\u7684 \u7528\u6237\uff0c\u5f39\u51fa\u8f93\u51fa\u7684\u8d26\u53f7\u5bc6\u7801\u53ea\u662f\u4f5c\u4e3a\u4e0e\u8fdc\u7a0b\u4ed3\u5e93\u8fde\u63a5\u7684\u51ed\u8bc1\uff0c \u5f53\u53ea\u8f93\u5165\u5f39\u51fa\u8f93\u51fa\u7684\u8d26\u53f7\u5bc6\u7801\uff0c \u672a\u8bbe\u7f6e global user.name \u6216\u4ed3\u5e93\u72ec\u7acb\u7684 user.name \u65f6\uff0c\u4f1a\u63d0\u793a\u9700\u8981\u8bbe\u7f6euser.name \u548cuser.email \u4fe1\u606f,\u5982\u4e0b ```powershell S F:\\yunex\\publish-web> git commit -m \u201ctest\u201d *** Please tell me who you are. Run git config --global user.email \"you@example.com\" git config --global user.name \"Your Name\" to set your account\u2019s default identity. Omit \u2013global to set the identity only in this repository. fatal: unable to auto-detect email address (got \u201887217@DESKTOP-VAL3SFG.(none)\u2019) ```","title":"windows \u5b89\u88c5 git"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#ubuntu-git","text":"ubuntu\u53d1\u884c\u7248\u4e00\u822c\u4f1a\u81ea\u5e26\u8fd9\u4e9b\u5e38\u7528\u7684\u5de5\u5177\uff0c\u4e0d\u7528\u989d\u5916\u5b89\u88c5 \u9a8c\u8bc1\uff1a ```power shell product@DESKTOP-VAL3SFG:~$ git \u2013version git version 2.17.1 ### 5.\u914d\u7f6e vs code\u7684python \u8fd0\u884c\u73af\u5883 \u6253\u5f00 vs code \u540e\uff0c\u5feb\u6377\u952e ctrl + \u201c~\u201d \u8c03\u51fa powershell \u7a97\u53e3\uff0c\u68c0\u9a8cpython\u73af\u5883\u662f\u5426\u5b89\u88c5\u6210\u529f\uff1a ```powershell PS C:\\Users\\87217> python Python 3.6.8rc1 (v3.6.8rc1:cc3e73212a, Dec 12 2018, 00:15:46) [MSC v.1900 64 bit (AMD64)] on win32 Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. >>> PS C:\\Users\\87217> pip -V pip 18.1 from d:\\program files\\python3.6\\lib\\site-packages\\pip (python 3.6) PS F:\\yunex\\publish-server> git --version git version 2.26.0.windows.1","title":"ubuntu \u5b89\u88c5git"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#51-python","text":"\u8be5\u63d2\u4ef6\u652f\u6301 python \u8bed\u6cd5\u9ad8\u4eae\uff0c\u8bed\u6cd5\u68c0\u6d4b\uff0c\u81ea\u52a8\u8865\u5168\u3001\u8c03\u8bd5\u3001\u4ee3\u7801\u683c\u5f0f\u5316\u3001\u5355\u5143\u6d4b\u8bd5\u7b49\u529f\u80fd \u4fa7\u8fb9\u680f\u627e\u5230\u6700\u4e0b\u9762\u7684\u201c\u65b9\u5f62\u79ef\u6728 \u201d Extensions\u2013> \u641c\u7d22\u6846\u641c\u7d22 python \u2013>\u627e\u5230\u540e\u70b9\u51fb\u5b89\u88c5\u2013>>\u5b89\u88c5\u5b8c\u540e\u9009\u62e9\u201c\u91cd\u65b0\u52a0\u8f7d\u201d\u6216\u624b\u52a8\u91cd\u542fVS Code\u5373\u53ef \u63a8\u8350\u5b89\u88c5\u7684\u63d2\u4ef6\u5982\u4e0b: Python\u63d2\u4ef6 VScode\u81ea\u5e26\u7684\u5b98\u65b9\u63d2\u4ef6 vscode-icons \u6587\u4ef6\u56fe\u6807\u96c6 Guides\uff1a \u5c06\u7f29\u8fdb\u7ebf\u663e\u793a\u4e3a\u7ea2\u8272 filesize \u4e00\u6b3e\u5728\u5de6\u4e0b\u89d2\u663e\u793a\u6587\u4ef6\u5927\u5c0f\u7684\u63d2\u4ef6 Bracket Pair Colorizer \u62ec\u53f7\u989c\u8272 Anaconda Extension Pack \u81ea\u52a8\u8865\u5168anaconda\u5305\u4e2d\u7684\u5c5e\u6027\u540d\u79f0 Code Spell Checker \u62fc\u5199\u68c0\u67e5 GitLens \u6253\u5f00\u4ee3\u7801\u540e\uff0c\u5728\u4ee3\u7801\u5757\u4e0a\u4f1a\u663e\u793a \u6700\u540e\u4e00\u6b21\u7684commit\u4fe1\u606f\uff0c \u652f\u6301\u591a\u7a97\u53e3\u5bf9\u6bd4\u67e5\u770b\u672c\u5730\u4fee\u6539\u6216\u5386\u53f2\u4fee\u6539 Git History \u652f\u6301file \u6216\u8005\u7684line \u7684commit \u5386\u53f2\u4fe1\u606f\u67e5\u770b \u5728vs code \u7684power shell\u53ef\u4ee5\u4f7f\u7528git \u7684\u547d\u4ee4\u884c\u6267\u884c\u4efb\u52a1\u7684\u63d0\u4ea4\uff0c\u6216\u8005\u4e5f\u53ef\u627e\u627e\u652f\u6301\u56fe\u5f62\u5316\u64cd\u4f5c\u7684\u63d2\u4ef6\uff0c","title":"5.1 \u5b89\u88c5python\u7b49\u63d2\u4ef6"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#52","text":"\u6253\u5f00\u9879\u76ee\u6587\u4ef6\u6216\u8005\u7f16\u8f91\u5355\u4e2apython\u811a\u672c\u540e\uff0c\u6309F5\u5373\u53ef\u8fd0\u884c\u7a0b\u5e8f\uff0c\u5982\u9700debug ,\u76f4\u63a5\u5728\u4ee3\u7801\u91cc \u6253\u65ad\u70b9\u5c31\u884c\u3002 \u4e00\u822c\u5efa\u8bae\u5728\u9879\u76ee\u76ee\u5f55\u91cc\u8fdb\u884c\u8c03\u8bd5\u7684\u8bbe\u7f6e\uff0c\u914d\u7f6e\u6587\u4ef6\u5728VS Code\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684 /.vscode \u4e0b\uff0c\u6ca1\u6709\u627e\u5230\u4e5f\u6ca1\u5173\u7cfb\uff0c\u7b49\u4f1a\u914d\u7f6e\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa\u3002 launch.json \u6587\u4ef6\uff0c\u5b83\u7684\u4f4d\u7f6e\u4e00\u822c\u5728VS Code\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684 /.vscode/launch.json \u3002\u6ca1\u6709\u627e\u5230\u4e5f\u6ca1\u5173\u7cfb\uff0c\u7b49\u4f1a\u914d\u7f6e\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa\u3002 \u70b9\u51fbFile\uff0c\u6253\u5f00\u9879\u76ee\u76ee\u5f55\u6216\u5de5\u4f5c\u76ee\u5f55\u540e\uff0c\u6253\u5f00\u9879\u76ee\u5165\u53e3\u6587\u4ef6(\u5982publish-server.py)\uff0c\u6309F5\u8fdb\u884c\u8fd0\u884c\u8c03\u8bd5\u3002\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\uff0c\u9700\u8981\u70b9\u51fb\u5de6\u4fa7\u7684run\u56fe\u6807\u521b\u5efalaunch.json\u6587\u4ef6\u3002 \u5bf9\u4e8e\u9879\u76ee\uff0c\u9009\u62e9Module\u7c7b\u578b\uff0c\u7136\u540e\u8f93\u5165\u6a21\u5757\u540d\uff0c\u6a21\u5757\u540d\u4e0e\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684publish-server.py \u5165\u53e3\u6587\u4ef6\u540d\u4e00\u81f4\uff0c\u586b\u5165\u201dpublish-server\u201d\u3002 \u5b8c\u6210\u540e\uff0cvs code \u4f1a\u81ea\u52a8\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u7684 .vscode/launch.json \u6587\u4ef6\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e # launch.json { \"name\": \"Python: Module\", \"type\": \"python\", \"request\": \"launch\", \"module\": \"publish-server\" #\u8be5\u540d\u79f0\u4e00\u5b9a\u9700\u8981 \u8ddf\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684publish-server.py \u5165\u53e3\u6587\u4ef6\u4e00\u81f4 } settings.json \u6587\u4ef6\u7684\u4f5c\u7528\u662f\uff0c \u5f53\u5b58\u5728\u591a\u4e2apython \u7684\u8fd0\u884c\u73af\u5883\uff0cvs code \u4e0d\u77e5\u9053\u8981\u9009\u5b9a\u54ea\u4e2apython \u6765\u4f5c\u4e3a\u672c\u9879\u76ee\u7684python \u89e3\u91ca\u5668\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5728settings.json \u6587\u4ef6\u4e2d\u53bb\u6307\u5b9apython\u89e3\u91ca\u5668\u7684\u8def\u5f84\u3002 \u5207\u6362\u5230\u865a\u62df\u73af\u5883\u4e0b, \u4f7f\u7528\u201cwhich python\u201d\u547d\u4ee4\u83b7\u53d6\u865a\u62df\u73af\u5883\u7684python\u8def\u5f84\uff0c\u7136\u540e\u914d\u7f6e\u5230\u9879\u76ee\u76ee\u5f55\u4e0b\u7684 .vscode/settings.json \u3002 { \"python.pythonPath\": \"/mnt/d/dev/envs/publish/bin/python\", \"vsintellicode.modelDownloadPath\": \"\", \"python.jediEnabled\": false } \u6b64\u65f6\u518d\u6309F5\u65f6\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u7a0b\u5e8f\u3002 \u5230\u4ee5\u4e0a\u6b65\u9aa4\uff0c cmdb-server, watcher, dbms \u5df2\u7ecf\u53ef\u4ee5\u5728windows \u4e0b\u7684vs code \u4e0b\u6309\u7167\u5404\u4e2aserver \u7684REAME\u64cd\u4f5c\u8dd1\u8d77\u6765\u4e86\u3002 \u4e0b\u9762\u4ecb\u7ecd\u7684\u65b9\u6cd5\u4e3b\u8981\u662f\u9488\u5bf9 publish-server \u5bf9ansible \u6709\u4f9d\u8d56 \uff0c\u4f46 ansible \u5728windows\u8fd0\u884c\u65f6\u4e0d\u652f\u6301\uff0c\u9700\u8981\u9700\u8981\u6784\u5efalinux \u7684\u8fd0\u884c\u73af\u5883","title":"5.2 \u914d\u7f6e\u8fd0\u884c\u8c03\u8bd5"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#53-vs-code","text":"\u4f7f\u7528VScode\u7f16\u8f91 F1/Ctrl+Shit+P\u4e07\u80fd\u952e\uff0c\u8c01\u7528\u8c01\u77e5\u9053 Ctrl+P\uff1a\u6587\u4ef6\u5207\u6362 Ctrl+\u7a7a\u683c\uff1a\u81ea\u52a8\u63d0\u793a F12/Ctrl+\u5de6\u952e\uff1a\u8df3\u8f6c\u5230\u5b9a\u4e49 Shift+F12\uff1a\u9884\u89c8\u5b9a\u4e49 Ctrl+G\uff1a\u8df3\u8f6c\u884c\u53f7 Ctrl+/\uff1a\u6ce8\u91ca\u5207\u6362 Alt+\u2191\u2193\uff1a\u6574\u884c\u4e0a\u4e0b\u79fb\u52a8 Ctrl+\u2191\u2193\uff1a\u7f16\u8f91\u5668\u5782\u76f4\u6eda\u52a8\u6761\u4e0a\u4e0b\u79fb\u52a8\uff0c\u5149\u6807\u4e0d\u52a8 Ctrl+Backspace/Delete\uff1a\u6574\u8bcd/\u8fde\u7eed\u7a7a\u767d\u5220\u9664 Ctrl+\u2192\u2190\uff1a\u5149\u6807\u6574\u8bcd\u79fb\u52a8 Ctrl+F\u67e5\u627e/Ctrl+Shift+F\u5728\u6587\u4ef6\u4e2d\u67e5\u627e Alt+Shift+F\uff0cvscode\u5c31\u4f1a\u8c03\u7528autopep8\u81ea\u52a8\u683c\u5f0f\u5316\u4ee3\u7801 Ctrl+\u9f20\u6807\u5de6\u952e\u70b9\u51fd\u6570\u540d\u8df3\u8f6c\uff0c\u6216\u5728\u7c7b\u540d\u4e0a\u6309F12 \u53d8\u91cf\u4e0a\u6309F2\u53ef\u5b9e\u73b0\u91cd\u547d\u540d\u53d8\u91cf \u8c03\u8bd5\u4ee3\u7801: \u884c\u53f7\u5de6\u8fb9\u70b9\u51fb\u53ef\u8bbe\u7f6e\u65ad\u70b9 F5\uff1a\u8c03\u8bd5/\u7ee7\u7eed\uff0c F10\uff1a\u5355\u6b65\u8df3\u8fc7\uff0c F11\uff1a\u5355\u6b65\u8fdb\u5165\uff0c Shift+F11\uff1a\u8df3\u51fa\u3002 F9\uff1a\u5207\u6362\u65ad\u70b9 \u4f7f\u7528Jupyter: \u521b\u5efaNoterbook: \u200b Ctrl+Shift+P\u8f93\u5165\u201cpython:create\u201d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Notebook. \u89c6\u56fe: \u200b Ctrl+Shift+P\u8f93\u5165\u201cpython:switch\u201d \u547d\u4ee4\u6a21\u5f0f(\u84dd\u8272)\u548c\u7f16\u8f91\u6a21\u5f0f(\u7eff\u8272) \u200b \u5728\u547d\u4ee4\u6a21\u5f0f\u4e0b(\u5c0f\u5199): \u200b Ctrl + Enter\uff1a\u8fd0\u884c\u5f53\u524d\u5355\u5143\u683c\u3002 \u200b Shift + Enter\uff1a\u8fd0\u884c\u5f53\u524d\u5355\u5143\u683c\uff0c\u5e76\u8df3\u5230\u4e0b\u4e00\u5355\u5143\u683c\u3002 \u200b Alt + Enter\uff1a\u8fd0\u884c\u5f53\u524d\u5355\u5143\u683c\uff0c\u5e76\u5728\u4e0b\u65b9\u521b\u5efa\u4e00\u4e2a\u5355\u5143\u683c\u3002 \u200b Ctrl + M \u5207\u6362\u6210 MarkDown \u6a21\u5f0f \u200b Ctrl + Y \u5207\u6362\u6210\u4ee3\u7801\u6a21\u5f0f \u200b Enter\uff1a\u5207\u6362\u5230\u7f16\u8f91\u6a21\u5f0f\u3002 \u200b Esc\uff1a\u5207\u6362\u5230\u547d\u4ee4\u6a21\u5f0f\u3002 \u200b \u53cc\u51fbD\uff1a\u5220\u9664\u5f53\u524d\u5355\u5143\u683c\u3002 \u200b A\uff1a\u5728\u4e0a\u65b9\u521b\u5efa\u4e00\u4e2a\u5355\u5143\u683c\u3002 \u200b B\uff1a\u5728\u4e0b\u65b9\u521b\u5efa\u4e00\u4e2a\u5355\u5143\u683c\u3002 \u200b L\uff1a\u4e3a\u5f53\u524d\u5355\u5143\u683c\u6dfb\u52a0\u884c\u53f7\u3002 \u200b TAB\uff1a\u4ee3\u7801\u8865\u5168","title":"5.3 \u9644\u5f55: VS Code\u5e38\u7528\u70ed\u952e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#6","text":"","title":"6.\u914d\u7f6e\u524d\u7aef\u8fd0\u884c\u73af\u5883"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#61nodejs","text":"node.js \u662f\u4e2a\u57fa\u4e8e chrome v8 \u5f15\u64ce\u7684js \u8fd0\u884c\u65f6\u5de5\u5177\uff0c\u5728\u524d\u7aef\u5f00\u53d1\u65f6\uff0c\u53ef\u4ee5\u7528\u6765\u8c03\u8bd5\u4ee3\u7801\u3002 node.js \u7684\u5b89\u88c5\u5305\u4e2d\u4f1a\u5e26\u6709npm \u5de5\u5177\uff0cnpm \u662f\u4e2a\u7c7b\u4f3c\u4e8epython \u7684pip ,\u4e3b\u8981\u662f\u7528\u6765\u5b89\u88c5\u5305\u4f9d\u8d56\u7684\u3002 \u7531\u4e8e\u6211\u4eec\u5177\u6709\u591a\u9879\u76ee\uff0c\u800c\u5404\u9879\u76ee\u95f4\u5bf9node.js\u7684\u7248\u672c\u4e0d\u540c\uff0c\u56e0\u800c\u6709\u4e86\u4e2awindows \u4e0bnodejs \u7248\u672c\u7ba1\u7406\u5de5\u5177 nvm\u3002 windows \u4e0b node.js \u591a\u7248\u672c\u7ba1\u7406\u5de5\u5177nvm nvm \u4e0b\u8f7d\u5730\u5740 https://github.com/coreybutler/nvm-windows/releases \u5b89\u88c5nvm\u524d\u4e00\u5b9a\u8981\u628a\u539f\u6765\u7684 node.js \u5168\u90e8\u5378\u8f7d\uff0c\u5e76\u628a\u6587\u4ef6\u5939\u6e05\u7406\u5e72\u51c0 \u3002 \u5e38\u7528\u547d\u4ee4 \u8bbe\u7f6e\u56fd\u5185\u955c\u50cf nvm node_mirror https://npm.taobao.org/mirrors/node/ nvm npm_mirror https://npm.taobao.org/mirrors/npm/ \u67e5\u627e\u5e2e\u52a9 nvm help \u5b89\u88c5node nvm install <version> [32|64] nvm install 12.3.1 \u5217\u4e3e nvm list \u5207\u6362\u7248\u672c nvm use 12.3.1 \u5378\u8f7dnode nvm uninstall 12.3.1 \u5728\u8fd0\u884c cmdb-web \u9879\u76ee\u65f6\uff0c\u5207\u6362\u5230 8.8.0 32\u4f4d\u7684\u7248\u672c\uff1a PS F:\\yunex\\cmdb-web> nvm list * 12.16.0 (Currently using 64-bit executable) 8.8.0 PS F:\\yunex\\cmdb-web> nvm use 8.8.0 32 Now using node v8.8.0 (32-bit) \u5728\u8fd0\u884c publish-web /monitor-web \u9879\u76ee\u65f6\uff0c\u5207\u6362\u5230 12.16.0 64 \u4f4d\u7248\u672c PS F:\\yunex\\publish-web> nvm use 12.16.0 64 Now using node v12.16.0 (64-bit) \u7136\u540e\u6839\u636e\u5404\u4e2a\u9879\u76ee\u7684readme \u8fdb\u884c\u5305\u7684\u5b89\u88c5\uff0c\u542f\u52a8\u7b49\u3002","title":"6.1\u4e0b\u8f7dnode.js ,\u6309\u6b65\u9aa4\u8fdb\u884c\u5b89\u88c5"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#62vue-eslint","text":"\u65b9\u6cd5\u540c\u4e0a\u6587\uff0c \u70b9\u51fb\u4fa7\u8fb9\u680f\u7684\u201c\u65b9\u5f62\u79ef\u6728\u201d\uff0c\u641c\u7d20\u8f93\u5165 \u8fdb\u884c\u5b89\u88c5\u5373\u53ef\uff0c\u5bf9eslint ,Vetur \u8fdb\u884c\u5b89\u88c5 \u81f3\u6b64\u524d\u7aef\u7684\u8fd0\u884c\u73af\u5883\u914d\u7f6e\u5b8c\u6bd5 \u6839\u636e\u5404\u524d\u7aef\u7684readme.md \u8fdb\u884c\u5305\u7684\u5b89\u88c5\uff0c\u8fd0\u884cnpm run dev \u5373\u53ef\u8fd0\u884c\u8d77\u524d\u7aef\u9879\u76ee npm install npm run dev","title":"6.2\u5b89\u88c5vue /eslint \u63d2\u4ef6"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#7remote-wslwindows-10","text":"Remote WSL\u662f\u4e2a\u8fde\u63a5\u672c\u5730WSL \u7684\u63d2\u4ef6\uff0c\u4e8c\u8005\u540c\u51fa\u81ea \u5fae\u8f6f\uff0c\u6240\u4ee5\u4e8c\u8005\u7684\u65e0\u7f1d\u8fde\u63a5\u4f53\u9a8c\u8fd8\u662f\u6bd4\u8f83\u597d\u7684\u3002 \u652f\u6301\u5728windows \u73af\u5883\u4e0b\u8fd0\u884cvs code , windows vs code \u4e0b\u5f00\u53d1\uff0c\u4fee\u6539\u4ee3\u7801 \u53ef\u4ee5\u8c03\u7528ubuntu \u7684\u8fd0\u884c\u73af\u5883\u6765\u8fd0\u884c\u8c03\u8bd5\uff0c","title":"7.\u914d\u7f6eRemote WSL(Windows 10)"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#71-remote-wsl","text":"\u6253\u5f00 vs code ,\u70b9\u51fb\u4fa7\u8fb9\u680f\u7684\u201c\u65b9\u5f62\u79ef\u6728\u201d\uff08Extensions\uff09\uff0c\u641c\u7d22 Remote Development \u8fdb\u884c\u5b89\u88c5\u3002","title":"7.1 \u5b89\u88c5Remote WSL\u63d2\u4ef6"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#72-wsl","text":"\u4e0a\u9762\u5b89\u88c5\u597d\u540e\uff0c\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\u7eff\u8272\u56fe\u6807\u5207\u6362\u5230WSL\u3002 \u53ef\u4ee5\u770b\u5230\u5e95\u90e8\u7684\u53d8\u6210WSL \uff0c\u8bf4\u660e\u5df2\u7ecf\u662f\u5728WSL\u7684\u73af\u5883\u4e0b","title":"7.2 \u5207\u6362\u5230WSL\u73af\u5883"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#73-wsl","text":"\u5728 WSL:Ubuntu \u73af\u5883\u4e0b\uff0c\u90e8\u5206\u63d2\u4ef6\u9700\u8981\u8fd0\u884c\u5728Linux\u4e0b\uff0c\u5728\u754c\u9762\u4e0a\u70b9\u51fb\u5c06\u81ea\u52a8\u8fdb\u884c\u5b89\u88c5\uff0c\u5b89\u88c5\u5b8c\u6210\u9700\u8981reload\u4e00\u4e0bVS Code\u3002 WSL\u4e0b\u7684\u8c03\u8bd5\u914d\u7f6e\uff0c\u4e0eWindows\u4e0b\u76f8\u540c\uff0c\u8bf7\u89c15.2\u8282\u4e2d\u5173\u4e8elaunch.json\u548csettings.json\u7684\u914d\u7f6e\u3002 \u4e00\u822c\u6765\u8bf4 \u4f9d\u8d56\u4e8e linux \u7cfb\u7edf\u7684publish-server \u5728\u5b89\u88c5\u4e86\u4ee5\u4e0a\u7684WSL \u4e4b\u540e\uff0c\u8fd0\u884c\u5c31\u6ca1\u95ee\u9898\u4e86\u3002\u4f46\u5bf9\u4e8e\u4e0e\u73af\u5883\u4e25\u91cd\u4f9d\u8d56\u7684\u9879\u76ee\u6765\u8bf4\uff0cWSL\u96be\u4ee5\u5355\u72ec\u8fd0\u884c\u8d77\u6765\uff0c\u4f8b\u5982\u53d1\u5e03\u7cfb\u7edf\u7684\u4e1a\u52a1\u4e3b\u673a(\u5728\u6d4b\u8bd5\u73af\u5883)\u9700\u8981\u5230Publish Server(Windows)\u4e0b\u8f7d\u5305\u6587\u4ef6\uff0c\u5982\u679cWSL\u4e0e\u4e1a\u52a1\u4e3b\u673a\u4e0d\u5728\u540c\u4e00\u4e2a\u73af\u5883\uff0c\u8c03\u8bd5\u7a0b\u5e8f\u7684\u8fd0\u884c\u5c31\u76f8\u5f53\u56f0\u96be\u4e86\u3002\u5728\u672c\u5730Windows\u4e0a\u8c03\u8bd5\u8fdc\u7a0bLinux\u9879\u76ee\u5219\u9700\u8981\u4f7f\u7528\u53e6\u4e00\u4e2a\u529f\u80fd \u2013 Remote SSH\u3002","title":"7.3  WSL\u73af\u5883\u5b89\u88c5\u63d2\u4ef6"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#8-remote-ssh","text":"remote ssh \u662f\u4f55\u65b9\u795e\u5723\uff1f \u5b83\u5c31\u662f\u4e2a vs code \u7684\u4e00\u4e2a\u63d2\u4ef6(2019\u5e745\u6708\u63a8\u51fa)\uff0c\u5b89\u88c5\u65b9\u6cd5\u540c\u4e0a\uff0c\u5728 Remote Development \u63d2\u4ef6\u4e2d\u5df2\u5305\u542b\u3002 \u4e0eWSL\u4e0d\u540c\uff0cRemote SSH\u9700\u8981\u4e0e\u8fdc\u7a0b\u7684Linux\u5efa\u7acb\u514d\u5bc6\u767b\u5f55\u3002","title":"8. \u914d\u7f6eRemote SSH"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#81-windowsopenssl","text":"\u4e0b\u8f7dOpenSSL https://openssh.en.softonic.com/, \u4e0b\u8f7d\u5e76\u89e3\u538b\u5230\u672c\u5730\u76ee\u5f55\uff0c\u5e76\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u3002 \u6ce8\u610f\uff0c\u867d\u7136Windows\u81ea\u5e26SSL(\u5e94\u7528\u548c\u529f\u80fd -> \u53ef\u9009\u529f\u80fd -> Openssh\u5ba2\u6237\u7aef)\uff0c\u4f46\u65e7\u7248\u672c\u5728\u4f7f\u7528\u65f6\u4f1a\u6709\u95ee\u9898\u3002 \u751f\u6210\u5bc6\u94a5 ``` D:\\Tools\\OpenSSH-Win64\\ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa-remote-ssh ``` \u4fee\u6b63\u751f\u6210\u7684\u5bc6\u94a5\u6743\u9650 \u6253\u5f00\u76ee\u5f55C:\\Users\\admin1.ssh, \u53f3\u952eid_rsa-remote-ssh->\u5c5e\u6027->\u5b89\u5168->\u9ad8\u7ea7 \u66f4\u6539\u6240\u6709\u8005\u4e3a\u672c\u4eba \u53d6\u6d88\u7ee7\u627f\uff0c\u53ea\u4fdd\u7559\u672c\u4eba\uff0c\u5e76\u8bbe\u7f6e\u672c\u4eba\u6743\u9650\u4e3aFull\u3002 SSL\u767b\u5f55\u514d\u5bc6\u6d4b\u8bd5 \u628a~/.ssh/id_rsa-remote-ssh.pub\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u76ee\u6807\u673a\u5668\u7684~/.ssh/authorized_keys\u91cc \u5728\u672c\u5730powershell\u4e2d\u6d4b\u8bd5: ssh root@10.10.50.30 -i ~/.ssh/id_rsa-remote-ssh","title":"8.1 \u5728Windows\u4e0a\u5b89\u88c5OpenSSL"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#82-linux","text":"\u901a\u5e38\u662f\u8981\u6c42CentOS7\u6216\u4ee5\u4e0a\u3002 https://code.visualstudio.com/docs/remote/ssh \u5982\u679c\u662fcentos6\uff0c\u9700\u8981\u5347\u7ea7\u5305: https://code.visualstudio.com/docs/remote/linux#_updating-glibc-and-libstdc-on-rhel-centos-6","title":"8.2 \u8fdc\u7aefLinux\u673a\u5668\u8981\u6c42"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#83-vscoderemote-ssh","text":"\u53f3\u952eRemote-ssh\u63d2\u4ef6\uff0c\u8fdb\u5165\u6269\u5c55\u8bbe\u7f6e\uff0c\u5728\u201dRemote.SSH: Path\u201d\u4e2d\u6307\u5b9assh\u7684\u8def\u5f84\u3002\u201dD:\\Lawrence\\Tools\\OpenSSH-Win64\\ssh.exe\u201d \u786e\u4fddRemote.SSH:Show Login Terminal\u662f\u5df2\u52fe\u4e0a\u3002 VSCode\u4e0actrl+shift+p, \u5f00\u59cbremote\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u8fde\u63a5\u6210\u529f\u540e\u5b89\u88c5Python\u7b49\u63a7\u4ef6\u5230\u8fdc\u7a0b\u673a\u5668\u3002 VSCode\u5bf9\u8fdc\u7a0b\u673a\u5668\u7684\u5b9a\u4e49\u793a\u4f8b\u5982\u4e0b: Host 10.10.50.30 HostName 10.10.50.30 User root IdentityFile ~/.ssh/id_rsa-remote-ssh","title":"8.3 \u5728vscode\u91cc\u914d\u7f6e\u63d2\u4ef6Remote - SSH"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#jupyter","text":"","title":"Jupyter\u73af\u5883\u914d\u7f6e"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#jupyter_1","text":"\u4ee5\u7ba1\u7406\u5458\u6743\u9650\u6253\u5f00cmd pip install jupyter_contrib_nbextensions jupyter contrib nbextension install --user pip install jupyter_nbextensions_configurator","title":"\u5b89\u88c5Jupyter"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#jupyter_2","text":"C:\\Python36\\Scripts\\jupyter-notebook.exe \u5728\u6253\u5f00\u7684\u6d4f\u89c8\u5668\u754c\u9762\u4e0a\uff0c\u5efa\u8bae\u5728Nbextensions\u9875\u4e0a\u52fe\u9009\u4e0a\u6240\u9700\u7684\u529f\u80fd\uff1a \u25cb Table of Contents(2) \u76ee\u5f55\u529f\u80fd \u25cb Collapsible headings \u6298\u53e0\u6807\u9898 \u25cb Notify \u901a\u77e5\u673a\u5236\uff0c\u8dd1\u4e00\u4e9b\u8017\u65f6\u8f83\u4e45\u7684\u4efb\u52a1\uff0c\u5b8c\u6210\u540e\u901a\u77e5 \u25cb Codefolding \u6298\u53e0\u4ee3\u7801 \u25cb Zen mode extension \u9690\u85cf\u6d3b\u52a8\u72b6\u6001\u680f\uff0c\u65b9\u4fbf\u6ce8\u610f\u4ee3\u7801","title":"\u542f\u52a8Jupyter"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#jupyter_3","text":"# \u67e5\u770b\u914d\u7f6e ipython locate # \u5982\u679c\u6ca1\u6709 ~/.jupyter/jupyter_notebook_config.py \uff0c\u5219\u6267\u884c\u8fd9\u6761\u547d\u4ee4\uff0c\u4e4b\u540e\u5728\u6b64\u505a\u914d\u7f6e jupyter notebook --generate-config # \u7f16\u8f91\u914d\u7f6e vim ~/.jupyter/jupyter_notebook_config.py or C:\\Users\\Administrator\\.jupyter\\jupyter_notebook_config.py # \u914d\u7f6e\u5185\u5bb9 # The directory to use for notebooks.\u8fd9\u51b3\u5b9a\u4e86jupyter\u542f\u52a8\u76ee\u5f55 c.NotebookApp.notebook_dir = u'/path/to/your/notebooks' or c.NotebookApp.notebook_dir = u'D:\\\\PythonLearning' \u6ce8: \u90e8\u95e8\u516c\u7528\u5730\u5740\uff1ahttp://10.10.50.30:7080/tree\uff0c \u5bc6\u7801\uff1ayunnex","title":"\u914d\u7f6eJupyter"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#_5","text":"","title":"\u5e38\u89c1\u95ee\u9898\uff1a"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#1pipmarkupsafe10","text":"Using cached MarkupSafe-1.0.tar.gz (14 kB) ERROR: Command errored out with exit status 1: command: 'D:\\yunnex\\env\\publish-server\\Scripts\\python.exe' -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\yunnex\\\\AppData\\\\Local\\\\Temp\\\\pip-install-3wp8lp4x\\\\MarkupSafe\\\\setu p.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\yunnex\\\\AppData\\\\Local\\\\Temp\\\\pip-install-3wp8lp4x\\\\MarkupSafe\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"' \"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base 'C:\\Users\\yunnex\\AppData\\Local\\Temp\\pip-install-3wp8lp4x\\MarkupSafe\\pip-egg-info' cwd: C:\\Users\\yunnex\\AppData\\Local\\Temp\\pip-install-3wp8lp4x\\MarkupSafe\\ Complete output (5 lines): Traceback (most recent call last): File \"<string>\", line 1, in <module> File \"C:\\Users\\yunnex\\AppData\\Local\\Temp\\pip-install-3wp8lp4x\\MarkupSafe\\setup.py\", line 6, in <module> from setuptools import setup, Extension, Feature ImportError: cannot import name 'Feature' from 'setuptools' (D:\\yunnex\\env\\publish-server\\lib\\site-packages\\setuptools\\__init__.py) ---------------------------------------- ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output. \u89e3\u51b3\u65b9\u6cd5 \u8fd9\u4e2a\u95ee\u9898\u4e3b\u8981\u662f setuptool\u7248\u672c\u7684\u95ee\u9898\uff0cpython3.6\u7684setuptoll \u5df2\u7ecf\u5347\u7ea7\u523046 \u4ee5\u4e0a\uff0c\u9700\u8981\u505a\u964d\u7ea7\u523045\u5904\u7406 \u5347\u7ea7\u4e0bsetuptools\u7684\u7248\u672c\u5373\u53ef (py3) [root@500cf2fd4b0c opt]# pip -V pip 20.0.2 from /opt/py3/lib64/python3.6/site-packages/pip (python 3.6)(py3) [root@500cf2fd4b0c opt]# (py3-publish) root@DESKTOP-VAL3SFG:/mnt/f/yunex/publish-server# pip list|grep setuptools setuptools 46.1.3 \u628a\u811a\u672c\u4ece\u539f\u6765\u7684pip install --upgrade pip setuptools \u4fee\u6539\u4e3apip install --upgrade pip setuptools==45.2.0","title":"1.pip\u5b89\u88c5MarkupSafe==1.0 \u95ee\u9898"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#2pipmysqlclient1312","text":"\u89e3\u51b3\u529e\u6cd5\uff1a sudo apt-get install libmysqlclient-dev \u7136\u540e\u8fdb\u5165mysql_config\u7684\u8def\u5f84\uff08/usr/bin/mysql_config\uff09 sudo updatedb locate mysql_config","title":"2.pip\u5b89\u88c5mysqlclient==1.3.12"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#3-ubuntu-pipansible","text":"File \"/mnt/f/yunex/env/py3-publish/lib/python3.6/site-packages/pip/_vendor/urllib3/response.py\", line 430, in _error_catcher raise ReadTimeoutError(self._pool, None, \"Read timed out.\") pip._vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='files.pythonhosted.org', port=443): Read timed out. solution: pip3 install --default-timeout=1000 ansible==2.5.0","title":"3. ubuntu pip\u5b89\u88c5ansible"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#3-daemon-command-not-found","text":"\u5728wsl \u7684ubuntu \u4e0a\u4f7f\u7528 supervisord \u51fa\u73b0\u7684\u95ee\u9898 /# sh /data/sh/supervisord.sh start Starting supervisord: /data/sh/supervisord.sh: line 24: daemon: command not found cat /etc/rc.d/init.d/functions |grep daemon daemon() { '') echo $\"$0: Usage: daemon [+/-nicelevel] {program}\" \"[arg1]...\" *) echo $\"$0: Usage: daemon [+/-nicelevel] {program}\" \"[arg1]...\" \u200b # Echo daemon \u89e3\u51b3\u65b9\u6cd5 \uff1a \u8fd9\u4e2adeamon \u547d\u4ee4\u6765\u6e90\u4e8e /etc/rc.d/init.d/functions, \u8fd9\u4e2a\u811a\u672c\u662f centos\u7cfb\u7edf\u5b89\u88c5\u65f6 \u521d\u59cb\u5316\u7684\u4e00\u4e2a\u811a\u672c, wsl ubuntu \u6ca1\u6709\u6b64\u6587\u4ef6\u3002 \u5728\u5f00\u53d1\u73af\u5883\u4e0b \uff0c\u6ca1\u5fc5\u8981\u53bb\u8fd0\u884c supervisord \uff0c\u53ea\u9700\u5728\u6d4b\u8bd5\u73af\u5883\u8fdb\u884csepervisord \u7684\u914d\u7f6e\u9a8c\u8bc1\u5373\u53ef","title":"3. daemon: command not found"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#4celery-woker-duplicatenodenamewarning","text":"\u5728\u8fd0\u884c publish-server \u7684celery worker\u6a21\u5757\u65f6 \u62a5warning: [I 200415 11:22:32 mixins:224] Connected to redis://10.10.50.30:6379/2 /mnt/d/dev/envs/publish/lib/python3.6/site-packages/celery/app/control.py:45: DuplicateNodenameWarning: Received multiple replies from node name: celery@UGZB-Devops-test1-002. Please make sure you give each node a unique nodename using the celery worker `-n` option. pluralize(len(dupes), 'name'), ', '.join(sorted(dupes)), \u539f\u56e0\uff1a \u8fd9\u4e2a\u95ee\u9898\u4e3b\u8981\u662f\u56e0\u4e3a\uff0c\u5728 publish-server/conf/celery_config.py \u4e2d\u6307\u5411\u7684redis \u6570\u636e\u5e93\u6709\u591a\u4e2acelery worker\u5171\u7528. \u89e3\u51b3\u529e\u6cd5 \uff1a \u628a publish-server/conf/celery_config.py \u6307\u5411\u7684\u6570\u636e\u5e93\uff0c\u6307\u5411\u6ca1\u6709\u4eba\u5728\u7528\u7684\uff0c\u5982 redis \u9ed8\u8ba4\u662f\u521b\u5efa\u4e8616\u4e2a\u6570\u636e\u5e93\uff0c\u4e0b\u9762\u7684\u6570\u5b57\u4e0d\u8981\u5927\u4e8e16\u5373\u53ef\uff0c\u5982\u679c\u9700\u8981\u5927\u4e8e16\u9700\u8981\u6539redis.conf \u914d\u7f6e","title":"4.celery woker \u8fd0\u884c\u65f6\u62a5 DuplicateNodenameWarning"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#5windows-python2-python3pip","text":"\u95ee\u9898\uff1a PS F:\\yunex\\cmdb-web> pip3 Fatal error in launcher: Unable to create process using '\"d:\\program files\\python3.6\\python.exe\" \"D:\\Program Files\\python3.6\\Scripts\\pip3.exe\" ' \u89e3\u51b3\u65b9\u6cd5\uff1a \u4f7f\u7528\u4fee\u6539\u540d\u79f0\u540epython3 \u5347\u7ea7\u4ee5\u4e0bpip python3 -m pip install --upgrade pip \u4f46\u5982\u679cpip\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5148\u5378\u8f7d\u6389\u518d\u91cd\u65b0\u5b89\u88c5 python3 -m pip install --upgrade --force-reinstall pip","title":"5.windows python2 \u548cpython3\u5171\u5b58\u540e\uff0cpip \u65e0\u6cd5\u4f7f\u7528"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#6-npm-install","text":"\u5728cmdb-web \u8fdb\u884cnpm install \u7684\u65f6\u5019\u603b\u662f\u51fa\u9519\uff0c\u5982\u4e0b \u751f\u6210\u5931\u8d25\u3002 MSBUILD : error MSB4132: \u65e0\u6cd5\u8bc6\u522b\u5de5\u5177\u7248\u672c\u201c2.0\u201d\u3002\u53ef\u7528\u7684\u5de5\u5177\u7248\u672c\u4e3a \"4.0\"\u3002 0 \u4e2a\u8b66\u544a 1 \u4e2a\u9519\u8bef \u5df2\u7528\u65f6\u95f4 00:00:00.07 gyp ERR! build error gyp ERR! stack Error: `C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\msbuild.exe` failed with exit code: 1 gyp ERR! stack at ChildProcess.onExit (F:\\yunex\\cmdb-web\\node_modules\\node-gyp\\lib\\build.js:262:23) gyp ERR! stack at ChildProcess.emit (events.js:311:20) gyp ERR! stack at Process.ChildProcess._handle.onexit (internal/child_process.js:275:12) gyp info spawn C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\msbuild.exe gyp info spawn args [ gyp info spawn args 'build/binding.sln', gyp info spawn args '/nologo', gyp info spawn args '/p:Configuration=Release;Platform=x64' gyp info spawn args ] \u5728\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u4e00\u6b21\u751f\u6210\u4e00\u4e2a\u9879\u76ee\u3002\u82e5\u8981\u542f\u7528\u5e76\u884c\u751f\u6210\uff0c\u8bf7\u6dfb\u52a0\u201c/m\u201d\u5f00\u5173\u3002 \u751f\u6210\u542f\u52a8\u65f6\u95f4\u4e3a 2020/4/24 12:07:20\u3002 \u539f\u6765\u8fd9\u662f\u7531\u4e8enodejs \u7248\u672c\u7684\u95ee\u9898\uff0ccmdb-web\u9879\u76ee\u5927\u6982\u662f2017\u5e74\u521b\u5efa\u7684\uff0c\u5f53\u65f6\u4f7f\u7528\u76f8\u5173\u5e93\u7684\u7248\u672c\u662f\u6bd4\u8f83\u65e7\u7684\uff0c \u6211\u4eec\u91c7\u7528\u9ed8\u8ba4\u5b89\u88c5\u7684\u65b9\u5f0f\u5b89\u88c5\u7684nodejs \uff0c\u81ea\u7136\u5b89\u88c5\u7684\u662f12.X\u7248\u672c\u7684\uff0c\u628anodejs \u7684\u7248\u672c\u56de\u9000\u4e00\u4e0b\u5373\u53ef\uff0c\u56de\u9000\u52308.X \u7248\u672c\u3002","title":"6.\u524d\u7aef  npm  install\u51fa\u9519"},{"location":"1.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/#7mysqlclient1313","text":"\u51fa\u73b0\u7684\u95ee\u9898 building '_mysql' extension creating build\\temp.win-amd64-3.6 creating build\\temp.win-amd64-3.6\\Release C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX86\\x64\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -Dversion_info=(1,3,13,'final',0) -D__version__=1.3.13 \"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\" -IF:\\yunex\\dbms\\python36dbms\\include \"-Id:\\program files\\python3.6\\include\" \"-Id:\\program files\\python3.6\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\cppwinrt\" /Tc_mysql.c /Fobuild\\temp.win-amd64-3.6\\Release\\_mysql.obj /Zl _mysql.c _mysql.c(29): fatal error C1083: \u65e0\u6cd5\u6253\u5f00\u5305\u62ec\u6587\u4ef6: \u201cmysql.h\u201d: No such file or directory error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit status 2 ---------------------------------------- ERROR: Failed building wheel for mysqlclient Running setup.py clean for mysqlclient Failed to build mysqlclient Installing collected packages: mysqlclient Running setup.py install for mysqlclient ... error \u89e3\u51b3\u65b9\u6cd5\uff1a \u5728Windows\u4e2d\uff0c\u4f7f\u7528 python unofficial binaries \u5b89\u88c5MySQL\u3002\u4f7f\u7528\u6b64\u94fe\u63a5\u5e76\u4e0b\u8f7d\u60a8\u6240\u9700\u7684python\u8f6f\u4ef6\u5305\u3002 \u4f7f\u7528\u5b89\u88c5\u5b83\uff0c pip install ~/Downloads/mysqlclient\u20111.3.10\u2011cp36\u2011cp36m\u2011win_amd64.whl \u638c\u8d1d-\u9ec4\u6708\u73cd 20200415 \u21a9","title":"7.\u5b89\u88c5mysqlclient==1.3.13 \u5931\u8d25"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/","text":"\u638c\u8d1d\u8fd0\u7ef4\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u8bf4\u660e \u4e00\u4e9b\u7ea6\u5b9a \u5bf9\u4e8e\u6d4b\u8bd5\u73af\u5883\u8fd8\u6709\u751f\u4ea7\u73af\u5883\uff0c\u6211\u4eec\u6309\u4ee5\u4e0b\u7ea6\u5b9a\u7684\u76ee\u5f55\u53bb\u8fdb\u884c\u6587\u4ef6\u5b58\u653e \u5982\u65e0\u7279\u6b8a\uff0c\u6211\u4eec\u7684\u51e0\u5927\u7cfb\u7edf\uff0c\u90fd\u662f\u6309\u4ee5\u4e0b\u76ee\u5f55\u53bb\u5b58\u653e\u5bf9\u5e94\u7684\u6587\u4ef6 /data/logs/ \u9879\u76ee\u7684\u65e5\u5fd7\u6587\u4ef6\u90fd\u5728\u6b64\u76ee\u5f55 /data/conf \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u5728\u6b64\u5904 /data/svr \u9879\u76ee\u6e90\u7801\u5b58\u653e\u4f4d\u7f6e /data/sh \u9879\u76ee\u7684\u811a\u672c\u5b58\u653e\u4f4d\u7f6e \u524d\u8a00\uff1a \u8fd0\u7ef4\u5f00\u53d1\u4e3b\u8981\u6709\u4e09\u79cd\u8fd0\u884c\uff0c\u5f00\u53d1\u73af\u5883\uff0c\u6d4b\u8bd5\u73af\u5883\uff0c\u751f\u4ea7\u73af\u5883\uff0c\u90fd\u6709\u5bf9\u5e94\u7684\u6587\u6863\u8fdb\u884c\u4e86\u4ecb\u7ecd\uff0c\u4e0b\u9762\u4e3b\u8981\u662f\u8865\u5145\u4e00\u4e0b\u6d4b\u8bd5\u73af\u5883\u7684\u8d26\u53f7\u4fe1\u606f\u7b49\u5185\u5bb9 \u76ee\u524d\u7528\u4e8e\u8fd0\u7ef4\u5f00\u53d1\u7684\u6d4b\u8bd5\u4e3b\u673a\uff1a 10.10.50.30 root / pUaj3TBJm3sPhceb 10.10.50.30 \u662f\u8fd0\u7ef4\u5f00\u53d1\u7684\u4e3b\u8981\u6d4b\u8bd5\u4e3b\u673a\uff0c\u5305\u62eccmdb watcher publish \u4e09\u5927\u7cfb\u7edf\u7684\u6d4b\u8bd5\u73af\u5883\u90fd\u662f\u5728\u8fd9\u4e0a\u9762\u8fd0\u884c \u4e09\u5927\u7cfb\u7edf\u4f7f\u7528\u7684\u6d4b\u8bd5\u73af\u5883\u6570\u636e\u5e93\u90fd\u662f10.10.50.30 \u4e0a\u7684mysql \u5b9e\u4f8b\uff0c\u8d26\u53f7 remote_test /remote_passwd \uff0cmysql root \u8d26\u53f7\u572810.10.50.30\u4e3b\u673a\u4e0a\u53ef\u4ee5\u76f4\u8fde\uff0c\u6ca1\u8bbe\u7f6e\u5bc6\u7801\u3002 10.10.50.30 \u4e0a\u7684redis \u6ca1\u6709\u8bbe\u7f6e\u8d26\u53f7\u5bc6\u7801 \u7528\u4e8e\u53d1\u5e03\u7cfb\u7edfssh \u53d1\u7248\u6d4b\u8bd5\u4e3b\u673a\u6709\uff1a 10.10.51.41 / 10.10.51.42 / 10.10.51.43 / 10.10.51.44 \u5171\u56db\u53f0\uff0c\u6b64\u56db\u53f0\u4e3b\u673a\u4ece 10.10.50.30 \u5747\u53efssh \u76f4\u8fde\u8fc7\u53bb\uff0croot \u8d26\u53f7\u5bc6\u7801\u4e5f\u4e3a root / pUaj3TBJm3sPhceb cmdb \u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4fe1\u606f \u53c2\u89c1wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=16944384 \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740 http://10.10.50.30 cmdb api-docs \u76f8\u5173\u4fe1\u606f \uff1a http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=15761979 api \u6587\u6863\u8def\u5f84 http://10.10.50.30/api/docs/cmdb-api-doc/ cmdb-web \u94fe\u63a5\u540e\u7aefurl \u4fee\u6539\u5730\u65b9 config/dev.env.js publish \u6761\u4ef6 publish-server \u7684\u90e8\u7f72\u4e3b\u673a\u9700\u8981\u4e0e\u6d4b\u8bd5\u4e3b\u673a\uff08\u6211\u4eec\u76ee\u524d\u7528\u7684\u662f 10.10.51.41-44 \uff09\u4e4b\u95f4\u9700\u8981\u662f\u53ef\u4ee5\u4e92\u76f8\u8bbf\u95ee\u7684\uff0c\u9700\u540c\u65f6\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a \u90e8\u7f72\u4e3b\u673a\u7684product \u7528\u6237\u80fd\u591f\u76f4\u63a5ssh \u5230\u6d4b\u8bd5\u4e3b\u673a\u7684 product \u7528\u6237\u4e0b\uff08\u5373\u5efa\u7acbssh \u4e92\u4fe1\uff09 \u6d4b\u8bd5\u4e3b\u673a \u80fd\u591f\u901a\u8fc7 \u90e8\u7f72\u4e3b\u673a\u7684IP \u8fdb\u884c\u62c9\u5305\u7b49\u64cd\u4f5c \u5176\u4ed6 \u5728\u6d4b\u8bd5\u4e3b\u673a10.10.50.30 \u6d4b\u8bd5\u4e3b\u673a\u4e0a\uff0c\u5df2\u5efa\u597d\u7684 python\u865a\u62df\u73af\u5883\u662f /data/svr/python36publishEncoding/bin/python \u53ef\u76f4\u63a5\u4f7f\u7528\u6765\u8fd0\u884cpublish-server \u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4fe1\u606f\uff0c\u53c2\u89c1wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=21304910 \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740 http://10.10.50.30:8070 \u6d4b\u8bd5\u73af\u5883\u7684publish \u9700\u8981\u4f9d\u8d56\u4e8e\u6d4b\u8bd5\u73af\u5883\u7684cmdb\uff08 http://10.10.50.30/\uff09 \u5982\u679c\u9700\u8981\u5728\u6d4b\u8bd5\u73af\u5883\u4e0b\u53d1\u7248\uff0c\u9700\u8981\u5728\u6d4b\u8bd5cmdb \u4e0a\u628a\u5bf9\u5e94\u7684\u5e94\u7528\u7ed1\u5b9a\u5230\u56db\u53f0\u6d4b\u8bd5\u4e3b\u673a\uff0810.1051.41-44\uff09\u4e0a\uff0c\u5373\u53ef\u53d1\u7248\u3002 \u53d1\u5e03\u7cfb\u7edf\u5bf9\u4e0d\u7b26\u5408\u7248\u672c\u89c4\u8303\uff08\u5982\uff1a\u5f85\u53d1\u7248\u672c\u53f7\u4f4e\u4e8e\u56de\u6eda\u7248\u672c\u7b49\uff09\uff0c\u4e0d\u5f3a\u5236\u8981\u6c42\uff0c\u53ea\u5f39\u6846\u63d0\u9192\u53d1\u7248\u8005\u6ce8\u610f \u6d4b\u8bd5\u73af\u5883flower \u8bbf\u95ee\u5730\u5740\uff1a http://10.10.50.30:5555 flower \u662f celery \u8fd0\u884c tasks\u7684\u4e00\u4e2a\u76d1\u63a7\u5de5\u5177\uff0c\u4e00\u4e2a\u547d\u4ee4\u5373\u53ef\u8fd0\u884c\u8d77\u6765\uff0c\u65e0\u9700\u5d4c\u5165\u4ee3\u7801 \u8be6\u89c1https://flower-docs-cn.readthedocs.io/zh/latest/index.html \u751f\u4ea7\u7531\u4e8e\u4e00\u822c\u901a\u8fc7log \u5f62\u5f0f\u5373\u53ef\u5224\u65ad \u95ee\u9898\uff0c\u6240\u4ee5flower \u6ca1\u5b89\u88c5\u5728\u751f\u4ea7\u73af\u5883\uff0c\u4e3b\u8981\u5b89\u88c5\u5728\u6d4b\u8bd5\u73af\u5883\u505atasks \u8c03\u8bd5\u76d1\u63a7\u4f7f\u7528 dbms \u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4fe1\u606f \u53c2\u89c1wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121566 \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740 http://192.168.1.15/dbms/ watcher \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740\uff1a http://10.10.50.30:8080/ wathcer \u6d4b\u8bd5\u73af\u5883\u4e0b\u9700\u8981\u8fde\u63a5\u5230 \u6d4b\u8bd5zabbix api (10.10.50.159) zabbix-server \u7684\u90e8\u7f72\u4e0e\u8fd0\u884c\u53c2\u89c1 http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28611629#zabbix%E9%83%A8%E7%BD%B2%E4%B8%8E%E7%BB%B4%E6%8A%A4-3%E3%80%81%E9%83%A8%E7%BD%B2zabbix-server \u9700\u8981\u8fde\u63a5 \u6d4b\u8bd5zabbix mysql (10.10.50.159) username: devops password: yunnex host: 10.10.50.159 port: 3306 database: zabbix \u6d4b\u8bd5\u7528zabbix http://10.10.50.159:4000/ Admin/zabbix \u6d4b\u8bd5zabbix \u6240\u5728\u4e3b\u673a 10.10.50.159 root / pUaj3TBJm3sPhceb watcher \u524d\u7aef\u4f1a\u8c03\u7528\u7684\u4e00\u4e9bapi\u63a5\u53e3 // product cmdb_base_ = 'http://cmdb.ops.yunnex.com/api' monitor_base_ = 'http://watcher.ops.yunnex.com/api' zabbix_url_ = 'http://zabbix.ops.yunnex.com' grafana_url_ = 'http://grafana.ops.yunnex.com/graph' kibana_url_ = 'http://elk.ops.yunnex.com/app/kibana#' // testing cmdb_base_ = 'http://10.10.50.30/api' monitor_base_ = 'http://10.10.50.30:8080/api' zabbix_url_ = 'http://10.10.50.159:4000' grafana_url_ = 'http://grafana.ops.yunnex.com/graph' kibana_url_ = 'http://elk.ops.yunnex.com/app/kibana#' watcher web urls\u4fee\u6539\u4f4d\u7f6e\uff1a src/api/urls \u524d\u7aef \u4e00\u4e9b\u5e38\u89c1\u95ee\u9898 \u5b89\u88c5 node-sass \u62a5\u9519 \u51fa\u73b0\u7684\u95ee\u9898\uff1a `` npm ERR! node-sass@4.9.3 postinstall: node scripts/build.js` npm ERR! Exit status 1 npm ERR! npm ERR! Failed at the node-sass@4.9.3 postinstall script. npm ERR! This is probably not a problem with npm. There is likely additional logging output above. npm ERR! A complete log of this run can be found in: npm ERR! C:\\Users\\87217\\AppData\\Roaming\\npm-cache_logs\\2020-04-22T10_04_59_535Z-debug.log ``` \u89e3\u51b3\u65b9\u6cd5\uff1a \u89e3\u51b3\u65b9\u6cd5\uff1a 1\u3001\u5378\u8f7dnode-sass \u8fd0\u884c\uff1anpm uninstall node-sass 2\u3001\u91cd\u65b0\u5b89\u88c5\u6307\u5b9a\u7684node-sass\u7248\u672c(\u5b89\u88c5\u5931\u8d25\u7684\u7248\u672c) \u8fd0\u884c\uff1anpm install node-sass@4.9.3 3\u3001\u5982\u679c\u8fd8\u662f\u5b89\u88c5\u4e0d\u6210\u529f\u7684\u8bdd\uff0c\u6216\u8005\u5b89\u88c5\u592a\u6162\u8fde\u63a5\u4e0d\u4e0a\uff0c\u4f7f\u7528\u4e00\u4e0b\u6dd8\u5b9d\u955c\u50cf\u540e\u91cd\u590d1,2\u6b65\u9aa4\uff0c\u6210\u529f\u540e\u518dnpm install \u4f7f\u7528\u6dd8\u5b9d\u955c\u50cf\u8fd0\u884c\uff1anpm config set registry https://registry.npm.taobao.org \u4f9d\u8d56 \u5b89\u88c5\u6ca1\u6210\u529f\uff0c\u9700\u8981\u624b\u52a8\u5b89\u88c5 npm WARN ajv-keywords@3.2.0 requires a peer of ajv@^6.0.0 but none is installed. You must install peer dependencies yourself. npm WARN html-webpack-plugin@3.0.0 requires a peer of extract-text-webpack-plugin@^1.0.0 || ^2.0.0 || 3.0.0 || ^4.0.0-alpha.0 || ^4.0.0 but none is installed. You must install peer dependencies yourself. npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.12 (node_modules\\fsevents): npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.12: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"win32\",\"arch\":\"x64\"}) + html-webpack-plugin@3.0.0 added 6 packages from 5 contributors, removed 6 packages and updated 12 packages in 31.441s 18 packages are looking for funding run `npm fund` for details npm run dev \u62a5\u9519 Uncaught TypeError: Cannot assign to read only property 'exports' of object '#<Object>' at Module.eval (BaseClient.js?7d9a:12) at eval (BaseClient.js:42) at Module../node_modules/webpack-dev-server/client/clients/BaseClient.js (app.js:13726) at __webpack_require__ (app.js:833) at fn (app.js:130) at Module.eval (SockJSClient.js?0a33:26) at eval (SockJSClient.js:138) at Module../node_modules/webpack-dev-server/client/clients/SockJSClient.js (app.js:13738) at __webpack_require__ (app.js:833) at fn (app.js:130) localhost/:1 Unchecked runtime.lastError: The message port closed before a response was received. \u9700\u8981\u4f9d\u8d56 python2.7 ,\u62a5\u9519 gyp verb `which` succeeded python D:\\Program Files\\python3.6\\python.EXE gyp ERR! configure error gyp ERR! stack Error: Command failed: D:\\Program Files\\python3.6\\python.EXE -c import sys; print \"%s.%s.%s\" % sys.version_info[:3]; gyp ERR! stack File \"<string>\", line 1 gyp ERR! stack import sys; print \"%s.%s.%s\" % sys.version_info[:3]; gyp ERR! stack ^ gyp ERR! stack SyntaxError: invalid syntax gyp ERR! stack \u89e3\u51b3\u65b9\u6cd5\uff1a \u5b89\u88c5python2.7 \u5e76\u6dfb\u52a0\u5230\u73af\u5883\u53d8\u91cf\uff0c \u4f7f\u5f97\u547d\u4ee4python \u6307\u5411python2.7\u5373\u53ef","title":"\u6d4b\u8bd5\u73af\u5883"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_1","text":"","title":"\u638c\u8d1d\u8fd0\u7ef4\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u8bf4\u660e"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_2","text":"\u5bf9\u4e8e\u6d4b\u8bd5\u73af\u5883\u8fd8\u6709\u751f\u4ea7\u73af\u5883\uff0c\u6211\u4eec\u6309\u4ee5\u4e0b\u7ea6\u5b9a\u7684\u76ee\u5f55\u53bb\u8fdb\u884c\u6587\u4ef6\u5b58\u653e \u5982\u65e0\u7279\u6b8a\uff0c\u6211\u4eec\u7684\u51e0\u5927\u7cfb\u7edf\uff0c\u90fd\u662f\u6309\u4ee5\u4e0b\u76ee\u5f55\u53bb\u5b58\u653e\u5bf9\u5e94\u7684\u6587\u4ef6 /data/logs/ \u9879\u76ee\u7684\u65e5\u5fd7\u6587\u4ef6\u90fd\u5728\u6b64\u76ee\u5f55 /data/conf \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u5728\u6b64\u5904 /data/svr \u9879\u76ee\u6e90\u7801\u5b58\u653e\u4f4d\u7f6e /data/sh \u9879\u76ee\u7684\u811a\u672c\u5b58\u653e\u4f4d\u7f6e","title":"\u4e00\u4e9b\u7ea6\u5b9a"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_3","text":"\u8fd0\u7ef4\u5f00\u53d1\u4e3b\u8981\u6709\u4e09\u79cd\u8fd0\u884c\uff0c\u5f00\u53d1\u73af\u5883\uff0c\u6d4b\u8bd5\u73af\u5883\uff0c\u751f\u4ea7\u73af\u5883\uff0c\u90fd\u6709\u5bf9\u5e94\u7684\u6587\u6863\u8fdb\u884c\u4e86\u4ecb\u7ecd\uff0c\u4e0b\u9762\u4e3b\u8981\u662f\u8865\u5145\u4e00\u4e0b\u6d4b\u8bd5\u73af\u5883\u7684\u8d26\u53f7\u4fe1\u606f\u7b49\u5185\u5bb9 \u76ee\u524d\u7528\u4e8e\u8fd0\u7ef4\u5f00\u53d1\u7684\u6d4b\u8bd5\u4e3b\u673a\uff1a 10.10.50.30 root / pUaj3TBJm3sPhceb 10.10.50.30 \u662f\u8fd0\u7ef4\u5f00\u53d1\u7684\u4e3b\u8981\u6d4b\u8bd5\u4e3b\u673a\uff0c\u5305\u62eccmdb watcher publish \u4e09\u5927\u7cfb\u7edf\u7684\u6d4b\u8bd5\u73af\u5883\u90fd\u662f\u5728\u8fd9\u4e0a\u9762\u8fd0\u884c \u4e09\u5927\u7cfb\u7edf\u4f7f\u7528\u7684\u6d4b\u8bd5\u73af\u5883\u6570\u636e\u5e93\u90fd\u662f10.10.50.30 \u4e0a\u7684mysql \u5b9e\u4f8b\uff0c\u8d26\u53f7 remote_test /remote_passwd \uff0cmysql root \u8d26\u53f7\u572810.10.50.30\u4e3b\u673a\u4e0a\u53ef\u4ee5\u76f4\u8fde\uff0c\u6ca1\u8bbe\u7f6e\u5bc6\u7801\u3002 10.10.50.30 \u4e0a\u7684redis \u6ca1\u6709\u8bbe\u7f6e\u8d26\u53f7\u5bc6\u7801 \u7528\u4e8e\u53d1\u5e03\u7cfb\u7edfssh \u53d1\u7248\u6d4b\u8bd5\u4e3b\u673a\u6709\uff1a 10.10.51.41 / 10.10.51.42 / 10.10.51.43 / 10.10.51.44 \u5171\u56db\u53f0\uff0c\u6b64\u56db\u53f0\u4e3b\u673a\u4ece 10.10.50.30 \u5747\u53efssh \u76f4\u8fde\u8fc7\u53bb\uff0croot \u8d26\u53f7\u5bc6\u7801\u4e5f\u4e3a root / pUaj3TBJm3sPhceb","title":"\u524d\u8a00\uff1a"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#cmdb","text":"\u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4fe1\u606f \u53c2\u89c1wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=16944384 \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740 http://10.10.50.30 cmdb api-docs \u76f8\u5173\u4fe1\u606f \uff1a http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=15761979 api \u6587\u6863\u8def\u5f84 http://10.10.50.30/api/docs/cmdb-api-doc/ cmdb-web \u94fe\u63a5\u540e\u7aefurl \u4fee\u6539\u5730\u65b9 config/dev.env.js","title":"cmdb"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#publish","text":"","title":"publish"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_4","text":"publish-server \u7684\u90e8\u7f72\u4e3b\u673a\u9700\u8981\u4e0e\u6d4b\u8bd5\u4e3b\u673a\uff08\u6211\u4eec\u76ee\u524d\u7528\u7684\u662f 10.10.51.41-44 \uff09\u4e4b\u95f4\u9700\u8981\u662f\u53ef\u4ee5\u4e92\u76f8\u8bbf\u95ee\u7684\uff0c\u9700\u540c\u65f6\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a \u90e8\u7f72\u4e3b\u673a\u7684product \u7528\u6237\u80fd\u591f\u76f4\u63a5ssh \u5230\u6d4b\u8bd5\u4e3b\u673a\u7684 product \u7528\u6237\u4e0b\uff08\u5373\u5efa\u7acbssh \u4e92\u4fe1\uff09 \u6d4b\u8bd5\u4e3b\u673a \u80fd\u591f\u901a\u8fc7 \u90e8\u7f72\u4e3b\u673a\u7684IP \u8fdb\u884c\u62c9\u5305\u7b49\u64cd\u4f5c","title":"\u6761\u4ef6"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_5","text":"\u5728\u6d4b\u8bd5\u4e3b\u673a10.10.50.30 \u6d4b\u8bd5\u4e3b\u673a\u4e0a\uff0c\u5df2\u5efa\u597d\u7684 python\u865a\u62df\u73af\u5883\u662f /data/svr/python36publishEncoding/bin/python \u53ef\u76f4\u63a5\u4f7f\u7528\u6765\u8fd0\u884cpublish-server \u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4fe1\u606f\uff0c\u53c2\u89c1wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=21304910 \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740 http://10.10.50.30:8070 \u6d4b\u8bd5\u73af\u5883\u7684publish \u9700\u8981\u4f9d\u8d56\u4e8e\u6d4b\u8bd5\u73af\u5883\u7684cmdb\uff08 http://10.10.50.30/\uff09 \u5982\u679c\u9700\u8981\u5728\u6d4b\u8bd5\u73af\u5883\u4e0b\u53d1\u7248\uff0c\u9700\u8981\u5728\u6d4b\u8bd5cmdb \u4e0a\u628a\u5bf9\u5e94\u7684\u5e94\u7528\u7ed1\u5b9a\u5230\u56db\u53f0\u6d4b\u8bd5\u4e3b\u673a\uff0810.1051.41-44\uff09\u4e0a\uff0c\u5373\u53ef\u53d1\u7248\u3002 \u53d1\u5e03\u7cfb\u7edf\u5bf9\u4e0d\u7b26\u5408\u7248\u672c\u89c4\u8303\uff08\u5982\uff1a\u5f85\u53d1\u7248\u672c\u53f7\u4f4e\u4e8e\u56de\u6eda\u7248\u672c\u7b49\uff09\uff0c\u4e0d\u5f3a\u5236\u8981\u6c42\uff0c\u53ea\u5f39\u6846\u63d0\u9192\u53d1\u7248\u8005\u6ce8\u610f \u6d4b\u8bd5\u73af\u5883flower \u8bbf\u95ee\u5730\u5740\uff1a http://10.10.50.30:5555 flower \u662f celery \u8fd0\u884c tasks\u7684\u4e00\u4e2a\u76d1\u63a7\u5de5\u5177\uff0c\u4e00\u4e2a\u547d\u4ee4\u5373\u53ef\u8fd0\u884c\u8d77\u6765\uff0c\u65e0\u9700\u5d4c\u5165\u4ee3\u7801 \u8be6\u89c1https://flower-docs-cn.readthedocs.io/zh/latest/index.html \u751f\u4ea7\u7531\u4e8e\u4e00\u822c\u901a\u8fc7log \u5f62\u5f0f\u5373\u53ef\u5224\u65ad \u95ee\u9898\uff0c\u6240\u4ee5flower \u6ca1\u5b89\u88c5\u5728\u751f\u4ea7\u73af\u5883\uff0c\u4e3b\u8981\u5b89\u88c5\u5728\u6d4b\u8bd5\u73af\u5883\u505atasks \u8c03\u8bd5\u76d1\u63a7\u4f7f\u7528","title":"\u5176\u4ed6"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#dbms","text":"\u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4fe1\u606f \u53c2\u89c1wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121566 \u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740 http://192.168.1.15/dbms/","title":"dbms"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#watcher","text":"\u6d4b\u8bd5\u73af\u5883\u8bbf\u95ee\u5730\u5740\uff1a http://10.10.50.30:8080/ wathcer \u6d4b\u8bd5\u73af\u5883\u4e0b\u9700\u8981\u8fde\u63a5\u5230 \u6d4b\u8bd5zabbix api (10.10.50.159) zabbix-server \u7684\u90e8\u7f72\u4e0e\u8fd0\u884c\u53c2\u89c1 http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28611629#zabbix%E9%83%A8%E7%BD%B2%E4%B8%8E%E7%BB%B4%E6%8A%A4-3%E3%80%81%E9%83%A8%E7%BD%B2zabbix-server \u9700\u8981\u8fde\u63a5 \u6d4b\u8bd5zabbix mysql (10.10.50.159) username: devops password: yunnex host: 10.10.50.159 port: 3306 database: zabbix \u6d4b\u8bd5\u7528zabbix http://10.10.50.159:4000/ Admin/zabbix \u6d4b\u8bd5zabbix \u6240\u5728\u4e3b\u673a 10.10.50.159 root / pUaj3TBJm3sPhceb watcher \u524d\u7aef\u4f1a\u8c03\u7528\u7684\u4e00\u4e9bapi\u63a5\u53e3 // product cmdb_base_ = 'http://cmdb.ops.yunnex.com/api' monitor_base_ = 'http://watcher.ops.yunnex.com/api' zabbix_url_ = 'http://zabbix.ops.yunnex.com' grafana_url_ = 'http://grafana.ops.yunnex.com/graph' kibana_url_ = 'http://elk.ops.yunnex.com/app/kibana#' // testing cmdb_base_ = 'http://10.10.50.30/api' monitor_base_ = 'http://10.10.50.30:8080/api' zabbix_url_ = 'http://10.10.50.159:4000' grafana_url_ = 'http://grafana.ops.yunnex.com/graph' kibana_url_ = 'http://elk.ops.yunnex.com/app/kibana#' watcher web urls\u4fee\u6539\u4f4d\u7f6e\uff1a src/api/urls","title":"watcher"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_6","text":"","title":"\u524d\u7aef"},{"location":"2.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/#_7","text":"\u5b89\u88c5 node-sass \u62a5\u9519 \u51fa\u73b0\u7684\u95ee\u9898\uff1a `` npm ERR! node-sass@4.9.3 postinstall: node scripts/build.js` npm ERR! Exit status 1 npm ERR! npm ERR! Failed at the node-sass@4.9.3 postinstall script. npm ERR! This is probably not a problem with npm. There is likely additional logging output above. npm ERR! A complete log of this run can be found in: npm ERR! C:\\Users\\87217\\AppData\\Roaming\\npm-cache_logs\\2020-04-22T10_04_59_535Z-debug.log ``` \u89e3\u51b3\u65b9\u6cd5\uff1a \u89e3\u51b3\u65b9\u6cd5\uff1a 1\u3001\u5378\u8f7dnode-sass \u8fd0\u884c\uff1anpm uninstall node-sass 2\u3001\u91cd\u65b0\u5b89\u88c5\u6307\u5b9a\u7684node-sass\u7248\u672c(\u5b89\u88c5\u5931\u8d25\u7684\u7248\u672c) \u8fd0\u884c\uff1anpm install node-sass@4.9.3 3\u3001\u5982\u679c\u8fd8\u662f\u5b89\u88c5\u4e0d\u6210\u529f\u7684\u8bdd\uff0c\u6216\u8005\u5b89\u88c5\u592a\u6162\u8fde\u63a5\u4e0d\u4e0a\uff0c\u4f7f\u7528\u4e00\u4e0b\u6dd8\u5b9d\u955c\u50cf\u540e\u91cd\u590d1,2\u6b65\u9aa4\uff0c\u6210\u529f\u540e\u518dnpm install \u4f7f\u7528\u6dd8\u5b9d\u955c\u50cf\u8fd0\u884c\uff1anpm config set registry https://registry.npm.taobao.org \u4f9d\u8d56 \u5b89\u88c5\u6ca1\u6210\u529f\uff0c\u9700\u8981\u624b\u52a8\u5b89\u88c5 npm WARN ajv-keywords@3.2.0 requires a peer of ajv@^6.0.0 but none is installed. You must install peer dependencies yourself. npm WARN html-webpack-plugin@3.0.0 requires a peer of extract-text-webpack-plugin@^1.0.0 || ^2.0.0 || 3.0.0 || ^4.0.0-alpha.0 || ^4.0.0 but none is installed. You must install peer dependencies yourself. npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.12 (node_modules\\fsevents): npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.12: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"win32\",\"arch\":\"x64\"}) + html-webpack-plugin@3.0.0 added 6 packages from 5 contributors, removed 6 packages and updated 12 packages in 31.441s 18 packages are looking for funding run `npm fund` for details npm run dev \u62a5\u9519 Uncaught TypeError: Cannot assign to read only property 'exports' of object '#<Object>' at Module.eval (BaseClient.js?7d9a:12) at eval (BaseClient.js:42) at Module../node_modules/webpack-dev-server/client/clients/BaseClient.js (app.js:13726) at __webpack_require__ (app.js:833) at fn (app.js:130) at Module.eval (SockJSClient.js?0a33:26) at eval (SockJSClient.js:138) at Module../node_modules/webpack-dev-server/client/clients/SockJSClient.js (app.js:13738) at __webpack_require__ (app.js:833) at fn (app.js:130) localhost/:1 Unchecked runtime.lastError: The message port closed before a response was received. \u9700\u8981\u4f9d\u8d56 python2.7 ,\u62a5\u9519 gyp verb `which` succeeded python D:\\Program Files\\python3.6\\python.EXE gyp ERR! configure error gyp ERR! stack Error: Command failed: D:\\Program Files\\python3.6\\python.EXE -c import sys; print \"%s.%s.%s\" % sys.version_info[:3]; gyp ERR! stack File \"<string>\", line 1 gyp ERR! stack import sys; print \"%s.%s.%s\" % sys.version_info[:3]; gyp ERR! stack ^ gyp ERR! stack SyntaxError: invalid syntax gyp ERR! stack \u89e3\u51b3\u65b9\u6cd5\uff1a \u5b89\u88c5python2.7 \u5e76\u6dfb\u52a0\u5230\u73af\u5883\u53d8\u91cf\uff0c \u4f7f\u5f97\u547d\u4ee4python \u6307\u5411python2.7\u5373\u53ef","title":"\u4e00\u4e9b\u5e38\u89c1\u95ee\u9898"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/","text":"CMDB\u529f\u80fd\u8bbe\u8ba1\u4ecb\u7ecd 1.\u67b6\u6784 cmdb \u76f8\u5bf9\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u4e00\u4e2a\u67b6\u6784\uff0c\u57fa\u672c\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8d44\u4ea7\u7ba1\u7406\u7cfb\u7edf\uff0c\u57fa\u672c\u5c31\u662f\u8d44\u6e90\u7684CRUD\u7684\u57fa\u672c\u64cd\u4f5c\u3002\u6240\u4ee5\u5728\u67b6\u6784\u4e0a\uff0c\u5c31\u662f\u4e00\u4e2amysql ,\u4e00\u4e2a server ,\u4e00\u4e2aweb \u3002 \u4e24\u4fa7\u7684 cmdb-agent ,shell \u5b9a\u65f6\u811a\u672c \u4e3b\u8981\u662f \u4fe1\u606f\u7684\u6765\u6e90\uff0c\u8fdb\u884c\u4e00\u4e9b\u8d44\u6e90\u4fe1\u606f\u7684\u521b\u5efa \u548c\u66f4\u65b0\u64cd\u4f5c\u3002 2.CMDB \u7684\u4fe1\u606f\u6765\u6e90 cmdb \u7684\u4fe1\u606f\u4e3b\u8981\u6709\u4e09\u5927\u6765\u6e90 ucloud api \u5b9a\u65f6\u811a\u672c cmdb-agent \u5b9a\u65f6\u66f4\u65b0 cmdb \u624b\u52a8\u65b0\u589e\u7ef4\u62a4 2.1cmdb ucloud \u5b9a\u65f6\u540c\u6b65\u811a\u672c \u6bcf\u59298\uff1a30 cmdb \u540c\u6b65\u4fe1\u606f\u7684\u4ee3\u7801 \u5730\u5740\uff1a http://git.dev.yunnex.com/ops/opstool/tree/master/cmdb-crontab \u5728UGZB-CMDB-001 \u4e3b\u673a\u4e0a\u7684crontab \u8bbe\u7f6e product@UGZB-CMDB-001 ~]$ sudo crontab -l 30 8 * * * /data/svr/python-env/bin/python /root/cron/cmdb-crontab/main.py ucloud\u7684uhost\uff0cphost\uff0cudb\uff0ceip\uff0culb\u7b49\u4fe1\u606f\uff0c\u6bcf\u5929\u65e9\u4e0a8\u70b930\uff0c\u5b9a\u65f6\u4efb\u52a1\u81ea\u52a8\u540c\u6b65\u5230cmdb\u3002 \u5b9a\u65f6\u4efb\u52a1\u540c\u6b65\u7684\u65f6\u5019\uff0c \u53ea\u65b0\u589e\uff0c\u4e0d\u5220\u9664 \u5220\u9664\u9700\u8981\u6839\u636e\u6bcf\u5929\u65e9\u4e0a8:30 cdmb\u7684scan \u90ae\u4ef6\u8fdb\u884c\u624b\u52a8\u5220\u9664 2.1.1 cmdb ucloud \u5b9a\u65f6\u540c\u6b65\u811a\u672c\u66f4\u65b0\u7684\u5185\u5bb9 \u4e91\u4e3b\u673a\uff1a \u5f53\u4e91\u4e3b\u673a\u5728cmdb \u4e0a\u6ca1\u5b58\u5728\u8bb0\u5f55\u65f6\uff0c\u65b0\u589e\u6240\u6709\u5c5e\u6027\uff1ahostname /\u5185\u5b58\u5927\u5c0f/ip/cpu \u4fe1\u606f\u7b49 \u5f53\u4e91\u4e3b\u673a\u5df2\u5b58\u5728\u65f6\uff0c \u5f53\u78c1\u76d8\u5927\u5c0f\u6709\u53d8\u5316\u65f6\uff0c\u53ea\u66f4\u65b0\u78c1\u76d8\u5c5e\u6027\uff0c\u5176\u4ed6\u5c5e\u6027\u4e0d\u66f4\u65b0. ucloud \u7269\u7406\u4e3b\u673a \u66f4\u65b0\u4fe1\u606f\u548c\u65b0\u589e\u4fe1\u606f\u4e00\u81f4\uff1a \u5185\u5b58\u5927\u5c0f/\u78c1\u76d8\u5927\u5c0f/cpu \u6838\u6570/SN UDB udb \u7531\u4e8e\u65e0\u6cd5\u5b89\u88c5 cmdb-agent ,\u6240\u4ee5udb\u7684\u4fe1\u606f\u6765\u6e90\u4e3b\u8981\u662fucloud api\u7684\u66f4\u65b0 \u6216\u8005\u624b\u52a8\u65b0\u589e\u4fee\u6539 \u66f4\u65b0\u6216\u65b0\u589e\u7684\u5c5e\u6027\u6709\uff1a IP / \u662f\u5426\u4e3b\u5e93/\u6570\u636e\u5e93\u7c7b\u578b/\u4ece\u5e93\u4fe1\u606f/\u5185\u5b58/\u78c1\u76d8\u5927\u5c0f/SSD\u673a\u578b\u4fe1\u606f ULB \u540cudb \u4e00\u6837\uff0culb\u6ca1\u6709cmdb-agent ,\u66f4\u65b0\u7684\u4fe1\u606f\u6765\u6e90\u4e5f\u53ea\u6709 ucloud api \u6216\u8005\u624b\u52a8\u65b0\u589e\u4fee\u6539 \u66f4\u65b0\u6216\u65b0\u589e\u7684\u5c5e\u6027\u6709\uff1a IP /backend(\u8fde\u63a5\u7684\u662f application or database) EIP eip \u7684\u4fe1\u606f\u6765\u6e90\u4e5f\u53ea\u6709ucloud api \u6216\u8005\u624b\u52a8\u65b0\u589e\u4fee\u6539 \u66f4\u65b0\u6216\u65b0\u589e\u7684\u5c5e\u6027\u6709\uff1a ip address /\u7ed1\u5b9a\u7684\u8d44\u6e90\uff08table_tag ,table_id\uff09 2.2 CMDB-agent cmdb-agent \u662f\u4e00\u4e2a\u91c7\u7528python \u8bed\u8a00\u5199\u7684\u7a0b\u5e8f\uff0c\u901a\u8fc7cmdb-server\u7684api\u4e0e cmdb-server \u4ea4\u4e92\u6570\u636e\uff0c\u4e3b\u8981\u662f\u91c7\u7528python\u7684requests \u5305\u6765\u8fdb\u884c\u7f51\u7edc\u901a\u4fe1\u3002 \u5728\u4e1a\u52a1\u4e3b\u673a\u521d\u59cb\u5316\u65f6\uff0c\u90fd\u4f1a\u628acmdb-agent \u4f5c\u4e3a\u5fc5\u5b89\u88c5\u9009\u9879\uff0c\u5728\u4e3b\u673a\u521d\u59cb\u5316\u65f6\u8fdb\u884c\u5b89\u88c5\u3002 cmdb-agent \u6bcf\u5c0f\u65f6\u4f1a\u81ea\u52a8\u4e0a\u62a5\u4e00\u6b21\u3002 \u90a3\u5982\u679ccmdb-agent \u6302\u4e86\u5462 \uff1f\u4e0d\u5fc5\u62c5\u5fc3\uff0c\u5728\u521d\u59cb\u5316\u4e3b\u673a\u65f6\uff0c\u6211\u4eec\u4e5f\u628acmdb-agent \u7684\u5b58\u6d3b\u4e0e\u5426\u6dfb\u52a0\u5230\u4e86zabbix \u7684\u76d1\u63a7\u91cc\u9762\uff0c\u4e00\u65e6\u4e1a\u52a1\u4e3b\u673a\u7684cmdb-agent \u6302\u4e86\uff0czabbix \u4f1a\u53d1\u51fa\u90ae\u4ef6\u544a\u8b66\uff0c\u53ca\u65f6\u6267\u884c\u76f8\u5e94\u7684\u5904\u7406\u5373\u53ef\u3002 2.2.1 \u90a3\u4e48cmdb-agent \u4e3b\u8981\u662f\u66f4\u65b0\u4e86\u54ea\u4e9b\u4fe1\u606f\u5462\uff1f 2.2.1.1 cmdb-agent \u4f1a\u65b0\u589e\u6216\u66f4\u65b0\u7684\u5185\u5bb9 cmdb-agent \u5728\u65b0\u589e\u6216\u66f4\u65b0\u5185\u5bb9\u524d\u4f1a\u5224\u65ad\u4e00\u4e0b\u9700\u4e0d\u9700\u8981\u65b0\u589e\u6216\u4fee\u6539\uff0c\u6bd4\u5982\u65b0\u589e\u4e3b\u673a\u65f6\uff0c\u91c7\u7528hostname\u4e3a\u4f9d\u636e\uff0c\u5411cmdb-server\u8fdb\u884c\u67e5\u8be2\u8be5\u4e3b\u673a\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u76f4\u63a5\u65b0\u589e\uff0c\u5982\u679c\u5b58\u5728\uff0c\u90a3\u4e48\u5224\u65ad\u4e00\u4e0b\u5c5e\u6027\u6709\u6ca1\u53d8\u5316\uff08\u5f53\u4e3b\u673a\u5b58\u5728cmdb-server\u65f6\uff0c\u4f1a\u83b7\u5f97cmdb-server\u4e2d\u4e3b\u673a\u7684\u5c5e\u6027\u4fe1\u606f\uff0c\u4ece\u800c\u4e0e\u672c\u5730\u83b7\u53d6\u7684\u4fe1\u606f\u8fdb\u884c\u5bf9\u6bd4\uff09\uff0c\u6709\u53d8\u5316\u518d\u8c03\u7528\u66f4\u65b0\u63a5\u53e3\u3002 \u5f53cmdb-server\u6570\u636e\u5e93\u4e2d\u8bb0\u5f55\u4e0d\u5b58\u5728\uff08\u65b0\u589e\uff09\u6216\u5c5e\u6027\u4fe1\u606f\u6709\u53d8\u66f4\uff08\u66f4\u65b0\uff09\u65f6\uff0ccmdb-agent \u4f1a\u65b0\u589e\u6216\u66f4\u65b0\u4e00\u4e0b\u5185\u5bb9\uff1a \u4e3b\u673a\u4fe1\u606f\uff08hostname /cpu /\u5185\u5b58\u5927\u5c0f\uff09 \u7269\u7406\u4e3b\u673a\uff08server info /sn\uff09 IP (ip\u7c7b\u578b/ip \u5730\u5740) \u4e3b\u673a\u7c7b\u578b \uff08\u5bf9\u5e94\u8868 host_type\uff09 \u4e3b\u673a\u548c\u5e94\u7528\u7684\u7ed1\u5b9a\u5173\u7cfb (\u5bf9\u5e94\u8868 cmdb_host_application) \u8be5\u4e3b\u673a\u4e0a\u5e94\u7528\u7684\u7248\u672c\u4fe1\u606f(\u5bf9\u5e94\u8868 cmdb_host_application) \u4e3b\u673a\u7684\u65b0\u589e\u6216\u66f4\u65b0\u4f9d\u636e\uff0c\u4e3b\u8981\u662f\u4f9d\u636ehostname \u53bb\u8ddfcmdb-server \u4ea4\u4e92\u5224\u522b\u7684\u3002 2.2.1.2 cmdb-agent \u4e0d\u4f1a \u65b0\u589e\u6216\u4fee\u6539\u7684\u5185\u5bb9 \u4ee5\u4e0b\u5185\u5bb9\u662fcmdb-agent \u4e0d\u4f1a \u53bb\u7ef4\u62a4\u7684\uff08\u65b0\u589e\u6216\u4fee\u6539\uff09,\u9700\u8981\u5728cmdb \u4e0a\u624b\u52a8\u7ef4\u62a4 \u5e94\u7528 \u6570\u636e\u5e93 \u5e94\u7528\u4e0e\u6570\u636e\u5e93\u7684\u7ed1\u5b9a\u4fe1\u606f \u5e94\u7528\u4fe1\u606f\u4e3a\u4ec0\u4e48\u6ca1\u6709\u53bb\u4e3b\u52a8\u65b0\u589e\u6216\u8005\u4fee\u6539\u5462\uff1f\u4e3b\u8981\u662f \u4e24\u4e2a\u539f\u56e0\uff1a \u5e94\u7528\u4fe1\u606f\u7684\u53d1\u73b0\uff0c\u6211\u4eec\u662f\u901a\u8fc7 \u6307\u5b9a\u76ee\u5f55\u6765\u53d1\u73b0\uff0c\u5f53\u76ee\u5f55\u4e0b\u51fa\u73b0\u4e00\u4e9b\u975e\u5e94\u7528\u6587\u4ef6\u65f6\uff0c\u4e5f\u4f1a\u88ab\u5f53\u4f5c\u5e94\u7528\u6765\u4e0a\u62a5\uff0c\u5bfc\u81f4\u8bef\u62a5\uff1b \u5f53\u65b0\u589e\u4e00\u4e2a\u5e94\u7528\u65f6\uff0c\u6709\u4e86\u53d1\u5e03\u7cfb\u7edf\u540e\uff0c\u6211\u4eec\u90fd\u662f\u901a\u8fc7\u53d1\u5e03\u7cfb\u7edf\u8fdb\u884c\u53d1\u7248\uff0c\u90a3\u4e48\u8fd8\u6ca1\u53d1\u7248\uff0c\u81ea\u7136\u6307\u5b9a\u76ee\u5f55\u5c31\u6ca1\u76f8\u5173\u7684\u5e94\u7528\uff0c\u81ea\u7136\u4e5f\u5c31\u6ca1\u6cd5\u81ea\u52a8\u65b0\u589e \u6570\u636e\u5e93\u5219\u662f\u5f53\u524d\u6211\u4eec\u6ca1\u6709\u7b80\u5355\u7684\u83b7\u53d6\u5230\u6570\u636e\u5e93\u4fe1\u606f\u7684\u65b9\u6cd5\uff0c\u81ea\u7136\u4e5f\u5c31\u6ca1\u6cd5\u4e0e\u5e94\u7528\u6765\u8fdb\u884c\u7ed1\u5b9a\u3002 2.2.3 cmdb \u624b\u52a8\u65b0\u589e\u7ef4\u62a4 \u9664\u4e86\u4ee5\u4e0a ucloud api \u5b9a\u65f6 \u811a\u672c\u66f4\u65b0\uff0c cmdb-agent \u66f4\u65b0\u7684\u4fe1\u606f\u4ee5\u5916\uff0c\u5176\u4f59\u4fe1\u606f\u5747\u9700\u624b\u52a8\u53bb\u8fdb\u884c\u66f4\u65b0\u7ef4\u62a4\u3002 cmdb \u4e0a\u7684\u6240\u6709\u5220\u9664\u8d44\u6e90\u884c\u4e3a \uff0c\u5747\u9700\u624b\u52a8\u64cd\u4f5c\uff0c\u5b9a\u65f6\u811a\u672c / cmdb-agent \u4e0d\u4f1a\u81ea\u52a8\u5220\u9664\u8d44\u6e90 \u90a3\u4e48\u8fd9\u91cc\u603b\u7ed3\u4ee5\u4e0b\uff0c\u6709\u54ea\u4e9b\u8d44\u6e90\u7684\u65b0\u589e\u548c\u4fee\u6539\u662f\u9700\u8981\u624b\u52a8\u53bb\u64cd\u4f5c\u7ef4\u62a4\u7684\u5462\uff1f \u4e3b\u8981\u6709\uff1a \u5e94\u7528\u7684\u65b0\u589e \u975eudb \u6570\u636e\u5e93\u7684\u65b0\u589e \u6570\u636e\u5e93\u4e0e\u5e94\u7528\u7684\u7ed1\u5b9a\u5173\u7cfb \u7531\u4e8e\u53d1\u5e03\u7cfb\u7edf\u9700\u8981\u4f9d\u8d56cmdb \u7684\u4e3b\u673a\u4e0e\u5e94\u7528\u4fe1\u606f\u6765\u8fdb\u884c\u53d1\u7248\uff0c\u4e0b\u9762\u4ee5 \u53d1\u5e03\u7cfb\u7edf \u53d1\u5e03\u4e00\u4e2a\u65b0\u589e\u7684\u5e94\u7528\u4e3a\u4f8b\uff0c\u8bb2\u4e00\u4e0bcmdb \u7684\u64cd\u4f5c\u8fc7\u7a0b\u3002 2.2.3.1 CMDB\u65b0\u589e\u5e94\u7528\u4ee5\u4f9b\u53d1\u5e03\u7cfb\u7edf\u8fdb\u884c\u53d1\u7248 2.2.3.1.1\u65b0\u7533\u8bf7\u5e76\u521d\u59cb\u5316\u4e3b\u673a \u5728\u786e\u5b9a\u9700\u8981 \u65b0\u589e\u5e94\u7528\u540e\uff0c\u9700\u8981\u7533\u8bf7\u4e3b\u673a\uff0c\u5e76\u5bf9\u4e3b\u673a\u8fdb\u884c\u521d\u59cb\u5316\u3002 \u638c\u8d1d\u548c\u82b1\u751f\u5361\u8fd9\u8fb9\uff0c\u4e1a\u52a1\u4e3b\u673a\u4e00\u822c\u90fd\u662f\u91c7\u7528ucloud \u7684\u4e91\u4e3b\u673a\uff0c\u5230ucloud \u7684\u64cd\u4f5c\u754c\u9762\u8fdb\u884c\u7533\u8bf7\u5373\u53ef\u3002 \u5f97\u5230\u4e3b\u673a\u540e\uff0c\u6211\u4eec\u7684\u521d\u59cb\u5316\u4e3b\u673a\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5b89\u88c5cmdb-agent\u5e76 start \u5b83\uff0c\u8fd9\u6837cmdb-server \u5c06\u4f1a\u83b7\u53d6\u5230\u65b0\u589e\u7684\u4e3b\u673a\u4fe1\u606f\uff0c\u800c\u65e0\u9700\u624b\u52a8\u5230cmdb \u8fdb\u884c\u4e3b\u673a\u65b0\u589e\u3002 2.2.3.1.2 \u786e\u5b9a\u5e94\u7528\u7c7b\u578b \u200b \u65b0\u589e\u4e00\u4e2a\u5e94\u7528\u65f6\u6211\u4eec\u9700\u8981\u786e\u5b9a\u5e94\u7528\u7c7b\u578b\uff0c\u76ee\u524d\u53d1\u5e03\u7cfb\u7edf\u652f\u6301\u53d1\u7248\u7684\u5e94\u7528\u7684\u5e94\u7528\u7c7b\u578b\u6709\uff1a web : java \u7684tomcat \u5e94\u7528\uff0c\u53d1\u7248\u65f6\u9700\u8981\u4f9d\u8d56jdk \uff0c\u540c\u65f6\u9700\u8981tomcat ,\u8fd8\u9700\u8981nginx mod : \u4f7f\u7528dubbo \u8fdb\u884c\u6d41\u91cf\u8c03\u5ea6\uff0c\u662fdubbo\u7684 \u63d0\u4f9b\u8005\uff0c\u8fd0\u884c\u65f6\u9700\u8981\u4f9d\u8d56 jdk \u548cdubbo web+mod : web \u548cmod\u7684\u7ed3\u5408\u7248\uff0c\u65e2\u9700\u8981tomcat /nginx \uff0c\u4e5f\u9700\u8981dubbo \u8c03\u5ea6\u5206\u914d\u6d41\u91cf dubbo-consumer \uff08\u6700\u8fd1\u65b0\u589e\u7684\u7c7b\u578b\uff09\uff1a dubbo\u7684\u7eaf\u6d88\u8d39\u8005\uff0c\u53ea\u6d88\u8d39\u4e0d\u63d0\u4f9b\u670d\u52a1\uff0c\u53ea\u9700\u4f9d\u8d56jdk \u4e3a\u4ec0\u4e48\u4f1a\u6709\u4e00\u4e9b\u7eaf\u6d88\u8d39\u8005\u7684\u5e94\u7528\u5462\uff1f \u65e2\u4e0d\u5bf9\u5916\u63d0\u4f9bweb \u7684\u670d\u52a1\uff0c\u4e5f\u4e0d\u5bf9\u5185\u63d0\u4f9bdubbo\u63d0\u4f9b\u8005\u7684\u670d\u52a1\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5e94\u7528\u5230\u5e95\u662f\u5e72\u4ec0\u4e48\u7684\u5462\uff1f \u539f\u6765\u8fd9\u4e9b\u5e94\u7528\u4e3b\u8981\u662f\u505a\u4e00\u4e9b\u7edf\u8ba1 \u4e4b\u7c7b\u7684\u5b9a\u65f6\u4efb\u52a1\uff0c\u547d\u540d\u65f6\u4e00\u822c\u4ee5mod-job \u4f5c\u4e3a\u540e\u7f00\u3002 \u5982\u679c\u9700\u8981\u67e5\u770b\u5404\u4e2a\u5e94\u7528\u7c7b\u578b\uff0c\u53ef\u4ee5\u5728 cmdb \u7684\u5e94\u7528\u9875\u9762\u8fdb\u884c\u67e5\u770b\u3002 spring \uff1a \u91c7\u7528spring \u6846\u67b6\u7684java \u5e94\u7528\uff0c\u4f7f\u7528eruke \u6765\u8c03\u5ea6\u5206\u914d\u6d41\u91cf static \u200b \u524d\u7aef\u7684\u9759\u6001\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u91c7\u7528 nginx \u505a\u670d\u52a1\u5668\u5373\u53ef \u5982\u679c\u65b0\u589e\u4e00\u4e2a\u5e94\u7528\u662f\u5e0c\u671b\u91c7\u7528 \u53d1\u5e03\u7cfb\u7edf\u6765\u53d1\u7248\u7684\uff0c\u90a3\u4e48\u5c31\u9700\u6309\u7167\u4e0a\u9762\u7684\u8981\u6c42\u5b9a\u4e49\u8fdb\u884c\u4e25\u683c\u5206\u7c7b\uff0c\u56e0\u4e3a\u53d1\u5e03\u7cfb\u7edf\u662f\u4f9d\u8d56\u4e8ecdmb \u7684\u5e94\u7528\u7c7b\u578b\u6765\u5bf9\u4e0d\u540c\u7684\u5e94\u7528\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\u7684\u3002 2.2.3.3 \u5728cdmb \u7684\u5e94\u7528\u9875\u9762\u8fdb\u884c\u5e94\u7528\u65b0\u589e \u5e94\u7528\u7684\u65b0\u589e\u6743\u9650 \u53ea\u6709\u201c\u8fd0\u7ef4\u5de5\u7a0b\u90e8\u201d\u7684\u6210\u5458\u624d\u6709\u8fd9\u4e2a\u6743\u9650\uff0c\u5982\u679c\u4f60\u53d1\u73b0 \u627e\u4e0d\u5230\u65b0\u589e\u7684\u5165\u53e3\uff0c\u8bf7\u627e\u8fd0\u7ef4\u90e8\u95e8\u4eba\u5458\uff0c\u5728cmdb\u4e0a\u7684\u90e8\u95e8\u9875\u9762\u628a\u4f60\u52a0\u5230 \u201c\u8fd0\u7ef4\u5de5\u7a0b\u90e8\u201d\u8fd9\u4e2a\u90e8\u95e8\u4e0a\u9762\u6765\u3002 \u5e94\u7528\u7684\u90e8\u7f72\u8def\u5f84 \u4e5f\u662f\u5fc5\u586b\u9009\u9879\uff0c\u5e94\u7528\u90e8\u7f72\u8def\u5f84 \u5728\u53d1\u5e03\u7cfb\u7edf\u4e2d\u591a\u5904\u9700\u8981\u7528\u5230\uff0c\u5982 \uff1a \u542f\u505c\u5e94\u7528\uff0c\u5907\u4efd\u65e5\u5fd7\uff0c\u4e0b\u8f7d\u5305 \u7b49\u4efb\u52a1\u90fd\u9700\u8981\u7528\u5230\uff0c\u6240\u4ee5\u662f\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u5c5e\u6027\u3002 \u90a3\u4e48\u5e94\u7528\u7684\u90e8\u7f72\u8def\u5f84\u600e\u4e48\u586b\u5199\u5462\uff1f\u4e5f\u662f\u6309\u7167\u5e94\u7528\u5206\u7c7b\u6765\u586b\u5199 web ``` /home/product/data/webapps/appname \u5982\uff1a /home/product/data/webapps/saofu-shop-shop \u5f53\u4e00\u53f0\u4e3b\u673a\u4e0a\u6709\u591a\u4e2a web \u5e94\u7528\u65f6\uff0c\u5c31\u9700\u8981\u7528\u7aef\u53e3\u53f7\u6765\u533a\u5206 /home/product/data/webapps8030/appname \u5982\uff1a /home/product/data/webapps8030/invoice-web-shop ``` mod /home/product/data/mods/appname \u5982\uff1a /home/product/data/mods/mall-mod-dal web+mod web+mod \u7684\u7c7b\u578b\u4e00\u822c\u662f\u5386\u53f2\u9057\u7559\u5e94\u7528\uff0c\u65b0\u589e\u4e00\u822c\u5f88\u5c11\u662f\u8fd9\u4e2a\u7c7b\u578b\u3002 web+mod\u7684\u7c7b\u578b\uff0c\u90e8\u7f72\u8def\u5f84\u65e2\u6709\u91c7\u53d6 web \u7c7b\u578b\u7684\uff0c\u4e5f\u6709\u91c7\u53d6mod \u7c7b\u578b\u7684\uff0c\u5982\u679c\u7684\u786e\u662f\u9700\u8981\u65b0\u589e\uff0c\u5efa\u8bae\u8ddf\u8fd0\u7ef4\u90e8\u95e8\u8d44\u6df1\u540c\u4e8b\u54a8\u8be2\u5e76\u8be2\u95ee\u5f00\u53d1\u7684\u76f8\u5173\u60c5\u51b5\u3002 dubbo-consumer \u6309mod \u7c7b\u578b\u7684\u89c4\u5219\u6765\u6dfb\u52a0\u5373\u53ef spring \u6309mod \u7c7b\u578b\u7684\u89c4\u5219\u6765\u6dfb\u52a0\u5373\u53ef static /home/product/data/nginx/appname \u5982\uff1a /home/product/data/nginx/pinka-web-substation-frontend 2.2.3.4 \u7ed1\u5b9a\u4e3b\u673a\u4fe1\u606f \u5e94\u7528\u65b0\u589e\u5b8c\u6210\u540e\uff0c\u5728\u5e94\u7528\u9875\u9762 \u663e\u793a\u51fa\u201c\u64cd\u4f5c\u201d\u680f\uff0c\u5728\u201c\u64cd\u4f5c\u201d\u680f\u4e0b\u9762\u6709\u4e2a\u201c\u7ed1\u5b9a\u5e94\u7528\u201d\u7684\u6309\u94ae\uff0c\u641c\u7d22\u51fa\u65b0\u7533\u8bf7\u7684\u4e3b\u673a\uff0c\u5e76\u7ed1\u5b9a\u5230\u76ee\u6807\u5e94\u7528\u4e0a 2.2.3.5 \u7ed1\u5b9a\u6570\u636e\u5e93\u4fe1\u606f \u5982\u679c\u8be5\u5e94\u7528\u8fd8\u9700\u8981\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u867d\u7136\u4e0d\u5f71\u54cd\u53d1\u7248\uff0c\u4f46\u4e3a\u540e\u9762\u7684\u7ef4\u62a4\uff0c\u8fd8\u662f\u9700\u8981\u5230\u201c\u6570\u636e\u5e93\u540d\u79f0\u201d\u9875\u9762 \u8fdb\u884c \u6570\u636e\u5e93 \u4e0e \u5e94\u7528\u7684\u7ed1\u5b9a\u3002 3.CMDB\u4e3b\u8981\u8d44\u6e90\u5bf9\u8c61\u6570\u636e\u5e93\u8bbe\u8ba1 \u4e3b\u673a \u5e94\u7528 \u6570\u636e\u5e93 \u4ee5\u4e0a\u4e09\u8005 \u662fcmdb \u7684\u4e09\u5927\u57fa\u77f3\uff0c\u4e5f\u662fcmdb \u63d0\u4f9b\u7684\u6700\u4e3b\u8981\u7684\u529f\u80fd\uff0c\u5e94\u7528\u9700\u8981\u4e0e\u4e3b\u673a\u8fdb\u884c\u7ed1\u5b9a\uff0c\u6570\u636e\u5e93\u5b9e\u4f8b\u4e5f\u9700\u8ddf\u4e3b\u673a\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5e94\u7528\u4e0e\u6570\u636e\u5e93\u4e4b\u95f4\u4e5f\u6709\u4e2a\u7ed1\u5b9a\u5173\u7cfb\u3002 \u4e0b\u56fe\u662f cmdb\u53ea\u8981\u8d44\u6e90\u7684\u6570\u636e\u8868\u8bbe\u8ba1\uff08ps:\u4e0d\u6e05\u6670\u7684\u8bdd \u8bf7\u67e5\u770bsvn\uff1a devops/\u8fd0\u7ef4\u5f00\u53d1/\u56fe/cmdb\u6570\u636e\u5e93\u8868\u8bbe\u8ba1.jpg\uff09 \u4e3b\u673a \u4e3b\u673a\u7c7b\u578b\u6709\uff1a \u4e91\u4e3b\u673a ucloud\u7269\u7406\u673a \u6df7\u5408\u4e91\u865a\u62df\u673a \u6df7\u5408\u4e91\u7269\u7406\u673a \u4fe1\u606f\u66f4\u65b0\u6765\u6e90\u6709\uff1a ucloud \u63a5\u53e3\u83b7\u53d6\u4e91\u4e3b\u673a/ucloud\u7269\u7406\u673a \u7684\u4fe1\u606f\u65b0\u589e\u548c\u66f4\u65b0\uff08\u6bcf\u59298:30\u5b9a\u65f6\u811a\u672c\u66f4\u65b0\uff09 cmdb-agent \u83b7\u53d6\u6df7\u5408\u4e91\u865a\u62df\u673a/\u6df7\u5408\u4e91\u7269\u7406\u673a \u7684\u4fe1\u606f\u65b0\u589e\u548c\u66f4\u65b0\uff08cmdb-agent \u6bcf\u5c0f\u65f6\u4e0a\u62a5\u4e00\u6b21\uff09 \u6807\u7b7e \u6807\u7b7e\u662f \u9664\u4e86\u6309\u90e8\u95e8\u5bf9\u4e3b\u673a /\u5e94\u7528/\u6570\u636e\u5e93\u8fd9\u4e9b\u8d44\u6e90\u5206\u7c7b\u5916\uff0c\u4e00\u79cd\u66f4\u4e3a\u7075\u6d3b\u7684\u5bf9\u8d44\u6e90\u8fdb\u884c\u5206\u7c7b\u7684\u65b9\u6cd5\u3002 \u90a3\u4e48\u6807\u7b7e\u662f\u600e\u4e48\u8bbe\u8ba1\u5b9e\u73b0\u7684\u5462\uff1f \u4e3b\u8981\u662f\u901a\u8fc7cmdb_tag /cmdb_tag_resource\u4e24\u5f20\u8868\u7684\u8bbe\u8ba1\u6765\u5b9e\u73b0\u7684\u3002 cmdb_tag_resource\u7684\u5173\u952e\u5b57\u6bb5\u5982\u4e0b\uff1a id tag_id : cmdb_tag\u7684id table_id : \u8d44\u6e90\u7684table_id table_tag : (\u5bf9\u5e94\u7684\u8d44\u6e90\u7c7b\u578b 1: host 2: application 3: ip 4: database 5:ulb) cmdb_tag \u7684\u5173\u952e\u5b57\u6bb5\u5982\u4e0b id name \uff1a \u6807\u7b7e\u540d \u4e0e\u666e\u901a\u7684\u6620\u5c04\u8868\u4e0d\u4e00\u6837\uff0c\u666e\u901a\u7684\u6620\u5c04\u8868 \u53ea\u9700\u628a\u4e24\u79cd\u8d44\u6e90\u7684\u5173\u7cfb\u8054\u7cfb\u8d77\u6765\u5c31\u597d\uff0c \u4f46\u662f\u6211\u4eec\u7684\u6807\u7b7e\u529f\u80fd\u662f\u9700\u8981\u5904\u7406\u591a\u79cd\u8d44\u6e90\uff08\u50cf\u4e0a\u9762\u6240\u8bf4\u7684\u81f3\u5c115+1\u79cd\u5173\u7cfb\uff09\u3002\u90a3\u4e48cmdb_tag_resource \u662f\u600e\u4e48\u5904\u7406\u8fd9\u4e48\u79cd\u8d44\u6e90\u7684\u5462\uff1f \u6211\u4eec\u53ea\u901a\u8fc7 tabel_tag \u548ctable_id \u4e24\u4e2a\u5b57\u6bb5\uff0ctable_tag \u6307\u660e\u8d44\u6e90\u7c7b\u578b,table_id \u6307\u5b9a id ,\u4e24\u8005\u7ed3\u5408\u8fbe\u5230\u67e5\u627e\u4e0d\u540c\u8d44\u6e90\u7684\u76ee\u7684\u3002 4. \u5176\u4ed6\u7cfb\u7edf\u5bf9cmdb \u7684\u4f9d\u8d56 4.1 \u53d1\u5e03\u7cfb\u7edf\u5bf9cmdb\u7684\u4f9d\u8d56 cmdb \u662f\u6574\u4e2a\u8fd0\u7ef4\u7684\u57fa\u77f3\uff0c\u65e0\u8bba\u662f \u76d1\u63a7\u8fd8\u662f\u53d1\u5e03\u7cfb\u7edf\u90fd\u9700\u4f9d\u8d56\u4e8ecmdb\u7684\u4fe1\u606f\u3002 \u53d1\u5e03\u7cfb\u7edf\u5bf9cmdb\u7684\u4f9d\u8d56\u4f53\u73b0\u5728\u4e24\u4e2a\u65b9\u9762\uff1a \u4e00\u4e2a\u662f \u9700\u8981\u4f9d\u8d56cmdb \u83b7\u53d6\u53d1\u7248\u5e94\u7528\u4fe1\u606f\uff08\u7c7b\u578b/\u90e8\u7f72\u8def\u5f84\u7b49\uff09/\u4e3b\u673a\u4fe1\u606f\uff0c\u8fd9\u4e2a\u5728\u53d1\u5e03\u7cfb\u7edf\u7684\u524d\u7aef\u548c\u540e\u7aef\u90fd\u6709cmdb\u7684api \u8c03\u7528\uff0c\u8fd9\u4e9b\u90fd\u662fhttp \u8fde\u63a5 \u4e00\u4e2a\u662f \u53d1\u7248\u7cfb\u7edf\u524d\u7aef \u8fdb\u884c\u53d1\u7248\u65f6\uff0c\u5b9e\u65f6\u66f4\u65b0 \u5e94\u7528\u7248\u672c\u5bf9cmdb \u7684\u4f9d\u8d56\uff0c\u8fd9\u662f\u4e00\u4e2awebsocket\u63a5\u53e3\uff0cpublih-web \u4e0ecmdb-server \u76f4\u8fde","title":"cmdb\u529f\u80fd\u4ecb\u7ecd"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#cmdb","text":"","title":"CMDB\u529f\u80fd\u8bbe\u8ba1\u4ecb\u7ecd"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#1","text":"cmdb \u76f8\u5bf9\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u4e00\u4e2a\u67b6\u6784\uff0c\u57fa\u672c\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8d44\u4ea7\u7ba1\u7406\u7cfb\u7edf\uff0c\u57fa\u672c\u5c31\u662f\u8d44\u6e90\u7684CRUD\u7684\u57fa\u672c\u64cd\u4f5c\u3002\u6240\u4ee5\u5728\u67b6\u6784\u4e0a\uff0c\u5c31\u662f\u4e00\u4e2amysql ,\u4e00\u4e2a server ,\u4e00\u4e2aweb \u3002 \u4e24\u4fa7\u7684 cmdb-agent ,shell \u5b9a\u65f6\u811a\u672c \u4e3b\u8981\u662f \u4fe1\u606f\u7684\u6765\u6e90\uff0c\u8fdb\u884c\u4e00\u4e9b\u8d44\u6e90\u4fe1\u606f\u7684\u521b\u5efa \u548c\u66f4\u65b0\u64cd\u4f5c\u3002","title":"1.\u67b6\u6784"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2cmdb","text":"cmdb \u7684\u4fe1\u606f\u4e3b\u8981\u6709\u4e09\u5927\u6765\u6e90 ucloud api \u5b9a\u65f6\u811a\u672c cmdb-agent \u5b9a\u65f6\u66f4\u65b0 cmdb \u624b\u52a8\u65b0\u589e\u7ef4\u62a4","title":"2.CMDB \u7684\u4fe1\u606f\u6765\u6e90"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#21cmdb-ucloud","text":"\u6bcf\u59298\uff1a30 cmdb \u540c\u6b65\u4fe1\u606f\u7684\u4ee3\u7801 \u5730\u5740\uff1a http://git.dev.yunnex.com/ops/opstool/tree/master/cmdb-crontab \u5728UGZB-CMDB-001 \u4e3b\u673a\u4e0a\u7684crontab \u8bbe\u7f6e product@UGZB-CMDB-001 ~]$ sudo crontab -l 30 8 * * * /data/svr/python-env/bin/python /root/cron/cmdb-crontab/main.py ucloud\u7684uhost\uff0cphost\uff0cudb\uff0ceip\uff0culb\u7b49\u4fe1\u606f\uff0c\u6bcf\u5929\u65e9\u4e0a8\u70b930\uff0c\u5b9a\u65f6\u4efb\u52a1\u81ea\u52a8\u540c\u6b65\u5230cmdb\u3002 \u5b9a\u65f6\u4efb\u52a1\u540c\u6b65\u7684\u65f6\u5019\uff0c \u53ea\u65b0\u589e\uff0c\u4e0d\u5220\u9664 \u5220\u9664\u9700\u8981\u6839\u636e\u6bcf\u5929\u65e9\u4e0a8:30 cdmb\u7684scan \u90ae\u4ef6\u8fdb\u884c\u624b\u52a8\u5220\u9664","title":"2.1cmdb ucloud \u5b9a\u65f6\u540c\u6b65\u811a\u672c"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#211-cmdb-ucloud","text":"\u4e91\u4e3b\u673a\uff1a \u5f53\u4e91\u4e3b\u673a\u5728cmdb \u4e0a\u6ca1\u5b58\u5728\u8bb0\u5f55\u65f6\uff0c\u65b0\u589e\u6240\u6709\u5c5e\u6027\uff1ahostname /\u5185\u5b58\u5927\u5c0f/ip/cpu \u4fe1\u606f\u7b49 \u5f53\u4e91\u4e3b\u673a\u5df2\u5b58\u5728\u65f6\uff0c \u5f53\u78c1\u76d8\u5927\u5c0f\u6709\u53d8\u5316\u65f6\uff0c\u53ea\u66f4\u65b0\u78c1\u76d8\u5c5e\u6027\uff0c\u5176\u4ed6\u5c5e\u6027\u4e0d\u66f4\u65b0. ucloud \u7269\u7406\u4e3b\u673a \u66f4\u65b0\u4fe1\u606f\u548c\u65b0\u589e\u4fe1\u606f\u4e00\u81f4\uff1a \u5185\u5b58\u5927\u5c0f/\u78c1\u76d8\u5927\u5c0f/cpu \u6838\u6570/SN UDB udb \u7531\u4e8e\u65e0\u6cd5\u5b89\u88c5 cmdb-agent ,\u6240\u4ee5udb\u7684\u4fe1\u606f\u6765\u6e90\u4e3b\u8981\u662fucloud api\u7684\u66f4\u65b0 \u6216\u8005\u624b\u52a8\u65b0\u589e\u4fee\u6539 \u66f4\u65b0\u6216\u65b0\u589e\u7684\u5c5e\u6027\u6709\uff1a IP / \u662f\u5426\u4e3b\u5e93/\u6570\u636e\u5e93\u7c7b\u578b/\u4ece\u5e93\u4fe1\u606f/\u5185\u5b58/\u78c1\u76d8\u5927\u5c0f/SSD\u673a\u578b\u4fe1\u606f ULB \u540cudb \u4e00\u6837\uff0culb\u6ca1\u6709cmdb-agent ,\u66f4\u65b0\u7684\u4fe1\u606f\u6765\u6e90\u4e5f\u53ea\u6709 ucloud api \u6216\u8005\u624b\u52a8\u65b0\u589e\u4fee\u6539 \u66f4\u65b0\u6216\u65b0\u589e\u7684\u5c5e\u6027\u6709\uff1a IP /backend(\u8fde\u63a5\u7684\u662f application or database) EIP eip \u7684\u4fe1\u606f\u6765\u6e90\u4e5f\u53ea\u6709ucloud api \u6216\u8005\u624b\u52a8\u65b0\u589e\u4fee\u6539 \u66f4\u65b0\u6216\u65b0\u589e\u7684\u5c5e\u6027\u6709\uff1a ip address /\u7ed1\u5b9a\u7684\u8d44\u6e90\uff08table_tag ,table_id\uff09","title":"2.1.1 cmdb ucloud \u5b9a\u65f6\u540c\u6b65\u811a\u672c\u66f4\u65b0\u7684\u5185\u5bb9"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#22-cmdb-agent","text":"cmdb-agent \u662f\u4e00\u4e2a\u91c7\u7528python \u8bed\u8a00\u5199\u7684\u7a0b\u5e8f\uff0c\u901a\u8fc7cmdb-server\u7684api\u4e0e cmdb-server \u4ea4\u4e92\u6570\u636e\uff0c\u4e3b\u8981\u662f\u91c7\u7528python\u7684requests \u5305\u6765\u8fdb\u884c\u7f51\u7edc\u901a\u4fe1\u3002 \u5728\u4e1a\u52a1\u4e3b\u673a\u521d\u59cb\u5316\u65f6\uff0c\u90fd\u4f1a\u628acmdb-agent \u4f5c\u4e3a\u5fc5\u5b89\u88c5\u9009\u9879\uff0c\u5728\u4e3b\u673a\u521d\u59cb\u5316\u65f6\u8fdb\u884c\u5b89\u88c5\u3002 cmdb-agent \u6bcf\u5c0f\u65f6\u4f1a\u81ea\u52a8\u4e0a\u62a5\u4e00\u6b21\u3002 \u90a3\u5982\u679ccmdb-agent \u6302\u4e86\u5462 \uff1f\u4e0d\u5fc5\u62c5\u5fc3\uff0c\u5728\u521d\u59cb\u5316\u4e3b\u673a\u65f6\uff0c\u6211\u4eec\u4e5f\u628acmdb-agent \u7684\u5b58\u6d3b\u4e0e\u5426\u6dfb\u52a0\u5230\u4e86zabbix \u7684\u76d1\u63a7\u91cc\u9762\uff0c\u4e00\u65e6\u4e1a\u52a1\u4e3b\u673a\u7684cmdb-agent \u6302\u4e86\uff0czabbix \u4f1a\u53d1\u51fa\u90ae\u4ef6\u544a\u8b66\uff0c\u53ca\u65f6\u6267\u884c\u76f8\u5e94\u7684\u5904\u7406\u5373\u53ef\u3002","title":"2.2 CMDB-agent"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#221-cmdb-agent","text":"","title":"2.2.1 \u90a3\u4e48cmdb-agent \u4e3b\u8981\u662f\u66f4\u65b0\u4e86\u54ea\u4e9b\u4fe1\u606f\u5462\uff1f"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2211-cmdb-agent","text":"cmdb-agent \u5728\u65b0\u589e\u6216\u66f4\u65b0\u5185\u5bb9\u524d\u4f1a\u5224\u65ad\u4e00\u4e0b\u9700\u4e0d\u9700\u8981\u65b0\u589e\u6216\u4fee\u6539\uff0c\u6bd4\u5982\u65b0\u589e\u4e3b\u673a\u65f6\uff0c\u91c7\u7528hostname\u4e3a\u4f9d\u636e\uff0c\u5411cmdb-server\u8fdb\u884c\u67e5\u8be2\u8be5\u4e3b\u673a\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u76f4\u63a5\u65b0\u589e\uff0c\u5982\u679c\u5b58\u5728\uff0c\u90a3\u4e48\u5224\u65ad\u4e00\u4e0b\u5c5e\u6027\u6709\u6ca1\u53d8\u5316\uff08\u5f53\u4e3b\u673a\u5b58\u5728cmdb-server\u65f6\uff0c\u4f1a\u83b7\u5f97cmdb-server\u4e2d\u4e3b\u673a\u7684\u5c5e\u6027\u4fe1\u606f\uff0c\u4ece\u800c\u4e0e\u672c\u5730\u83b7\u53d6\u7684\u4fe1\u606f\u8fdb\u884c\u5bf9\u6bd4\uff09\uff0c\u6709\u53d8\u5316\u518d\u8c03\u7528\u66f4\u65b0\u63a5\u53e3\u3002 \u5f53cmdb-server\u6570\u636e\u5e93\u4e2d\u8bb0\u5f55\u4e0d\u5b58\u5728\uff08\u65b0\u589e\uff09\u6216\u5c5e\u6027\u4fe1\u606f\u6709\u53d8\u66f4\uff08\u66f4\u65b0\uff09\u65f6\uff0ccmdb-agent \u4f1a\u65b0\u589e\u6216\u66f4\u65b0\u4e00\u4e0b\u5185\u5bb9\uff1a \u4e3b\u673a\u4fe1\u606f\uff08hostname /cpu /\u5185\u5b58\u5927\u5c0f\uff09 \u7269\u7406\u4e3b\u673a\uff08server info /sn\uff09 IP (ip\u7c7b\u578b/ip \u5730\u5740) \u4e3b\u673a\u7c7b\u578b \uff08\u5bf9\u5e94\u8868 host_type\uff09 \u4e3b\u673a\u548c\u5e94\u7528\u7684\u7ed1\u5b9a\u5173\u7cfb (\u5bf9\u5e94\u8868 cmdb_host_application) \u8be5\u4e3b\u673a\u4e0a\u5e94\u7528\u7684\u7248\u672c\u4fe1\u606f(\u5bf9\u5e94\u8868 cmdb_host_application) \u4e3b\u673a\u7684\u65b0\u589e\u6216\u66f4\u65b0\u4f9d\u636e\uff0c\u4e3b\u8981\u662f\u4f9d\u636ehostname \u53bb\u8ddfcmdb-server \u4ea4\u4e92\u5224\u522b\u7684\u3002","title":"2.2.1.1 cmdb-agent \u4f1a\u65b0\u589e\u6216\u66f4\u65b0\u7684\u5185\u5bb9"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2212-cmdb-agent","text":"\u4ee5\u4e0b\u5185\u5bb9\u662fcmdb-agent \u4e0d\u4f1a \u53bb\u7ef4\u62a4\u7684\uff08\u65b0\u589e\u6216\u4fee\u6539\uff09,\u9700\u8981\u5728cmdb \u4e0a\u624b\u52a8\u7ef4\u62a4 \u5e94\u7528 \u6570\u636e\u5e93 \u5e94\u7528\u4e0e\u6570\u636e\u5e93\u7684\u7ed1\u5b9a\u4fe1\u606f \u5e94\u7528\u4fe1\u606f\u4e3a\u4ec0\u4e48\u6ca1\u6709\u53bb\u4e3b\u52a8\u65b0\u589e\u6216\u8005\u4fee\u6539\u5462\uff1f\u4e3b\u8981\u662f \u4e24\u4e2a\u539f\u56e0\uff1a \u5e94\u7528\u4fe1\u606f\u7684\u53d1\u73b0\uff0c\u6211\u4eec\u662f\u901a\u8fc7 \u6307\u5b9a\u76ee\u5f55\u6765\u53d1\u73b0\uff0c\u5f53\u76ee\u5f55\u4e0b\u51fa\u73b0\u4e00\u4e9b\u975e\u5e94\u7528\u6587\u4ef6\u65f6\uff0c\u4e5f\u4f1a\u88ab\u5f53\u4f5c\u5e94\u7528\u6765\u4e0a\u62a5\uff0c\u5bfc\u81f4\u8bef\u62a5\uff1b \u5f53\u65b0\u589e\u4e00\u4e2a\u5e94\u7528\u65f6\uff0c\u6709\u4e86\u53d1\u5e03\u7cfb\u7edf\u540e\uff0c\u6211\u4eec\u90fd\u662f\u901a\u8fc7\u53d1\u5e03\u7cfb\u7edf\u8fdb\u884c\u53d1\u7248\uff0c\u90a3\u4e48\u8fd8\u6ca1\u53d1\u7248\uff0c\u81ea\u7136\u6307\u5b9a\u76ee\u5f55\u5c31\u6ca1\u76f8\u5173\u7684\u5e94\u7528\uff0c\u81ea\u7136\u4e5f\u5c31\u6ca1\u6cd5\u81ea\u52a8\u65b0\u589e \u6570\u636e\u5e93\u5219\u662f\u5f53\u524d\u6211\u4eec\u6ca1\u6709\u7b80\u5355\u7684\u83b7\u53d6\u5230\u6570\u636e\u5e93\u4fe1\u606f\u7684\u65b9\u6cd5\uff0c\u81ea\u7136\u4e5f\u5c31\u6ca1\u6cd5\u4e0e\u5e94\u7528\u6765\u8fdb\u884c\u7ed1\u5b9a\u3002","title":"2.2.1.2 cmdb-agent \u4e0d\u4f1a\u65b0\u589e\u6216\u4fee\u6539\u7684\u5185\u5bb9"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#223-cmdb","text":"\u9664\u4e86\u4ee5\u4e0a ucloud api \u5b9a\u65f6 \u811a\u672c\u66f4\u65b0\uff0c cmdb-agent \u66f4\u65b0\u7684\u4fe1\u606f\u4ee5\u5916\uff0c\u5176\u4f59\u4fe1\u606f\u5747\u9700\u624b\u52a8\u53bb\u8fdb\u884c\u66f4\u65b0\u7ef4\u62a4\u3002 cmdb \u4e0a\u7684\u6240\u6709\u5220\u9664\u8d44\u6e90\u884c\u4e3a \uff0c\u5747\u9700\u624b\u52a8\u64cd\u4f5c\uff0c\u5b9a\u65f6\u811a\u672c / cmdb-agent \u4e0d\u4f1a\u81ea\u52a8\u5220\u9664\u8d44\u6e90 \u90a3\u4e48\u8fd9\u91cc\u603b\u7ed3\u4ee5\u4e0b\uff0c\u6709\u54ea\u4e9b\u8d44\u6e90\u7684\u65b0\u589e\u548c\u4fee\u6539\u662f\u9700\u8981\u624b\u52a8\u53bb\u64cd\u4f5c\u7ef4\u62a4\u7684\u5462\uff1f \u4e3b\u8981\u6709\uff1a \u5e94\u7528\u7684\u65b0\u589e \u975eudb \u6570\u636e\u5e93\u7684\u65b0\u589e \u6570\u636e\u5e93\u4e0e\u5e94\u7528\u7684\u7ed1\u5b9a\u5173\u7cfb \u7531\u4e8e\u53d1\u5e03\u7cfb\u7edf\u9700\u8981\u4f9d\u8d56cmdb \u7684\u4e3b\u673a\u4e0e\u5e94\u7528\u4fe1\u606f\u6765\u8fdb\u884c\u53d1\u7248\uff0c\u4e0b\u9762\u4ee5 \u53d1\u5e03\u7cfb\u7edf \u53d1\u5e03\u4e00\u4e2a\u65b0\u589e\u7684\u5e94\u7528\u4e3a\u4f8b\uff0c\u8bb2\u4e00\u4e0bcmdb \u7684\u64cd\u4f5c\u8fc7\u7a0b\u3002","title":"2.2.3 cmdb \u624b\u52a8\u65b0\u589e\u7ef4\u62a4"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2231-cmdb","text":"","title":"2.2.3.1 CMDB\u65b0\u589e\u5e94\u7528\u4ee5\u4f9b\u53d1\u5e03\u7cfb\u7edf\u8fdb\u884c\u53d1\u7248"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#22311","text":"\u5728\u786e\u5b9a\u9700\u8981 \u65b0\u589e\u5e94\u7528\u540e\uff0c\u9700\u8981\u7533\u8bf7\u4e3b\u673a\uff0c\u5e76\u5bf9\u4e3b\u673a\u8fdb\u884c\u521d\u59cb\u5316\u3002 \u638c\u8d1d\u548c\u82b1\u751f\u5361\u8fd9\u8fb9\uff0c\u4e1a\u52a1\u4e3b\u673a\u4e00\u822c\u90fd\u662f\u91c7\u7528ucloud \u7684\u4e91\u4e3b\u673a\uff0c\u5230ucloud \u7684\u64cd\u4f5c\u754c\u9762\u8fdb\u884c\u7533\u8bf7\u5373\u53ef\u3002 \u5f97\u5230\u4e3b\u673a\u540e\uff0c\u6211\u4eec\u7684\u521d\u59cb\u5316\u4e3b\u673a\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5b89\u88c5cmdb-agent\u5e76 start \u5b83\uff0c\u8fd9\u6837cmdb-server \u5c06\u4f1a\u83b7\u53d6\u5230\u65b0\u589e\u7684\u4e3b\u673a\u4fe1\u606f\uff0c\u800c\u65e0\u9700\u624b\u52a8\u5230cmdb \u8fdb\u884c\u4e3b\u673a\u65b0\u589e\u3002","title":"2.2.3.1.1\u65b0\u7533\u8bf7\u5e76\u521d\u59cb\u5316\u4e3b\u673a"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#22312","text":"\u200b \u65b0\u589e\u4e00\u4e2a\u5e94\u7528\u65f6\u6211\u4eec\u9700\u8981\u786e\u5b9a\u5e94\u7528\u7c7b\u578b\uff0c\u76ee\u524d\u53d1\u5e03\u7cfb\u7edf\u652f\u6301\u53d1\u7248\u7684\u5e94\u7528\u7684\u5e94\u7528\u7c7b\u578b\u6709\uff1a web : java \u7684tomcat \u5e94\u7528\uff0c\u53d1\u7248\u65f6\u9700\u8981\u4f9d\u8d56jdk \uff0c\u540c\u65f6\u9700\u8981tomcat ,\u8fd8\u9700\u8981nginx mod : \u4f7f\u7528dubbo \u8fdb\u884c\u6d41\u91cf\u8c03\u5ea6\uff0c\u662fdubbo\u7684 \u63d0\u4f9b\u8005\uff0c\u8fd0\u884c\u65f6\u9700\u8981\u4f9d\u8d56 jdk \u548cdubbo web+mod : web \u548cmod\u7684\u7ed3\u5408\u7248\uff0c\u65e2\u9700\u8981tomcat /nginx \uff0c\u4e5f\u9700\u8981dubbo \u8c03\u5ea6\u5206\u914d\u6d41\u91cf dubbo-consumer \uff08\u6700\u8fd1\u65b0\u589e\u7684\u7c7b\u578b\uff09\uff1a dubbo\u7684\u7eaf\u6d88\u8d39\u8005\uff0c\u53ea\u6d88\u8d39\u4e0d\u63d0\u4f9b\u670d\u52a1\uff0c\u53ea\u9700\u4f9d\u8d56jdk \u4e3a\u4ec0\u4e48\u4f1a\u6709\u4e00\u4e9b\u7eaf\u6d88\u8d39\u8005\u7684\u5e94\u7528\u5462\uff1f \u65e2\u4e0d\u5bf9\u5916\u63d0\u4f9bweb \u7684\u670d\u52a1\uff0c\u4e5f\u4e0d\u5bf9\u5185\u63d0\u4f9bdubbo\u63d0\u4f9b\u8005\u7684\u670d\u52a1\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5e94\u7528\u5230\u5e95\u662f\u5e72\u4ec0\u4e48\u7684\u5462\uff1f \u539f\u6765\u8fd9\u4e9b\u5e94\u7528\u4e3b\u8981\u662f\u505a\u4e00\u4e9b\u7edf\u8ba1 \u4e4b\u7c7b\u7684\u5b9a\u65f6\u4efb\u52a1\uff0c\u547d\u540d\u65f6\u4e00\u822c\u4ee5mod-job \u4f5c\u4e3a\u540e\u7f00\u3002 \u5982\u679c\u9700\u8981\u67e5\u770b\u5404\u4e2a\u5e94\u7528\u7c7b\u578b\uff0c\u53ef\u4ee5\u5728 cmdb \u7684\u5e94\u7528\u9875\u9762\u8fdb\u884c\u67e5\u770b\u3002 spring \uff1a \u91c7\u7528spring \u6846\u67b6\u7684java \u5e94\u7528\uff0c\u4f7f\u7528eruke \u6765\u8c03\u5ea6\u5206\u914d\u6d41\u91cf static \u200b \u524d\u7aef\u7684\u9759\u6001\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u91c7\u7528 nginx \u505a\u670d\u52a1\u5668\u5373\u53ef \u5982\u679c\u65b0\u589e\u4e00\u4e2a\u5e94\u7528\u662f\u5e0c\u671b\u91c7\u7528 \u53d1\u5e03\u7cfb\u7edf\u6765\u53d1\u7248\u7684\uff0c\u90a3\u4e48\u5c31\u9700\u6309\u7167\u4e0a\u9762\u7684\u8981\u6c42\u5b9a\u4e49\u8fdb\u884c\u4e25\u683c\u5206\u7c7b\uff0c\u56e0\u4e3a\u53d1\u5e03\u7cfb\u7edf\u662f\u4f9d\u8d56\u4e8ecdmb \u7684\u5e94\u7528\u7c7b\u578b\u6765\u5bf9\u4e0d\u540c\u7684\u5e94\u7528\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\u7684\u3002","title":"2.2.3.1.2 \u786e\u5b9a\u5e94\u7528\u7c7b\u578b"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2233-cdmb","text":"\u5e94\u7528\u7684\u65b0\u589e\u6743\u9650 \u53ea\u6709\u201c\u8fd0\u7ef4\u5de5\u7a0b\u90e8\u201d\u7684\u6210\u5458\u624d\u6709\u8fd9\u4e2a\u6743\u9650\uff0c\u5982\u679c\u4f60\u53d1\u73b0 \u627e\u4e0d\u5230\u65b0\u589e\u7684\u5165\u53e3\uff0c\u8bf7\u627e\u8fd0\u7ef4\u90e8\u95e8\u4eba\u5458\uff0c\u5728cmdb\u4e0a\u7684\u90e8\u95e8\u9875\u9762\u628a\u4f60\u52a0\u5230 \u201c\u8fd0\u7ef4\u5de5\u7a0b\u90e8\u201d\u8fd9\u4e2a\u90e8\u95e8\u4e0a\u9762\u6765\u3002 \u5e94\u7528\u7684\u90e8\u7f72\u8def\u5f84 \u4e5f\u662f\u5fc5\u586b\u9009\u9879\uff0c\u5e94\u7528\u90e8\u7f72\u8def\u5f84 \u5728\u53d1\u5e03\u7cfb\u7edf\u4e2d\u591a\u5904\u9700\u8981\u7528\u5230\uff0c\u5982 \uff1a \u542f\u505c\u5e94\u7528\uff0c\u5907\u4efd\u65e5\u5fd7\uff0c\u4e0b\u8f7d\u5305 \u7b49\u4efb\u52a1\u90fd\u9700\u8981\u7528\u5230\uff0c\u6240\u4ee5\u662f\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u5c5e\u6027\u3002 \u90a3\u4e48\u5e94\u7528\u7684\u90e8\u7f72\u8def\u5f84\u600e\u4e48\u586b\u5199\u5462\uff1f\u4e5f\u662f\u6309\u7167\u5e94\u7528\u5206\u7c7b\u6765\u586b\u5199 web ``` /home/product/data/webapps/appname \u5982\uff1a /home/product/data/webapps/saofu-shop-shop \u5f53\u4e00\u53f0\u4e3b\u673a\u4e0a\u6709\u591a\u4e2a web \u5e94\u7528\u65f6\uff0c\u5c31\u9700\u8981\u7528\u7aef\u53e3\u53f7\u6765\u533a\u5206 /home/product/data/webapps8030/appname \u5982\uff1a /home/product/data/webapps8030/invoice-web-shop ``` mod /home/product/data/mods/appname \u5982\uff1a /home/product/data/mods/mall-mod-dal web+mod web+mod \u7684\u7c7b\u578b\u4e00\u822c\u662f\u5386\u53f2\u9057\u7559\u5e94\u7528\uff0c\u65b0\u589e\u4e00\u822c\u5f88\u5c11\u662f\u8fd9\u4e2a\u7c7b\u578b\u3002 web+mod\u7684\u7c7b\u578b\uff0c\u90e8\u7f72\u8def\u5f84\u65e2\u6709\u91c7\u53d6 web \u7c7b\u578b\u7684\uff0c\u4e5f\u6709\u91c7\u53d6mod \u7c7b\u578b\u7684\uff0c\u5982\u679c\u7684\u786e\u662f\u9700\u8981\u65b0\u589e\uff0c\u5efa\u8bae\u8ddf\u8fd0\u7ef4\u90e8\u95e8\u8d44\u6df1\u540c\u4e8b\u54a8\u8be2\u5e76\u8be2\u95ee\u5f00\u53d1\u7684\u76f8\u5173\u60c5\u51b5\u3002 dubbo-consumer \u6309mod \u7c7b\u578b\u7684\u89c4\u5219\u6765\u6dfb\u52a0\u5373\u53ef spring \u6309mod \u7c7b\u578b\u7684\u89c4\u5219\u6765\u6dfb\u52a0\u5373\u53ef static /home/product/data/nginx/appname \u5982\uff1a /home/product/data/nginx/pinka-web-substation-frontend","title":"2.2.3.3 \u5728cdmb \u7684\u5e94\u7528\u9875\u9762\u8fdb\u884c\u5e94\u7528\u65b0\u589e"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2234","text":"\u5e94\u7528\u65b0\u589e\u5b8c\u6210\u540e\uff0c\u5728\u5e94\u7528\u9875\u9762 \u663e\u793a\u51fa\u201c\u64cd\u4f5c\u201d\u680f\uff0c\u5728\u201c\u64cd\u4f5c\u201d\u680f\u4e0b\u9762\u6709\u4e2a\u201c\u7ed1\u5b9a\u5e94\u7528\u201d\u7684\u6309\u94ae\uff0c\u641c\u7d22\u51fa\u65b0\u7533\u8bf7\u7684\u4e3b\u673a\uff0c\u5e76\u7ed1\u5b9a\u5230\u76ee\u6807\u5e94\u7528\u4e0a","title":"2.2.3.4 \u7ed1\u5b9a\u4e3b\u673a\u4fe1\u606f"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2235","text":"\u5982\u679c\u8be5\u5e94\u7528\u8fd8\u9700\u8981\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u867d\u7136\u4e0d\u5f71\u54cd\u53d1\u7248\uff0c\u4f46\u4e3a\u540e\u9762\u7684\u7ef4\u62a4\uff0c\u8fd8\u662f\u9700\u8981\u5230\u201c\u6570\u636e\u5e93\u540d\u79f0\u201d\u9875\u9762 \u8fdb\u884c \u6570\u636e\u5e93 \u4e0e \u5e94\u7528\u7684\u7ed1\u5b9a\u3002","title":"2.2.3.5 \u7ed1\u5b9a\u6570\u636e\u5e93\u4fe1\u606f"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#3cmdb","text":"\u4e3b\u673a \u5e94\u7528 \u6570\u636e\u5e93 \u4ee5\u4e0a\u4e09\u8005 \u662fcmdb \u7684\u4e09\u5927\u57fa\u77f3\uff0c\u4e5f\u662fcmdb \u63d0\u4f9b\u7684\u6700\u4e3b\u8981\u7684\u529f\u80fd\uff0c\u5e94\u7528\u9700\u8981\u4e0e\u4e3b\u673a\u8fdb\u884c\u7ed1\u5b9a\uff0c\u6570\u636e\u5e93\u5b9e\u4f8b\u4e5f\u9700\u8ddf\u4e3b\u673a\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5e94\u7528\u4e0e\u6570\u636e\u5e93\u4e4b\u95f4\u4e5f\u6709\u4e2a\u7ed1\u5b9a\u5173\u7cfb\u3002 \u4e0b\u56fe\u662f cmdb\u53ea\u8981\u8d44\u6e90\u7684\u6570\u636e\u8868\u8bbe\u8ba1\uff08ps:\u4e0d\u6e05\u6670\u7684\u8bdd \u8bf7\u67e5\u770bsvn\uff1a devops/\u8fd0\u7ef4\u5f00\u53d1/\u56fe/cmdb\u6570\u636e\u5e93\u8868\u8bbe\u8ba1.jpg\uff09","title":"3.CMDB\u4e3b\u8981\u8d44\u6e90\u5bf9\u8c61\u6570\u636e\u5e93\u8bbe\u8ba1"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#_1","text":"\u4e3b\u673a\u7c7b\u578b\u6709\uff1a \u4e91\u4e3b\u673a ucloud\u7269\u7406\u673a \u6df7\u5408\u4e91\u865a\u62df\u673a \u6df7\u5408\u4e91\u7269\u7406\u673a \u4fe1\u606f\u66f4\u65b0\u6765\u6e90\u6709\uff1a ucloud \u63a5\u53e3\u83b7\u53d6\u4e91\u4e3b\u673a/ucloud\u7269\u7406\u673a \u7684\u4fe1\u606f\u65b0\u589e\u548c\u66f4\u65b0\uff08\u6bcf\u59298:30\u5b9a\u65f6\u811a\u672c\u66f4\u65b0\uff09 cmdb-agent \u83b7\u53d6\u6df7\u5408\u4e91\u865a\u62df\u673a/\u6df7\u5408\u4e91\u7269\u7406\u673a \u7684\u4fe1\u606f\u65b0\u589e\u548c\u66f4\u65b0\uff08cmdb-agent \u6bcf\u5c0f\u65f6\u4e0a\u62a5\u4e00\u6b21\uff09","title":"\u4e3b\u673a"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#_2","text":"\u6807\u7b7e\u662f \u9664\u4e86\u6309\u90e8\u95e8\u5bf9\u4e3b\u673a /\u5e94\u7528/\u6570\u636e\u5e93\u8fd9\u4e9b\u8d44\u6e90\u5206\u7c7b\u5916\uff0c\u4e00\u79cd\u66f4\u4e3a\u7075\u6d3b\u7684\u5bf9\u8d44\u6e90\u8fdb\u884c\u5206\u7c7b\u7684\u65b9\u6cd5\u3002 \u90a3\u4e48\u6807\u7b7e\u662f\u600e\u4e48\u8bbe\u8ba1\u5b9e\u73b0\u7684\u5462\uff1f \u4e3b\u8981\u662f\u901a\u8fc7cmdb_tag /cmdb_tag_resource\u4e24\u5f20\u8868\u7684\u8bbe\u8ba1\u6765\u5b9e\u73b0\u7684\u3002 cmdb_tag_resource\u7684\u5173\u952e\u5b57\u6bb5\u5982\u4e0b\uff1a id tag_id : cmdb_tag\u7684id table_id : \u8d44\u6e90\u7684table_id table_tag : (\u5bf9\u5e94\u7684\u8d44\u6e90\u7c7b\u578b 1: host 2: application 3: ip 4: database 5:ulb) cmdb_tag \u7684\u5173\u952e\u5b57\u6bb5\u5982\u4e0b id name \uff1a \u6807\u7b7e\u540d \u4e0e\u666e\u901a\u7684\u6620\u5c04\u8868\u4e0d\u4e00\u6837\uff0c\u666e\u901a\u7684\u6620\u5c04\u8868 \u53ea\u9700\u628a\u4e24\u79cd\u8d44\u6e90\u7684\u5173\u7cfb\u8054\u7cfb\u8d77\u6765\u5c31\u597d\uff0c \u4f46\u662f\u6211\u4eec\u7684\u6807\u7b7e\u529f\u80fd\u662f\u9700\u8981\u5904\u7406\u591a\u79cd\u8d44\u6e90\uff08\u50cf\u4e0a\u9762\u6240\u8bf4\u7684\u81f3\u5c115+1\u79cd\u5173\u7cfb\uff09\u3002\u90a3\u4e48cmdb_tag_resource \u662f\u600e\u4e48\u5904\u7406\u8fd9\u4e48\u79cd\u8d44\u6e90\u7684\u5462\uff1f \u6211\u4eec\u53ea\u901a\u8fc7 tabel_tag \u548ctable_id \u4e24\u4e2a\u5b57\u6bb5\uff0ctable_tag \u6307\u660e\u8d44\u6e90\u7c7b\u578b,table_id \u6307\u5b9a id ,\u4e24\u8005\u7ed3\u5408\u8fbe\u5230\u67e5\u627e\u4e0d\u540c\u8d44\u6e90\u7684\u76ee\u7684\u3002","title":"\u6807\u7b7e"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#4-cmdb","text":"","title":"4. \u5176\u4ed6\u7cfb\u7edf\u5bf9cmdb \u7684\u4f9d\u8d56"},{"location":"3.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DCMDB%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#41-cmdb","text":"cmdb \u662f\u6574\u4e2a\u8fd0\u7ef4\u7684\u57fa\u77f3\uff0c\u65e0\u8bba\u662f \u76d1\u63a7\u8fd8\u662f\u53d1\u5e03\u7cfb\u7edf\u90fd\u9700\u4f9d\u8d56\u4e8ecmdb\u7684\u4fe1\u606f\u3002 \u53d1\u5e03\u7cfb\u7edf\u5bf9cmdb\u7684\u4f9d\u8d56\u4f53\u73b0\u5728\u4e24\u4e2a\u65b9\u9762\uff1a \u4e00\u4e2a\u662f \u9700\u8981\u4f9d\u8d56cmdb \u83b7\u53d6\u53d1\u7248\u5e94\u7528\u4fe1\u606f\uff08\u7c7b\u578b/\u90e8\u7f72\u8def\u5f84\u7b49\uff09/\u4e3b\u673a\u4fe1\u606f\uff0c\u8fd9\u4e2a\u5728\u53d1\u5e03\u7cfb\u7edf\u7684\u524d\u7aef\u548c\u540e\u7aef\u90fd\u6709cmdb\u7684api \u8c03\u7528\uff0c\u8fd9\u4e9b\u90fd\u662fhttp \u8fde\u63a5 \u4e00\u4e2a\u662f \u53d1\u7248\u7cfb\u7edf\u524d\u7aef \u8fdb\u884c\u53d1\u7248\u65f6\uff0c\u5b9e\u65f6\u66f4\u65b0 \u5e94\u7528\u7248\u672c\u5bf9cmdb \u7684\u4f9d\u8d56\uff0c\u8fd9\u662f\u4e00\u4e2awebsocket\u63a5\u53e3\uff0cpublih-web \u4e0ecmdb-server \u76f4\u8fde","title":"4.1 \u53d1\u5e03\u7cfb\u7edf\u5bf9cmdb\u7684\u4f9d\u8d56"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/","text":"\u53d1\u5e03\u7cfb\u7edf\u7684\u529f\u80fd\u8bbe\u8ba1\u4ecb\u7ecd 1.\u67b6\u6784\u56fe \u672f\u8bed\u4ecb\u7ecd publish-web\uff1a \u53d1\u5e03\u7cfb\u7edf\u524d\u7aef publish-server: \u53d1\u7248\u7cfb\u7edf\u540e\u7aef celery-worker: \u4efb\u52a1\u6d88\u8d39\u8005 publish_plan : \u53d1\u7248\u4efb\u52a1\uff0c\u4e00\u6b21\u53d1\u7248\u662f\u4e00\u4e2a \u53d1\u7248\u4efb\u52a1\uff0c\u6216\u8005\u6307\u5b58\u653e\u53d1\u7248\u4efb\u52a1\u7684\u6570\u636e\u8868\uff08\u4e0b\u540c\uff09 publish_plan_id : \u53d1\u7248\u4efb\u52a1id publish_pattern / pattern : \u53d1\u7248\u6b65\u9aa4 \uff08\u4e00\u4e2a\u53d1\u7248\u4efb\u52a1\u7531\u591a\u4e2a\u53d1\u7248\u6b65\u9aa4\u7ec4\u6210\uff09 publish_pattern_id /pattern_id:\u53d1\u7248\u6b65\u9aa4id publish_application\uff1a \u53d1\u7248\u5e94\u7528\uff0c\u4e00\u6b21\u53d1\u7248\u4efb\u52a1\u5bf9\u5e94\u7684\u5e94\u7528 publish_host : \u53d1\u5e03\u4e3b\u673a\uff0c\u4e00\u6b21\u53d1\u7248\u4efb\u52a1\u5bf9\u5e94\u54ea\u4e9b\u4e3b\u673a action : \u53d1\u5e03\u7cfb\u7edf\u5b9a\u4e49\u7684 \u4e00\u7cfb\u5217\u52a8\u4f5c, \u4e00\u4e2a\u53d1\u5e03\u6b65\u9aa4\u5bf9\u5e94\u4e00\u4e2aaction \u5982 1: \u53d1\u5e03 2: \u505c\u670d\u52a1 3: \u63d0\u793a 11: \u56de\u6eda\u53d1\u5e03 12\uff1a\u56de\u6eda\u542f\u52a8\u670d\u52a1 13: \u56de\u6eda\u63d0\u793a 14: \u56de\u6eda\u505c\u6b62\u670d\u52a1 19:\u56de\u6eda\u5230\u4e00\u534a\u8fdb\u884c\u505c\u987f task : \u53d1\u5e03\u7cfb\u7edf\u5b9a\u4e49\u7684\u539f\u5b50\u4efb\u52a1\uff0c\u4e00\u4e2aaction \u5bf9\u5e94\u7740\u4e00\u7cfb\u5217\u7684task \u5982 \uff1a [\"\u4e0b\u8f7d\u5305\u5230\u76ee\u6807\u670d\u52a1\u5668\",\"\u505c\u6b62nginx\",\"\u505c\u6b62\u5e94\u7528\",\"\u5907\u4efd\u65e5\u5fd7\", \"\u6539\u8f6f\u94fe\u5230\u65b0\u7248\u672c\",\"\u66f4\u65b0cmdb\u4fe1\u606f\",\"\u542f\u52a8\u5e94\u7528\",\"\u542f\u52a8nginx\"] publish_action_task\uff1a \u4e00\u4e2a\u5b58\u653eaction \u548ctask \u6620\u5c04\u5173\u7cfb\u7684\u8868 2.\u529f\u80fd\u6a21\u5757 \u53d1\u5e03\u7cfb\u7edf\u7684\u529f\u80fd\u8bf4\u8d77\u6765\u4e5f\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u4e3b\u8981\u5c31\u662f \u521b\u5efa\u53d1\u7248 \u6267\u884c\u53d1\u7248 \u56de\u6eda\u53d1\u7248 \u5f53\u7136\u8fd9\u662f\u7b80\u5316\u51fa\u6765\u7684\u4e09\u5927\u529f\u80fd\uff0c\u5b83\u91cc\u9762\u662f\u5305\u542b\u4e86\u5f88\u591a\u7ec6\u8282\u7684\uff0c\u4e0b\u9762\u5c31\u4e3b\u8981\u8bb2\u4e0b\u8fd9\u4e9b\u7ec6\u8282\u90e8\u5206\u3002 2.1 \u521b\u5efa\u53d1\u7248 2.1.1\u521b\u5efa\u53d1\u7248\u7684\u89c4\u5219 \u521b\u5efa\u53d1\u7248\u9700\u8981\u9075\u5faa\u4ee5\u4e0b\u7684\u89c4\u5219\u53bb\u521b\u5efa\uff1a \u5e94\u7528\u89c4\u5219\uff0cmod / spring / dubbo-consumer ----> web+mod ----> web/static \u4e3b\u673a\u89c4\u5219\uff0c\u84dd\u7eff\u53d1\u5e03\u4e00\u534a\u4e00\u534a\u5730\u53d1 \u6211\u4eec\u7684\u53d1\u7248\u7cfb\u7edf\u5728\u8bbe\u8ba1\u65f6\uff0c\u628a\u521b\u5efa\u53d1\u7248\u653e\u5728\u4e86\u524d\u7aef\u6765\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u7c98\u8d34\u5e94\u7528\u5305\u5730\u5740\u540e\uff0c\u6b65\u9aa4\u7684\u751f\u6210\u662f\u524d\u7aef\u6765\u5904\u7406\u8fd9\u6837\u7684\u4e00\u4e2a\u903b\u8f91\u3002 2.1.2 \u7c98\u8d34\u5e94\u7528\u7684\u5305\u5730\u5740\u540e\u53d1\u751f\u4e86\u4e9b\u4ec0\u4e48\uff1a \u524d\u7aef\u89e3\u6790\u51fa\u5e94\u7528\u540d\u79f0 \u524d\u7aef\u8bf7\u6c42cmdb \u83b7\u5f97\u8be5\u5e94\u7528\u7684\u5e94\u7528\u7c7b\u578b \u7b49\u4fe1\u606f \u524d\u7aef\u8bf7\u6c42publish-server\u68c0\u6d4b\u5305\u5730\u5740\u7684\u6709\u6548\u6027\uff08\u662f\u5426\u53ef\u4e0b\u8f7d\uff09 \u524d\u7aef\u8bf7\u6c42publish-server \u83b7\u5f97\u4e3b\u673a\u6309\u5e94\u7528 master/slave \u5206\u7c7b\u4fe1\u606f \u524d\u7aef\u6839\u636e \u4ee5\u4e0a\u4fe1\u606f \uff0c\u8fdb\u884c\u53d1\u7248\u6b65\u9aa4\u751f\u6210 \u63d0\u4ea4 \u5230publish-server publish-server \u6839\u636e\u524d\u7aef\u63d0\u4ea4\u8fc7\u6765\u7684\u5404\u4e2a\u53d1\u7248\u6b65\u9aa4\u4fe1\u606f\uff0c \u521b\u5efa publish_project(\u5982\u679c\u662f\u65b0\u5efa)/ publish_plan/publish_application/publish_host/publish_pattern \u8868\u8bb0\u5f55 \u6839\u636e\u63d0\u4ea4\u8fc7\u6765\u7684action( 1: \u53d1\u5e03 2: \u505c\u670d\u52a1 3: \u63d0\u793a \u7b49 )\uff0c\u67e5\u8be2publish_action_task\u8868\uff0c\u83b7\u5f97\u6bcf\u4e2a\u4e3b\u673a\u9700\u8981\u6267\u884c\u7684task,\u5982\u4e0b\u9762 \u662faction:1 application_type: web\u7684\u4e3b\u673a\u6240\u8981\u6267\u884c\u7684task '[\"\u4e0b\u8f7d\u5305\u5230\u76ee\u6807\u670d\u52a1\u5668\",\"\u505c\u6b62nginx\",\"\u505c\u6b62\u5e94\u7528\",\"\u5907\u4efd\u65e5\u5fd7\", \"\u6539\u8f6f\u94fe\u5230\u65b0\u7248\u672c\",\"\u66f4\u65b0cmdb\u4fe1\u606f\",\"\u542f\u52a8\u5e94\u7528\",\"\u542f\u52a8nginx\"]' \u628a\u8fd9\u4e9btask \u521b\u5efa\u5230publish_pattern_task\u8868 \u4ee5\u4e0a\u8868\u8bb0\u5f55\u521b\u5efa\u5b8c\u4e4b\u540e\uff0cpublish-server \u4f1a\u4ece \u5e94\u7528\u7684git \u4ed3\u5e93\u628a\u5305\u62c9\u5230publish-server \u90e8\u7f72\u4e3b\u673a\u7684/home/data \u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5\u63d0\u4ea4\u5b8c \u521b\u5efa\u53d1\u7248\u540e\uff0c\u5728\u53d1\u7248\u5217\u8868\u9875\u9762\u6211\u4eec\u662f\u53ef\u4ee5\u770b\u5230\u5305\u4e0b\u8f7d\u7684\u8fdb\u5ea6\u7684\u3002 2.2 \u6267\u884c\u53d1\u7248 \uff1a \u521b\u5efa\u53d1\u7248 \u5df2\u7ecf\u628a\u5404\u4e2a\u6b65\u9aa4\u8be5\u505a\u4ec0\u4e48\u90fd\u521b\u5efa\u597d\u4e86\uff0c\u6267\u884c\u53d1\u7248\u9700\u8981\u8003\u8651 \u7684\u662f \u4e3b\u673a\u7684 \u5404\u4e2atask \u5982\u4f55\u6267\u884c 2.2.1 \u5728\u201c\u53d1\u7248\u9875\u9762\u201d\u70b9\u51fb\u6267\u884c\u540e\u53d1\u751f\u4e86\u4ec0\u4e48 \uff1a publish-web\uff1a \u5224\u65ad\u51fa\u5f53\u524d\u6267\u884c\u5230\u4e86\u54ea\u4e00\u6b65\uff1f\u83b7\u53d6\u5f85\u6267\u884c\u7684pattern_id \u53d1\u9001pattern_id \u5230publish-server publish-server\u6536\u5230 \u9700\u8981\u6267\u884c\u7684pattern_id \u540e\uff1a \u67e5\u627e\u51fa \u8be5pattern \u4e0b\u7684\u6240\u6709 \u4e3b\u673a \u67e5\u627e\u51fa\u4e3b\u673a\u7684 task \u5217\u8868 \u5206\u4e3b\u673a\uff0c\u628a\u4e3b\u673a\u7684tasks \u6309\u5217\u8868 \u4e32\u8fde\u8d77\u6765 \u628a\u4e32\u8054\u8d77\u6765\u7684tasks \u6254\u5230redis \u6d88\u606f\u961f\u5217\uff0c\u8ba9celery-worker \u53bb\u6267\u884c \u66f4\u65b0 \u8be5pattern \u72b6\u6001\uff0c\u6539\u4e3a\u8fdb\u884c\u4e2d\uff0c\u5e76\u628a\u53d8\u5316\u901a\u8fc7websocket \u63a8\u9001\u5230\u524d\u7aef publish-web \uff1a WebSocket \u83b7\u53d6\u5230pattern\u7684\u53d8\u5316\u72b6\u6001\uff0c\u5e76\u66f4\u65b0\u4e3a\u6267\u884c\u4e2d celery-worker: \u4eceredis\u4e2d\u83b7\u5f97 tasks \u6309\u987a\u5e8f\u4e32\u884c\u6267\u884c\uff0c\u76f4\u5230task \u6267\u884c\u5b8c\u6bd5 \u628atask \u6267\u884c\u5b8c\u540e\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u8bb0\u5f55\u5230\u6570\u636e\u5e93\uff0c\u5e76\u66f4\u65b0pattern \u72b6\u6001 publish-server: \u76d1\u542c\u5230pattern \u72b6\u6001\u5df2\u53d8\u5316\uff0c\u4e0e\u53ca task \u6709\u7ed3\u679c\u8fd4\u56de\uff0c\u901a\u8fc7WebSocket\u63a8\u9001\u5230\u524d\u7aef publish-web: \u66f4\u65b0pattern\u72b6\u6001\uff0c\u66f4\u65b0task\u72b6\u6001 \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u53d1\u7248\u6b65\u9aa4\u7684\u6267\u884c\uff0c\u518d\u6b21\u70b9\u51fb\u6267\u884c\uff0c\u5c31\u4f1a\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4 \u5f80\u4e0b\u6267\u884c\u53d1\u7248\u6b65\u9aa4 2.2.2 task \u6267\u884c\u65b9\u5f0f\u7684\u9009\u62e9 \u9009\u62e9ansible \u6211\u4eec\u7684\u53d1\u5e03\u7cfb\u7edf\u7684\u5f88\u8fdc\u4efb\u52a1\u90fd\u662f\u9700\u8981\u8fde\u63a5\u5230\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u9762\u53bb\u6267\u884c\u7684\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u9009\u62e9\u4e00\u6b3e\u8fdc\u7a0b\u8fde\u63a5\u7684\u5de5\u5177\u3002 \u200b ansible: \u4e00\u4e2a\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u5de5\u5177\uff0c\u901a\u8fc7ssh \u8fde\u63a5\u5230\u8fdc\u7a0b\u4e3b\u673a\uff0c \u4f18\u70b9 \uff1a\u65e0agent ,\u5b89\u88c5\u90e8\u7f72\u7b80\u5355\uff0c\u5b66\u4e60\u6210\u672c\u4f4e\uff0c\u6267\u884c\u547d\u4ee4\u884c \u548capi \u5f62\u5f0f\u8c03\u7528 \u7f3a\u70b9\uff1a \u4f46\u4e3b\u673a\u89c4\u6a21\u4e0a\u5343\u53f0\u540e\uff0c\u96c6\u4e2d\u5f0f\u7684\u6a21\u5f0f\u5bfc\u81f4\u6267\u884c\u6548\u7387\u8fc7\u4f4e\uff0c\u8868\u73b0\u4e3a\u6162 \u200b saltstack: \u540c\u7c7b\u578b\u7684\u4e00\u4e2a\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u5de5\u5177 \u4f18\u70b9\uff1a server-agent \u7684\u6a21\u5f0f\uff0c\u51cf\u8f7bserver\u7684\u538b\u529b\uff0c\u9002\u7528\u4e8e\u5927\u89c4\u6a21\u7684\u7cfb\u7edf \u7f3a\u70b9\uff1a \u9700\u5b89\u88c5agent ,\u5b89\u88c5\u90e8\u7f72\u76f8\u5bf9\u9ebb\u70e6 \u200b \u7ecf\u8fc7\u4ee5\u4e0a\u5bf9\u6bd4\uff0c\u6211\u4eec\u5f53\u524d4-500\u53f0\u7684\u4e3b\u673a\u89c4\u6a21\uff0c\u9009\u62e9ansible\u65b9\u5f0f\u8db3\u4ee5 \u200b \u6211\u4eec\u53d1\u5e03\u7cfb\u7edf\u662f\u91c7\u7528ansible api\u65b9\u5f0f \u53bb\u6267\u884c\u8c03\u7528\uff0c \u200b \u53e6\u53ef\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=21302358 \u9009\u62e9celery celery : \u662f\u4e00\u4e2a \u57fa\u4e8epython\u5f00\u53d1\u7684\u5206\u5e03\u5f0f\u5f02\u6b65\u6d88\u606f\u4efb\u52a1\u961f\u5217\uff0c\u901a\u8fc7\u5b83\u53ef\u4ee5\u8f7b\u677e\u7684\u5b9e\u73b0\u4efb\u52a1\u7684\u5f02\u6b65\u5904\u7406\u3002 \u8fdc\u7a0b\u4e3b\u673a\u6267\u884c\u4efb\u52a1\u4e00\u822c\u662f\u4e2a\u8017\u65f6\u4efb\u52a1\uff0c\u5982\u679c\u662f\u91c7\u7528\u540c\u6b65\u6267\u884c\u7684\u65b9\u5f0f\uff0c\u5373\u4f7f\u5f0010\u4e2a20\u4e2a\u7684\u8fdb\u7a0b\uff0c\u53ef\u80fd\u4e00\u4e24\u4e2a\u4eba\u53d1\u7248\u5c31\u628a\u6211\u4eec\u6574\u4e2a\u53d1\u5e03\u7cfb\u7edf\u7684\u8fdb\u7a0b\u7ed9\u963b\u585e\u4f4f\u4e86\uff0c \u8fd9\u65f6\u5019\u5c31\u9700\u8981\u8003\u8651\u5230 \u5f02\u6b65\u975e\u963b\u585e\u7684\u65b9\u5f0f\u3002 publish-server \u53ea\u9700\u628a\u9700\u8981\u8fd0\u884c\u7684task \u6254\u5230\u6d88\u606f\u961f\u5217\uff0c\u5e76\u5199\u597d\u56de\u8c03\u51fd\u6570 \u5373\u53ef\uff0ccelery\u4f1a\u505a\u597d\u4efb\u52a1\u8c03\u5ea6\uff0c\u6267\u884ctask \u5e76\u628a\u7ed3\u679c\u6839\u636e\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u5904\u7406 \u53d1\u5e03\u7cfb\u7edf\u4f7f\u7528celery\u66f4\u591a\u4fe1\u606f \u53ef\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=20550451 \u90a3\u4e48\u8fd9\u6837\u5c31\u4f1a\u6709\u4e2a\u95ee\u9898\uff0chttp \u8bf7\u6c42\u8bb2\u7a76\u7684\u662f \u4e00\u95ee\u4e00\u7b54\u5f62\u5f0f \u7684\u54cd\u5e94\u6a21\u5f0f\u554a\uff0c\u4f60\u4f60\u4f60\u4efb\u52a1\u8fd8\u6ca1\u6267\u884c\u5b8c\u5c31\u8fd4\u56de\u7ed3\u679c\u7ed9\u6211\u4e86\uff0c\u8bf4\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff0c \u90a3\u4e48\u6211\u4ec0\u4e48\u65f6\u5019\u624d\u76f4\u5230 \u4efb\u52a1\u6267\u884c\u6210\u529f\u5462\uff1f \u9009\u62e9WebSocket WebSocket \u662f\u4e00\u79cd\u7f51\u7edc\u901a\u4fe1\u534f\u8bae\uff0c\u4e0d\u540c\u4e8ehttp,\u5b83\u5141\u8bb8\u53cc\u5411\u901a\u4fe1\u548c\u4fdd\u6301\u4e0d\u65ad\u5f00\u3002 \u5728WebSocket \u51fa\u6765\u524d\u91c7\u7528\u7684\u662f http \u957f\u8f6e\u8be2\u7684\u65b9\u5f0f\uff0c\u9694\u4e00\u6bb5\u65f6\u95f4\u5c31\u53bb\u95ee\u4e00\u4e0b\uff0c\u4efb\u52a1\u6267\u884c\u597d\u4e86\u6ca1\u5440\uff0c\u76f4\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7ed3\u679c\u3002http \u957f\u8f6e\u8be2\u7684\u7f3a\u70b9\u662f\u5f88\u660e\u663e\u7684\uff0chttp \u8fde\u63a5\u5e95\u5c42\u7684tcp \u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\u662f\u6bd4\u8f83\u6d88\u8017CPU\u7684\uff0c\u800c\u4e14\u5f88\u591a\u8fde\u63a5\u662f\u65e0\u6548\u7684\uff0c\u53ea\u6709\u6700\u540e\u4e00\u6b21\u8fd4\u56de\u7ed3\u679c\u7684\u90a3\u6b21 \u624d\u662f\u6211\u4eec\u771f\u6b63\u60f3\u8981\u7684\u3002 \u65e2\u7136\u4e0d\u65ad\u5730\u5efa\u7acb\u8fde\u63a5\u65ad\u5f00\u8fde\u63a5\u7684\u8fc7\u7a0b\u662f\u5f88\u8017\u8d39\u8d44\u6e90\u7684\uff0c\u90a3\u4e48\u53ef\u4e0d\u53ef\u4ee5 \u53ea\u5efa\u7acb\u4e00\u6b21\u8fde\u63a5\uff0c\u7136\u540ekeep\u4f4f\u4e0d\u65ad\u5f00\u76f4\u5230\u7b49\u5230\u60f3\u8981\u7684\u7ed3\u679c\u8fd4\u56de\u5462\uff1f\u6280\u672f\u5c31\u662f\u56e0\u4e3a\u8fd9\u6837\u6709\u4e0d\u540c\u7684\u751f\u4ea7\u9700\u6c42\u53d1\u5c55\u800c\u6765\u7684\uff0cWebSocket \u5e94\u8fd0\u800c\u751f\u3002 WebSocket \u5728\u5efa\u7acb\u8fde\u63a5\u7684\u521d\u671f\u91c7\u7528\u7684\u662fhttp\u8fde\u63a5\uff0c\u8fde\u63a5\u5efa\u597d\u540e\u5347\u7ea7\u4e3a websocket,\u5141\u8bb8\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u53cc\u5411\u901a\u4fe1\u3002\u5b9e\u9645\u4e0a \u5728\u5efa\u7acb\u4e86 WebSocket \u7684\u8fde\u63a5\u540e\uff0c\u6211\u4eec\u7684server \u7aef\u4e5f\u662f\u5728\u4e0d\u65ad\u5730\u67e5\u8be2\u6570\u636e\u5e93\u6709\u6ca1\u7ed3\u679c\u8fd4\u56de\u3002 \u56de\u5230\u6211\u4eec\u7684\u53d1\u5e03\u7cfb\u7edf\uff0c\u6211\u4eec\u591a\u4e2a\u5730\u65b9\u4f7f\u7528WebSocket\u4f5c\u4e3a\u53d1\u5e03\u72b6\u6001\u7684\u66f4\u65b0\uff0c\u4f7f\u7528\u5230WebSocket\u7684\u5730\u65b9\u6709 \u6bcf\u4e2a\u4e3b\u673atask \u7684\u6267\u884c\u72b6\u6001\u66f4\u65b0 task\u7684\u65e5\u5fd7\u72b6\u6001\u5373 \u53d1\u7248\u9875\u9762\u7684\u201c\u8be6\u7ec6\u201d \u5e94\u7528\u72b6\u6001\uff08service/dubbo/nginx/eruke\uff09 2.2.3 task \u6267\u884c\u903b\u8f91 2.2.3.1 \u53d1\u7248\u7cfb\u7edf\u7684task\u662f\u600e\u4e48\u548cshell\u811a\u672c\u7ed3\u5408\u8d77\u6765\u5230\u4e1a\u52a1\u4e3b\u673a\u4e0a\u6267\u884c\u4efb\u52a1\u7684\u5462\uff1f '[\"\u4e0b\u8f7d\u5305\u5230\u76ee\u6807\u670d\u52a1\u5668\",\"\u505c\u6b62nginx\",\"\u505c\u6b62\u5e94\u7528\",\"\u5907\u4efd\u65e5\u5fd7\", \"\u6539\u8f6f\u94fe\u5230\u65b0\u7248\u672c\",\"\u66f4\u65b0cmdb\u4fe1\u606f\",\"\u542f\u52a8\u5e94 \u7528\",\"\u542f\u52a8nginx\"]' \u4e0a\u9762\u8fd9\u4e9b task \u53ea\u662f\u4e00\u4e2a\u4e2a\u540d\u5b57\uff0c \u771f\u6b63\u5230\u4e1a\u52a1\u4e3b\u673a\u4e0a\u6267\u884c\u7684\u662f shell \u811a\u672c\u5b9a\u4e49\u7684\u4e00\u7cfb\u5217\u52a8\u4f5c\uff0c \u4e5f\u5c31\u662f\u6bcf\u4e2atask name \u80cc\u540e\u662f\u5bf9\u5e94\u7740\u4e00\u4e2a\u4e2ashell/python\u811a\u672c\u7684\uff0c\u8fd9\u79cd\u5bf9\u5e94\u5173\u7cfb\uff0c\u6211\u4eec\u662f\u5728publish_script \u8fd9\u4e2a\u6570\u636e\u8868\u91cc\u5bf9\u5e94\u8d77 \u6765\u7684\uff0c\u4e0b\u56fe\u5c31\u662f\u6211\u4eec\u7684publish_script \u8868 2.2.3.2 \u53d1\u5e03\u7cfb\u7edf\u7684 action \u662f\u600e\u4e48\u548c task \u5bf9\u5e94\u8d77\u6765\u7684\u5462\uff1f action \u4e0e\u53catask \u7684\u542b\u4e49\u8bf7\u53c2\u89c1\u4e0a\u6587\u7684\u672f\u8bed\u4ecb\u7ecd \u901a\u8fc7\u4e00\u5f20 publish_action_task \u7684\u8868\uff0c\u6211\u4eec\u628a\u4e8c\u8005\u5173\u8054\u8d77\u6765\uff0c\u540c\u4e00action ,\u4e0d\u540c\u7684\u5e94\u7528\u7c7b\u578b \u5bf9\u5e94\u7684task \u4e5f\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5982\u679c\u540e\u9762\u9700\u8981 \u4fee\u6539\u53d1\u5e03 \u8fd9\u4e2aaction\u5bf9\u5e94\u7684task,\u90a3\u4e48\u4fee\u6539\u8fd9\u5f20\u6570\u636e\u8868\u5373\u53ef\u3002 2.2.3.3 \u4e00\u53f0\u4e3b\u673a\u6709\u591a\u4e2a\u4efb\u52a1\uff0c\u662f\u600e\u4e48\u63a7\u5236\u5b83\u7684\u6267\u884c\u987a\u5e8f\u7684\u5462\uff1f** \u5404\u4e2atask\u6211\u4eec\u4f1a\u521b\u5efa\u4e00\u4e2a\u94fe\u8868\uff0c\u4e00\u4e2atask\u6210\u529f\u540e\u5728\u5b83\u7684\u56de\u8c03\u91cc\u53bb\u8c03\u7528\u4e0b\u4e00\u4e2atask ,\u76f4\u5230\u6700\u540e\u4e00\u4e2atask \u6267\u884c\u5b8c\u6210\u3002 2.2.3.4 \u4e00\u4e2a\u6b65\u9aa4\u91cc\u6709\u591a\u53f0\u4e3b\u673a\uff0c\u5b83\u4eec\u662f\u5e76\u884c\u8fd8\u662f\u4e32\u884c\u6267\u884c\u5462\uff1f\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f \u5b83\u4eec\u662f\u5e76\u884c\u6267\u884c\u7684\u3002 \u6211\u4eec\u5728\u90e8\u7f72\u53d1\u5e03\u7cfb\u7edf\u7ed9\u65f6\uff0c\u9664\u4e86\u4f1a\u542f\u52a8publish-server \u5916\uff0c\u8fd8\u4f1a\u542f\u52a8celery-worker \u3002 publish-server\u76f8\u5f53\u4e8e\u662f\u4e2a\u4efb\u52a1\u7684\u751f\u4ea7\u8005\uff0ccelery-worker \u4f5c\u4e3a\u4efb\u52a1\u7684\u6d88\u8d39\u8005\uff0credis\u4f5c\u4e3a\u4e8c\u8005\u95f4\u7684\u6d88\u606f\u4e2d\u8f6c\uff0c\u8d77\u5230\u89e3\u8026\u548c\u7f13\u51b2\u7684\u4f5c\u7528\u3002\u6211\u4eec\u7684celery-worker \u662f\u4e0d\u6b62\u4e00\u4e2a\u7684\uff0c\u5177\u6709\u591a\u4e2a\u8fdb\u7a0b\u7684celery-worker\u540c\u65f6\u5728\u8dd1\uff0c\u90fd\u4eceredis \u4e0a\u53bb\u83b7\u53d6\u5f85\u6267\u884c\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u4efb\u52a1\u7684\u8c03\u5ea6\u548c\u5206\u914d\u90fd\u662fcelery \u5e2e\u6211\u4eec\u5b8c\u6210\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6765\u5b9e\u73b0\u591a\u4e2a\u4e3b\u673a\u7684task\u5e76\u884c\u6267\u884c\u3002\u5982\u4e0b\u56fe\u7684celery\u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u5f0f\uff08\u6211\u4eec\u4e3b\u8981\u4efb\u52a1\u8d70\u7684\u662f\u4e0b\u56fe\u7684\u8fd9\u4e2a\u6a21\u5f0f\uff0c\u8fd8\u6709\u4e2a publish-worker\u4e3b\u673a\u4e0a\u7684celery-work \u4e13\u95e8\u662f\u67e5\u8be2\u72b6\u6001\u7684\uff0ctask\u7ed3\u679c\u5b58\u50a8\u91c7\u7528\u7684\u4e5f\u662fredis\uff0c\u5177\u4f53\u53c2\u89c1\u6211\u4eec\u67b6\u6784\u56fe\uff09 2.3 \u53d1\u5e03\u7cfb\u7edf\u5305\u53ca\u811a\u672c\u7684\u6d41\u8f6c\u8fc7\u7a0b \u603b\u7ed3\u4e0b \u4e0a\u9762\u53d1\u5e03\u7cfb\u7edf\u5305\u7684\u6d41\u8f6c\u8fc7\u7a0b\uff0c\u5982\u4e0b \u53d1\u5e03\u7cfb\u7edf \u811a\u672c\u7684\u6d41\u8f6c\u8fc7\u7a0b 2.4\u521b\u5efa\u56de\u6eda\u4e0e\u6267\u884c \u521b\u5efa\u56de\u6eda\u7684\u89c4\u5219 \u521b\u5efa\u56de\u6eda\u7c7b\u4f3c\u4e8e\u521b\u5efa\u53d1\u7248\uff0c\u4f46\u4e0d\u540c\u7684\u662f \u521b\u5efa\u56de\u6eda\u4e0e\u53d1\u7248\u662f\u76f8\u53cd\u7684\u8fc7\u7a0b\uff0c\u5e94\u7528\u7684\u53d1\u7248\u987a\u5e8f\u662f\u76f8\u53cd\u7684\uff0cmod / spring / dubbo-consumer <<---- web+mod <<---- web/static \u56de\u6eda\u9700\u8981\u5224\u65ad\u5f53\u524d\u7684\u6267\u884c\u72b6\u6001\uff0c\u53d1\u7248\u8005\u53ef\u4ee5\u5728\u53d1\u7248\u8fc7\u7a0b\u4e2d\u7b2c\u4e00\u6b65\u6267\u884c\u4e4b\u540e\u7684\u4efb\u610f\u4e00\u6b65\u6267\u884c\u56de\u6eda \u5728\u6784\u5efa\u56de\u6eda\u6b65\u9aa4\u65f6\uff0c\u9075\u5faa\u7684\u5c31\u662f\u4e0a\u9762\u8fd9\u4e24\u4e2a\u539f\u5219\uff0c\u6267\u884c\u56de\u6eda\u6b65\u9aa4\u7684\u8fc7\u7a0b \u8ddf\u6267\u884c \u53d1\u7248\u8fc7\u7a0b\u65e0\u5f02\u3002 \u53d1\u7248\u9875\u9762\u70b9\u51fb\u56de\u6eda\u540e\u53d1\u751f\u4e86\u4ec0\u4e48? publish-web\uff1a \u4f20\u9012\u5f53\u524dpublish_plan_id \u5230\u540e\u7aef\uff0c\u5e76\u7b49\u5f85\u56de\u6eda\u6b65\u9aa4\u7684\u8fd4\u56de publish-server: \u6536\u5230 publish_plan_id\u540e\uff0c\u628a\u72b6\u6001\u4e3a\u6210\u529f\u6216\u5931\u8d25\u7684publish_pattern \u5bf9\u5e94\u7684application host \u9009\u62e9\u51fa\u6765 \u6839\u636e\u56de\u6eda\u539f\u5219\u751f\u6210\u56de\u6eda\u6b65\u9aa4 \u5e76\u5199\u5165\u5230\u6570\u636e\u5e93 \u8fd4\u56de\u56de\u6eda\u6b65\u9aa4\u5230\u524d\u7aef publish-web : \u628a\u56de\u6eda\u6b65\u9aa4\u66f4\u65b0\u5230\u9875\u9762 \u8fd9\u6837\u56de\u6eda\u6b65\u9aa4\u5c31\u5df2\u751f\u6210\uff0c\u63a5\u4e0b\u6765\u7684\u6267\u884c \u5c31\u8ddf\u6b63\u5e38\u53d1\u7248\u7684\u6267\u884c\u8fc7\u7a0b\u662f\u4e00\u6837\u7684\u4e86\u3002 3. \u6570\u636e\u5e93\u8bbe\u8ba1 \u5177\u4f53\u4ecb\u7ecd\u53c2\u89c1 wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=21311053 \u6dfb\u52a0\u4e0b\u56fe\u4f5c\u8f85\u52a9\u7406\u89e3\u4e0a\u9762\u7684\u6570\u636e\u8868\u7ed3\u6784\uff08\u6765\u6e90\u4e8e\u7f57\u603b\uff09 4. \u6743\u9650\u8bbe\u7f6e \u91c7\u7528ldap\u767b\u5f55\u9a8c\u8bc1\uff0c\u4e3b\u8981\u901a\u8fc7\u4e09\u5f20\u8868\u6765\u5206\u914d\u6743\u9650\uff1a \u8868permission: \u5177\u6709\u54ea\u4e9b\u6743\u9650 \u8868role: \u5177\u6709\u54ea\u4e9b\u89d2\u8272 \u8868 role-permission : \u5b9a\u4e49\u54ea\u4e9b\u89d2\u8272\u5177\u6709\u54ea\u4e9b\u6743\u9650 \u8868user: \u5b9a\u4e49\u7528\u6237\uff0c \u53ea\u6709\u91c7\u7528\u8fc7ldap \u767b\u5f55\u8fc7\u6211\u4eec\u7cfb\u7edf\u7684\u7528\u6237\u624d\u4f1a\u8bb0\u5f55\u5728\u6b64\u8868\u4e2d \u8868 user-role \uff1a \u5b9a\u4e49\u7528\u6237\u5206\u914d\u5230\u54ea\u4e9b\u89d2\u8272 \u53e6\u53ef\u8bf7\u53c2\u89c1 wiki http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28610080 \u8868permission \u7684\u5185\u5bb9","title":"publish\u529f\u80fd\u4ecb\u7ecd"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#_1","text":"","title":"\u53d1\u5e03\u7cfb\u7edf\u7684\u529f\u80fd\u8bbe\u8ba1\u4ecb\u7ecd"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#1","text":"","title":"1.\u67b6\u6784\u56fe"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#_2","text":"publish-web\uff1a \u53d1\u5e03\u7cfb\u7edf\u524d\u7aef publish-server: \u53d1\u7248\u7cfb\u7edf\u540e\u7aef celery-worker: \u4efb\u52a1\u6d88\u8d39\u8005 publish_plan : \u53d1\u7248\u4efb\u52a1\uff0c\u4e00\u6b21\u53d1\u7248\u662f\u4e00\u4e2a \u53d1\u7248\u4efb\u52a1\uff0c\u6216\u8005\u6307\u5b58\u653e\u53d1\u7248\u4efb\u52a1\u7684\u6570\u636e\u8868\uff08\u4e0b\u540c\uff09 publish_plan_id : \u53d1\u7248\u4efb\u52a1id publish_pattern / pattern : \u53d1\u7248\u6b65\u9aa4 \uff08\u4e00\u4e2a\u53d1\u7248\u4efb\u52a1\u7531\u591a\u4e2a\u53d1\u7248\u6b65\u9aa4\u7ec4\u6210\uff09 publish_pattern_id /pattern_id:\u53d1\u7248\u6b65\u9aa4id publish_application\uff1a \u53d1\u7248\u5e94\u7528\uff0c\u4e00\u6b21\u53d1\u7248\u4efb\u52a1\u5bf9\u5e94\u7684\u5e94\u7528 publish_host : \u53d1\u5e03\u4e3b\u673a\uff0c\u4e00\u6b21\u53d1\u7248\u4efb\u52a1\u5bf9\u5e94\u54ea\u4e9b\u4e3b\u673a action : \u53d1\u5e03\u7cfb\u7edf\u5b9a\u4e49\u7684 \u4e00\u7cfb\u5217\u52a8\u4f5c, \u4e00\u4e2a\u53d1\u5e03\u6b65\u9aa4\u5bf9\u5e94\u4e00\u4e2aaction \u5982 1: \u53d1\u5e03 2: \u505c\u670d\u52a1 3: \u63d0\u793a 11: \u56de\u6eda\u53d1\u5e03 12\uff1a\u56de\u6eda\u542f\u52a8\u670d\u52a1 13: \u56de\u6eda\u63d0\u793a 14: \u56de\u6eda\u505c\u6b62\u670d\u52a1 19:\u56de\u6eda\u5230\u4e00\u534a\u8fdb\u884c\u505c\u987f task : \u53d1\u5e03\u7cfb\u7edf\u5b9a\u4e49\u7684\u539f\u5b50\u4efb\u52a1\uff0c\u4e00\u4e2aaction \u5bf9\u5e94\u7740\u4e00\u7cfb\u5217\u7684task \u5982 \uff1a [\"\u4e0b\u8f7d\u5305\u5230\u76ee\u6807\u670d\u52a1\u5668\",\"\u505c\u6b62nginx\",\"\u505c\u6b62\u5e94\u7528\",\"\u5907\u4efd\u65e5\u5fd7\", \"\u6539\u8f6f\u94fe\u5230\u65b0\u7248\u672c\",\"\u66f4\u65b0cmdb\u4fe1\u606f\",\"\u542f\u52a8\u5e94\u7528\",\"\u542f\u52a8nginx\"] publish_action_task\uff1a \u4e00\u4e2a\u5b58\u653eaction \u548ctask \u6620\u5c04\u5173\u7cfb\u7684\u8868","title":"\u672f\u8bed\u4ecb\u7ecd"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2","text":"\u53d1\u5e03\u7cfb\u7edf\u7684\u529f\u80fd\u8bf4\u8d77\u6765\u4e5f\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u4e3b\u8981\u5c31\u662f \u521b\u5efa\u53d1\u7248 \u6267\u884c\u53d1\u7248 \u56de\u6eda\u53d1\u7248 \u5f53\u7136\u8fd9\u662f\u7b80\u5316\u51fa\u6765\u7684\u4e09\u5927\u529f\u80fd\uff0c\u5b83\u91cc\u9762\u662f\u5305\u542b\u4e86\u5f88\u591a\u7ec6\u8282\u7684\uff0c\u4e0b\u9762\u5c31\u4e3b\u8981\u8bb2\u4e0b\u8fd9\u4e9b\u7ec6\u8282\u90e8\u5206\u3002","title":"2.\u529f\u80fd\u6a21\u5757"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#21","text":"","title":"2.1 \u521b\u5efa\u53d1\u7248"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#211","text":"\u521b\u5efa\u53d1\u7248\u9700\u8981\u9075\u5faa\u4ee5\u4e0b\u7684\u89c4\u5219\u53bb\u521b\u5efa\uff1a \u5e94\u7528\u89c4\u5219\uff0cmod / spring / dubbo-consumer ----> web+mod ----> web/static \u4e3b\u673a\u89c4\u5219\uff0c\u84dd\u7eff\u53d1\u5e03\u4e00\u534a\u4e00\u534a\u5730\u53d1 \u6211\u4eec\u7684\u53d1\u7248\u7cfb\u7edf\u5728\u8bbe\u8ba1\u65f6\uff0c\u628a\u521b\u5efa\u53d1\u7248\u653e\u5728\u4e86\u524d\u7aef\u6765\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u7c98\u8d34\u5e94\u7528\u5305\u5730\u5740\u540e\uff0c\u6b65\u9aa4\u7684\u751f\u6210\u662f\u524d\u7aef\u6765\u5904\u7406\u8fd9\u6837\u7684\u4e00\u4e2a\u903b\u8f91\u3002","title":"2.1.1\u521b\u5efa\u53d1\u7248\u7684\u89c4\u5219"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#212","text":"\u524d\u7aef\u89e3\u6790\u51fa\u5e94\u7528\u540d\u79f0 \u524d\u7aef\u8bf7\u6c42cmdb \u83b7\u5f97\u8be5\u5e94\u7528\u7684\u5e94\u7528\u7c7b\u578b \u7b49\u4fe1\u606f \u524d\u7aef\u8bf7\u6c42publish-server\u68c0\u6d4b\u5305\u5730\u5740\u7684\u6709\u6548\u6027\uff08\u662f\u5426\u53ef\u4e0b\u8f7d\uff09 \u524d\u7aef\u8bf7\u6c42publish-server \u83b7\u5f97\u4e3b\u673a\u6309\u5e94\u7528 master/slave \u5206\u7c7b\u4fe1\u606f \u524d\u7aef\u6839\u636e \u4ee5\u4e0a\u4fe1\u606f \uff0c\u8fdb\u884c\u53d1\u7248\u6b65\u9aa4\u751f\u6210 \u63d0\u4ea4 \u5230publish-server publish-server \u6839\u636e\u524d\u7aef\u63d0\u4ea4\u8fc7\u6765\u7684\u5404\u4e2a\u53d1\u7248\u6b65\u9aa4\u4fe1\u606f\uff0c \u521b\u5efa publish_project(\u5982\u679c\u662f\u65b0\u5efa)/ publish_plan/publish_application/publish_host/publish_pattern \u8868\u8bb0\u5f55 \u6839\u636e\u63d0\u4ea4\u8fc7\u6765\u7684action( 1: \u53d1\u5e03 2: \u505c\u670d\u52a1 3: \u63d0\u793a \u7b49 )\uff0c\u67e5\u8be2publish_action_task\u8868\uff0c\u83b7\u5f97\u6bcf\u4e2a\u4e3b\u673a\u9700\u8981\u6267\u884c\u7684task,\u5982\u4e0b\u9762 \u662faction:1 application_type: web\u7684\u4e3b\u673a\u6240\u8981\u6267\u884c\u7684task '[\"\u4e0b\u8f7d\u5305\u5230\u76ee\u6807\u670d\u52a1\u5668\",\"\u505c\u6b62nginx\",\"\u505c\u6b62\u5e94\u7528\",\"\u5907\u4efd\u65e5\u5fd7\", \"\u6539\u8f6f\u94fe\u5230\u65b0\u7248\u672c\",\"\u66f4\u65b0cmdb\u4fe1\u606f\",\"\u542f\u52a8\u5e94\u7528\",\"\u542f\u52a8nginx\"]' \u628a\u8fd9\u4e9btask \u521b\u5efa\u5230publish_pattern_task\u8868 \u4ee5\u4e0a\u8868\u8bb0\u5f55\u521b\u5efa\u5b8c\u4e4b\u540e\uff0cpublish-server \u4f1a\u4ece \u5e94\u7528\u7684git \u4ed3\u5e93\u628a\u5305\u62c9\u5230publish-server \u90e8\u7f72\u4e3b\u673a\u7684/home/data \u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5\u63d0\u4ea4\u5b8c \u521b\u5efa\u53d1\u7248\u540e\uff0c\u5728\u53d1\u7248\u5217\u8868\u9875\u9762\u6211\u4eec\u662f\u53ef\u4ee5\u770b\u5230\u5305\u4e0b\u8f7d\u7684\u8fdb\u5ea6\u7684\u3002","title":"2.1.2 \u7c98\u8d34\u5e94\u7528\u7684\u5305\u5730\u5740\u540e\u53d1\u751f\u4e86\u4e9b\u4ec0\u4e48\uff1a"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#22","text":"\u521b\u5efa\u53d1\u7248 \u5df2\u7ecf\u628a\u5404\u4e2a\u6b65\u9aa4\u8be5\u505a\u4ec0\u4e48\u90fd\u521b\u5efa\u597d\u4e86\uff0c\u6267\u884c\u53d1\u7248\u9700\u8981\u8003\u8651 \u7684\u662f \u4e3b\u673a\u7684 \u5404\u4e2atask \u5982\u4f55\u6267\u884c","title":"2.2 \u6267\u884c\u53d1\u7248\uff1a"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#221","text":"publish-web\uff1a \u5224\u65ad\u51fa\u5f53\u524d\u6267\u884c\u5230\u4e86\u54ea\u4e00\u6b65\uff1f\u83b7\u53d6\u5f85\u6267\u884c\u7684pattern_id \u53d1\u9001pattern_id \u5230publish-server publish-server\u6536\u5230 \u9700\u8981\u6267\u884c\u7684pattern_id \u540e\uff1a \u67e5\u627e\u51fa \u8be5pattern \u4e0b\u7684\u6240\u6709 \u4e3b\u673a \u67e5\u627e\u51fa\u4e3b\u673a\u7684 task \u5217\u8868 \u5206\u4e3b\u673a\uff0c\u628a\u4e3b\u673a\u7684tasks \u6309\u5217\u8868 \u4e32\u8fde\u8d77\u6765 \u628a\u4e32\u8054\u8d77\u6765\u7684tasks \u6254\u5230redis \u6d88\u606f\u961f\u5217\uff0c\u8ba9celery-worker \u53bb\u6267\u884c \u66f4\u65b0 \u8be5pattern \u72b6\u6001\uff0c\u6539\u4e3a\u8fdb\u884c\u4e2d\uff0c\u5e76\u628a\u53d8\u5316\u901a\u8fc7websocket \u63a8\u9001\u5230\u524d\u7aef publish-web \uff1a WebSocket \u83b7\u53d6\u5230pattern\u7684\u53d8\u5316\u72b6\u6001\uff0c\u5e76\u66f4\u65b0\u4e3a\u6267\u884c\u4e2d celery-worker: \u4eceredis\u4e2d\u83b7\u5f97 tasks \u6309\u987a\u5e8f\u4e32\u884c\u6267\u884c\uff0c\u76f4\u5230task \u6267\u884c\u5b8c\u6bd5 \u628atask \u6267\u884c\u5b8c\u540e\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u8bb0\u5f55\u5230\u6570\u636e\u5e93\uff0c\u5e76\u66f4\u65b0pattern \u72b6\u6001 publish-server: \u76d1\u542c\u5230pattern \u72b6\u6001\u5df2\u53d8\u5316\uff0c\u4e0e\u53ca task \u6709\u7ed3\u679c\u8fd4\u56de\uff0c\u901a\u8fc7WebSocket\u63a8\u9001\u5230\u524d\u7aef publish-web: \u66f4\u65b0pattern\u72b6\u6001\uff0c\u66f4\u65b0task\u72b6\u6001 \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u53d1\u7248\u6b65\u9aa4\u7684\u6267\u884c\uff0c\u518d\u6b21\u70b9\u51fb\u6267\u884c\uff0c\u5c31\u4f1a\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4 \u5f80\u4e0b\u6267\u884c\u53d1\u7248\u6b65\u9aa4","title":"2.2.1 \u5728\u201c\u53d1\u7248\u9875\u9762\u201d\u70b9\u51fb\u6267\u884c\u540e\u53d1\u751f\u4e86\u4ec0\u4e48\uff1a"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#222-task","text":"","title":"2.2.2 task \u6267\u884c\u65b9\u5f0f\u7684\u9009\u62e9"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#ansible","text":"\u6211\u4eec\u7684\u53d1\u5e03\u7cfb\u7edf\u7684\u5f88\u8fdc\u4efb\u52a1\u90fd\u662f\u9700\u8981\u8fde\u63a5\u5230\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u9762\u53bb\u6267\u884c\u7684\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u9009\u62e9\u4e00\u6b3e\u8fdc\u7a0b\u8fde\u63a5\u7684\u5de5\u5177\u3002 \u200b ansible: \u4e00\u4e2a\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u5de5\u5177\uff0c\u901a\u8fc7ssh \u8fde\u63a5\u5230\u8fdc\u7a0b\u4e3b\u673a\uff0c \u4f18\u70b9 \uff1a\u65e0agent ,\u5b89\u88c5\u90e8\u7f72\u7b80\u5355\uff0c\u5b66\u4e60\u6210\u672c\u4f4e\uff0c\u6267\u884c\u547d\u4ee4\u884c \u548capi \u5f62\u5f0f\u8c03\u7528 \u7f3a\u70b9\uff1a \u4f46\u4e3b\u673a\u89c4\u6a21\u4e0a\u5343\u53f0\u540e\uff0c\u96c6\u4e2d\u5f0f\u7684\u6a21\u5f0f\u5bfc\u81f4\u6267\u884c\u6548\u7387\u8fc7\u4f4e\uff0c\u8868\u73b0\u4e3a\u6162 \u200b saltstack: \u540c\u7c7b\u578b\u7684\u4e00\u4e2a\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u5de5\u5177 \u4f18\u70b9\uff1a server-agent \u7684\u6a21\u5f0f\uff0c\u51cf\u8f7bserver\u7684\u538b\u529b\uff0c\u9002\u7528\u4e8e\u5927\u89c4\u6a21\u7684\u7cfb\u7edf \u7f3a\u70b9\uff1a \u9700\u5b89\u88c5agent ,\u5b89\u88c5\u90e8\u7f72\u76f8\u5bf9\u9ebb\u70e6 \u200b \u7ecf\u8fc7\u4ee5\u4e0a\u5bf9\u6bd4\uff0c\u6211\u4eec\u5f53\u524d4-500\u53f0\u7684\u4e3b\u673a\u89c4\u6a21\uff0c\u9009\u62e9ansible\u65b9\u5f0f\u8db3\u4ee5 \u200b \u6211\u4eec\u53d1\u5e03\u7cfb\u7edf\u662f\u91c7\u7528ansible api\u65b9\u5f0f \u53bb\u6267\u884c\u8c03\u7528\uff0c \u200b \u53e6\u53ef\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=21302358","title":"\u9009\u62e9ansible"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#celery","text":"celery : \u662f\u4e00\u4e2a \u57fa\u4e8epython\u5f00\u53d1\u7684\u5206\u5e03\u5f0f\u5f02\u6b65\u6d88\u606f\u4efb\u52a1\u961f\u5217\uff0c\u901a\u8fc7\u5b83\u53ef\u4ee5\u8f7b\u677e\u7684\u5b9e\u73b0\u4efb\u52a1\u7684\u5f02\u6b65\u5904\u7406\u3002 \u8fdc\u7a0b\u4e3b\u673a\u6267\u884c\u4efb\u52a1\u4e00\u822c\u662f\u4e2a\u8017\u65f6\u4efb\u52a1\uff0c\u5982\u679c\u662f\u91c7\u7528\u540c\u6b65\u6267\u884c\u7684\u65b9\u5f0f\uff0c\u5373\u4f7f\u5f0010\u4e2a20\u4e2a\u7684\u8fdb\u7a0b\uff0c\u53ef\u80fd\u4e00\u4e24\u4e2a\u4eba\u53d1\u7248\u5c31\u628a\u6211\u4eec\u6574\u4e2a\u53d1\u5e03\u7cfb\u7edf\u7684\u8fdb\u7a0b\u7ed9\u963b\u585e\u4f4f\u4e86\uff0c \u8fd9\u65f6\u5019\u5c31\u9700\u8981\u8003\u8651\u5230 \u5f02\u6b65\u975e\u963b\u585e\u7684\u65b9\u5f0f\u3002 publish-server \u53ea\u9700\u628a\u9700\u8981\u8fd0\u884c\u7684task \u6254\u5230\u6d88\u606f\u961f\u5217\uff0c\u5e76\u5199\u597d\u56de\u8c03\u51fd\u6570 \u5373\u53ef\uff0ccelery\u4f1a\u505a\u597d\u4efb\u52a1\u8c03\u5ea6\uff0c\u6267\u884ctask \u5e76\u628a\u7ed3\u679c\u6839\u636e\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u5904\u7406 \u53d1\u5e03\u7cfb\u7edf\u4f7f\u7528celery\u66f4\u591a\u4fe1\u606f \u53ef\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=20550451 \u90a3\u4e48\u8fd9\u6837\u5c31\u4f1a\u6709\u4e2a\u95ee\u9898\uff0chttp \u8bf7\u6c42\u8bb2\u7a76\u7684\u662f \u4e00\u95ee\u4e00\u7b54\u5f62\u5f0f \u7684\u54cd\u5e94\u6a21\u5f0f\u554a\uff0c\u4f60\u4f60\u4f60\u4efb\u52a1\u8fd8\u6ca1\u6267\u884c\u5b8c\u5c31\u8fd4\u56de\u7ed3\u679c\u7ed9\u6211\u4e86\uff0c\u8bf4\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff0c \u90a3\u4e48\u6211\u4ec0\u4e48\u65f6\u5019\u624d\u76f4\u5230 \u4efb\u52a1\u6267\u884c\u6210\u529f\u5462\uff1f","title":"\u9009\u62e9celery"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#websocket","text":"WebSocket \u662f\u4e00\u79cd\u7f51\u7edc\u901a\u4fe1\u534f\u8bae\uff0c\u4e0d\u540c\u4e8ehttp,\u5b83\u5141\u8bb8\u53cc\u5411\u901a\u4fe1\u548c\u4fdd\u6301\u4e0d\u65ad\u5f00\u3002 \u5728WebSocket \u51fa\u6765\u524d\u91c7\u7528\u7684\u662f http \u957f\u8f6e\u8be2\u7684\u65b9\u5f0f\uff0c\u9694\u4e00\u6bb5\u65f6\u95f4\u5c31\u53bb\u95ee\u4e00\u4e0b\uff0c\u4efb\u52a1\u6267\u884c\u597d\u4e86\u6ca1\u5440\uff0c\u76f4\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7ed3\u679c\u3002http \u957f\u8f6e\u8be2\u7684\u7f3a\u70b9\u662f\u5f88\u660e\u663e\u7684\uff0chttp \u8fde\u63a5\u5e95\u5c42\u7684tcp \u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\u662f\u6bd4\u8f83\u6d88\u8017CPU\u7684\uff0c\u800c\u4e14\u5f88\u591a\u8fde\u63a5\u662f\u65e0\u6548\u7684\uff0c\u53ea\u6709\u6700\u540e\u4e00\u6b21\u8fd4\u56de\u7ed3\u679c\u7684\u90a3\u6b21 \u624d\u662f\u6211\u4eec\u771f\u6b63\u60f3\u8981\u7684\u3002 \u65e2\u7136\u4e0d\u65ad\u5730\u5efa\u7acb\u8fde\u63a5\u65ad\u5f00\u8fde\u63a5\u7684\u8fc7\u7a0b\u662f\u5f88\u8017\u8d39\u8d44\u6e90\u7684\uff0c\u90a3\u4e48\u53ef\u4e0d\u53ef\u4ee5 \u53ea\u5efa\u7acb\u4e00\u6b21\u8fde\u63a5\uff0c\u7136\u540ekeep\u4f4f\u4e0d\u65ad\u5f00\u76f4\u5230\u7b49\u5230\u60f3\u8981\u7684\u7ed3\u679c\u8fd4\u56de\u5462\uff1f\u6280\u672f\u5c31\u662f\u56e0\u4e3a\u8fd9\u6837\u6709\u4e0d\u540c\u7684\u751f\u4ea7\u9700\u6c42\u53d1\u5c55\u800c\u6765\u7684\uff0cWebSocket \u5e94\u8fd0\u800c\u751f\u3002 WebSocket \u5728\u5efa\u7acb\u8fde\u63a5\u7684\u521d\u671f\u91c7\u7528\u7684\u662fhttp\u8fde\u63a5\uff0c\u8fde\u63a5\u5efa\u597d\u540e\u5347\u7ea7\u4e3a websocket,\u5141\u8bb8\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u53cc\u5411\u901a\u4fe1\u3002\u5b9e\u9645\u4e0a \u5728\u5efa\u7acb\u4e86 WebSocket \u7684\u8fde\u63a5\u540e\uff0c\u6211\u4eec\u7684server \u7aef\u4e5f\u662f\u5728\u4e0d\u65ad\u5730\u67e5\u8be2\u6570\u636e\u5e93\u6709\u6ca1\u7ed3\u679c\u8fd4\u56de\u3002 \u56de\u5230\u6211\u4eec\u7684\u53d1\u5e03\u7cfb\u7edf\uff0c\u6211\u4eec\u591a\u4e2a\u5730\u65b9\u4f7f\u7528WebSocket\u4f5c\u4e3a\u53d1\u5e03\u72b6\u6001\u7684\u66f4\u65b0\uff0c\u4f7f\u7528\u5230WebSocket\u7684\u5730\u65b9\u6709 \u6bcf\u4e2a\u4e3b\u673atask \u7684\u6267\u884c\u72b6\u6001\u66f4\u65b0 task\u7684\u65e5\u5fd7\u72b6\u6001\u5373 \u53d1\u7248\u9875\u9762\u7684\u201c\u8be6\u7ec6\u201d \u5e94\u7528\u72b6\u6001\uff08service/dubbo/nginx/eruke\uff09","title":"\u9009\u62e9WebSocket"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#223-task","text":"","title":"2.2.3 task \u6267\u884c\u903b\u8f91"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2231-taskshell","text":"'[\"\u4e0b\u8f7d\u5305\u5230\u76ee\u6807\u670d\u52a1\u5668\",\"\u505c\u6b62nginx\",\"\u505c\u6b62\u5e94\u7528\",\"\u5907\u4efd\u65e5\u5fd7\", \"\u6539\u8f6f\u94fe\u5230\u65b0\u7248\u672c\",\"\u66f4\u65b0cmdb\u4fe1\u606f\",\"\u542f\u52a8\u5e94 \u7528\",\"\u542f\u52a8nginx\"]' \u4e0a\u9762\u8fd9\u4e9b task \u53ea\u662f\u4e00\u4e2a\u4e2a\u540d\u5b57\uff0c \u771f\u6b63\u5230\u4e1a\u52a1\u4e3b\u673a\u4e0a\u6267\u884c\u7684\u662f shell \u811a\u672c\u5b9a\u4e49\u7684\u4e00\u7cfb\u5217\u52a8\u4f5c\uff0c \u4e5f\u5c31\u662f\u6bcf\u4e2atask name \u80cc\u540e\u662f\u5bf9\u5e94\u7740\u4e00\u4e2a\u4e2ashell/python\u811a\u672c\u7684\uff0c\u8fd9\u79cd\u5bf9\u5e94\u5173\u7cfb\uff0c\u6211\u4eec\u662f\u5728publish_script \u8fd9\u4e2a\u6570\u636e\u8868\u91cc\u5bf9\u5e94\u8d77 \u6765\u7684\uff0c\u4e0b\u56fe\u5c31\u662f\u6211\u4eec\u7684publish_script \u8868","title":"2.2.3.1 \u53d1\u7248\u7cfb\u7edf\u7684task\u662f\u600e\u4e48\u548cshell\u811a\u672c\u7ed3\u5408\u8d77\u6765\u5230\u4e1a\u52a1\u4e3b\u673a\u4e0a\u6267\u884c\u4efb\u52a1\u7684\u5462\uff1f"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2232-action-task","text":"action \u4e0e\u53catask \u7684\u542b\u4e49\u8bf7\u53c2\u89c1\u4e0a\u6587\u7684\u672f\u8bed\u4ecb\u7ecd \u901a\u8fc7\u4e00\u5f20 publish_action_task \u7684\u8868\uff0c\u6211\u4eec\u628a\u4e8c\u8005\u5173\u8054\u8d77\u6765\uff0c\u540c\u4e00action ,\u4e0d\u540c\u7684\u5e94\u7528\u7c7b\u578b \u5bf9\u5e94\u7684task \u4e5f\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5982\u679c\u540e\u9762\u9700\u8981 \u4fee\u6539\u53d1\u5e03 \u8fd9\u4e2aaction\u5bf9\u5e94\u7684task,\u90a3\u4e48\u4fee\u6539\u8fd9\u5f20\u6570\u636e\u8868\u5373\u53ef\u3002","title":"2.2.3.2 \u53d1\u5e03\u7cfb\u7edf\u7684 action \u662f\u600e\u4e48\u548c task \u5bf9\u5e94\u8d77\u6765\u7684\u5462\uff1f"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2233","text":"\u5404\u4e2atask\u6211\u4eec\u4f1a\u521b\u5efa\u4e00\u4e2a\u94fe\u8868\uff0c\u4e00\u4e2atask\u6210\u529f\u540e\u5728\u5b83\u7684\u56de\u8c03\u91cc\u53bb\u8c03\u7528\u4e0b\u4e00\u4e2atask ,\u76f4\u5230\u6700\u540e\u4e00\u4e2atask \u6267\u884c\u5b8c\u6210\u3002","title":"2.2.3.3  \u4e00\u53f0\u4e3b\u673a\u6709\u591a\u4e2a\u4efb\u52a1\uff0c\u662f\u600e\u4e48\u63a7\u5236\u5b83\u7684\u6267\u884c\u987a\u5e8f\u7684\u5462\uff1f**"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#2234","text":"\u5b83\u4eec\u662f\u5e76\u884c\u6267\u884c\u7684\u3002 \u6211\u4eec\u5728\u90e8\u7f72\u53d1\u5e03\u7cfb\u7edf\u7ed9\u65f6\uff0c\u9664\u4e86\u4f1a\u542f\u52a8publish-server \u5916\uff0c\u8fd8\u4f1a\u542f\u52a8celery-worker \u3002 publish-server\u76f8\u5f53\u4e8e\u662f\u4e2a\u4efb\u52a1\u7684\u751f\u4ea7\u8005\uff0ccelery-worker \u4f5c\u4e3a\u4efb\u52a1\u7684\u6d88\u8d39\u8005\uff0credis\u4f5c\u4e3a\u4e8c\u8005\u95f4\u7684\u6d88\u606f\u4e2d\u8f6c\uff0c\u8d77\u5230\u89e3\u8026\u548c\u7f13\u51b2\u7684\u4f5c\u7528\u3002\u6211\u4eec\u7684celery-worker \u662f\u4e0d\u6b62\u4e00\u4e2a\u7684\uff0c\u5177\u6709\u591a\u4e2a\u8fdb\u7a0b\u7684celery-worker\u540c\u65f6\u5728\u8dd1\uff0c\u90fd\u4eceredis \u4e0a\u53bb\u83b7\u53d6\u5f85\u6267\u884c\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u4efb\u52a1\u7684\u8c03\u5ea6\u548c\u5206\u914d\u90fd\u662fcelery \u5e2e\u6211\u4eec\u5b8c\u6210\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6765\u5b9e\u73b0\u591a\u4e2a\u4e3b\u673a\u7684task\u5e76\u884c\u6267\u884c\u3002\u5982\u4e0b\u56fe\u7684celery\u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u5f0f\uff08\u6211\u4eec\u4e3b\u8981\u4efb\u52a1\u8d70\u7684\u662f\u4e0b\u56fe\u7684\u8fd9\u4e2a\u6a21\u5f0f\uff0c\u8fd8\u6709\u4e2a publish-worker\u4e3b\u673a\u4e0a\u7684celery-work \u4e13\u95e8\u662f\u67e5\u8be2\u72b6\u6001\u7684\uff0ctask\u7ed3\u679c\u5b58\u50a8\u91c7\u7528\u7684\u4e5f\u662fredis\uff0c\u5177\u4f53\u53c2\u89c1\u6211\u4eec\u67b6\u6784\u56fe\uff09","title":"2.2.3.4 \u4e00\u4e2a\u6b65\u9aa4\u91cc\u6709\u591a\u53f0\u4e3b\u673a\uff0c\u5b83\u4eec\u662f\u5e76\u884c\u8fd8\u662f\u4e32\u884c\u6267\u884c\u5462\uff1f\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#23","text":"\u603b\u7ed3\u4e0b \u4e0a\u9762\u53d1\u5e03\u7cfb\u7edf\u5305\u7684\u6d41\u8f6c\u8fc7\u7a0b\uff0c\u5982\u4e0b \u53d1\u5e03\u7cfb\u7edf \u811a\u672c\u7684\u6d41\u8f6c\u8fc7\u7a0b","title":"2.3 \u53d1\u5e03\u7cfb\u7edf\u5305\u53ca\u811a\u672c\u7684\u6d41\u8f6c\u8fc7\u7a0b"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#24","text":"","title":"2.4\u521b\u5efa\u56de\u6eda\u4e0e\u6267\u884c"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#_3","text":"\u521b\u5efa\u56de\u6eda\u7c7b\u4f3c\u4e8e\u521b\u5efa\u53d1\u7248\uff0c\u4f46\u4e0d\u540c\u7684\u662f \u521b\u5efa\u56de\u6eda\u4e0e\u53d1\u7248\u662f\u76f8\u53cd\u7684\u8fc7\u7a0b\uff0c\u5e94\u7528\u7684\u53d1\u7248\u987a\u5e8f\u662f\u76f8\u53cd\u7684\uff0cmod / spring / dubbo-consumer <<---- web+mod <<---- web/static \u56de\u6eda\u9700\u8981\u5224\u65ad\u5f53\u524d\u7684\u6267\u884c\u72b6\u6001\uff0c\u53d1\u7248\u8005\u53ef\u4ee5\u5728\u53d1\u7248\u8fc7\u7a0b\u4e2d\u7b2c\u4e00\u6b65\u6267\u884c\u4e4b\u540e\u7684\u4efb\u610f\u4e00\u6b65\u6267\u884c\u56de\u6eda \u5728\u6784\u5efa\u56de\u6eda\u6b65\u9aa4\u65f6\uff0c\u9075\u5faa\u7684\u5c31\u662f\u4e0a\u9762\u8fd9\u4e24\u4e2a\u539f\u5219\uff0c\u6267\u884c\u56de\u6eda\u6b65\u9aa4\u7684\u8fc7\u7a0b \u8ddf\u6267\u884c \u53d1\u7248\u8fc7\u7a0b\u65e0\u5f02\u3002","title":"\u521b\u5efa\u56de\u6eda\u7684\u89c4\u5219"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#_4","text":"publish-web\uff1a \u4f20\u9012\u5f53\u524dpublish_plan_id \u5230\u540e\u7aef\uff0c\u5e76\u7b49\u5f85\u56de\u6eda\u6b65\u9aa4\u7684\u8fd4\u56de publish-server: \u6536\u5230 publish_plan_id\u540e\uff0c\u628a\u72b6\u6001\u4e3a\u6210\u529f\u6216\u5931\u8d25\u7684publish_pattern \u5bf9\u5e94\u7684application host \u9009\u62e9\u51fa\u6765 \u6839\u636e\u56de\u6eda\u539f\u5219\u751f\u6210\u56de\u6eda\u6b65\u9aa4 \u5e76\u5199\u5165\u5230\u6570\u636e\u5e93 \u8fd4\u56de\u56de\u6eda\u6b65\u9aa4\u5230\u524d\u7aef publish-web : \u628a\u56de\u6eda\u6b65\u9aa4\u66f4\u65b0\u5230\u9875\u9762 \u8fd9\u6837\u56de\u6eda\u6b65\u9aa4\u5c31\u5df2\u751f\u6210\uff0c\u63a5\u4e0b\u6765\u7684\u6267\u884c \u5c31\u8ddf\u6b63\u5e38\u53d1\u7248\u7684\u6267\u884c\u8fc7\u7a0b\u662f\u4e00\u6837\u7684\u4e86\u3002","title":"\u53d1\u7248\u9875\u9762\u70b9\u51fb\u56de\u6eda\u540e\u53d1\u751f\u4e86\u4ec0\u4e48?"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#3","text":"\u5177\u4f53\u4ecb\u7ecd\u53c2\u89c1 wiki: http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=21311053 \u6dfb\u52a0\u4e0b\u56fe\u4f5c\u8f85\u52a9\u7406\u89e3\u4e0a\u9762\u7684\u6570\u636e\u8868\u7ed3\u6784\uff08\u6765\u6e90\u4e8e\u7f57\u603b\uff09","title":"3. \u6570\u636e\u5e93\u8bbe\u8ba1"},{"location":"4.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1%E4%BB%8B%E7%BB%8D/#4","text":"\u91c7\u7528ldap\u767b\u5f55\u9a8c\u8bc1\uff0c\u4e3b\u8981\u901a\u8fc7\u4e09\u5f20\u8868\u6765\u5206\u914d\u6743\u9650\uff1a \u8868permission: \u5177\u6709\u54ea\u4e9b\u6743\u9650 \u8868role: \u5177\u6709\u54ea\u4e9b\u89d2\u8272 \u8868 role-permission : \u5b9a\u4e49\u54ea\u4e9b\u89d2\u8272\u5177\u6709\u54ea\u4e9b\u6743\u9650 \u8868user: \u5b9a\u4e49\u7528\u6237\uff0c \u53ea\u6709\u91c7\u7528\u8fc7ldap \u767b\u5f55\u8fc7\u6211\u4eec\u7cfb\u7edf\u7684\u7528\u6237\u624d\u4f1a\u8bb0\u5f55\u5728\u6b64\u8868\u4e2d \u8868 user-role \uff1a \u5b9a\u4e49\u7528\u6237\u5206\u914d\u5230\u54ea\u4e9b\u89d2\u8272 \u53e6\u53ef\u8bf7\u53c2\u89c1 wiki http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28610080 \u8868permission \u7684\u5185\u5bb9","title":"4. \u6743\u9650\u8bbe\u7f6e"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/","text":"DBMS \u4e0eWatcher\u4ecb\u7ecd DBMS \u67b6\u6784 DBMS\u662f\u4e00\u4e2a\u57fa\u4e8e\u5f00\u6e90\u7684inception\u7684\u4e00\u4e2amyql \u81ea\u52a8\u5316\u5ba1\u6838/ \u6267\u884c/ \u56de\u6eda\u7684 \u6570\u636e\u5e93\u7ba1\u7406\u5e73\u53f0\uff0c\u6838\u5fc3\u7684\u529f\u80fd\u90fd\u662finception \u6765\u5e2e\u52a9\u5b9e\u73b0\u7684\uff0cDBMS \u662f\u5728\u8c03\u7528 inception\u7684\u57fa\u7840\u4e0a\uff0c\u81ea\u5df1\u91c7\u7528python django\u6846\u67b6 \u642d\u5efa\u8d77\u7684\u4e00\u4e2aweb\u5e73\u53f0\u3002 \u540e\u6765 \u5c0f\u7c73\u5f00\u6e90\u4e86\u4e00\u4e2asoar,\u4f5c\u7528\u662f\u5e94\u7528\u4e8esql \u8bed\u53e5\u7684\u8bc4\u4f30\uff0c\u7ed9\u51fa\u76f8\u5e94\u7684\u5f97\u5206 \u548c\u4f18\u5316\u610f\u89c1\uff0c\u800c\u8fd9\u662finception\u6240\u7f3a\u4e4f\u7684\uff0c\u56e0\u800c\u6211\u4eec\u628asoar \u5d4c\u5165\u8fdb\u6211\u4eec\u73b0\u6709\u7684DBMS\u3002 inception\u7684\u5b89\u88c5 \u4e0e\u8fd0\u884c inception \u6e90\u7801\uff1a https://github.com/qunarcorp/inception inception \u6587\u6863\u8bf4\u660e\uff1ahttps://qunarcorp.github.io/inception/ linux \u7cfb\u7edf\u4e0b\uff1a \u9996\u5148\u5c31\u662f\u7f16\u8bd1\uff0c\u5728\u6e90\u7801\u6839\u76ee\u5f55\u4e0b\u9762\u6709\u4e00\u4e2a\u6587\u4ef6inception_build.sh\uff0c\u6267\u884c\u547d\u4ee4 sh inception_build.sh \uff0c\u4f1a\u8f93\u51fa\u4f7f\u7528\u65b9\u6cd5\u3002 \u5b9e\u9645\u4e0a\u53ea\u9700\u8981\u6267\u884c inception_build.sh debug [Xcode] \u5373\u53ef\uff0c\u540e\u9762\u7684\u5e73\u53f0\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u662flinux\u5e73\u53f0\uff0c\u800c\u5982\u679c\u8981\u6307\u5b9a\u662fXcode\uff0c\u5c31\u540e\u9762\u6307\u5b9aXcode\uff0c\u800cdebug\u662f\u7f16\u8bd1\u7684\u76ee\u5f55\uff0c\u7f16\u8bd1\u4e4b\u540e\uff0c\u6240\u6709\u7684\u751f\u6210\u6587\u4ef6\u90fd\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\uff0c\u5305\u62ec\u53ef\u6267\u884c\u6587\u4ef6Inception\u3002\u53ef\u6267\u884c\u6587\u4ef6\u5728 debug/sql/ \u76ee\u5f55\u4e0b\u9762\uff08\u4e0d\u540c\u5e73\u53f0\u6709\u53ef\u80fd\u4e0d\u76f8\u540c\uff09\u3002 \u914d\u7f6e\u6587\u4ef6\uff1a/data/conf/inception/inception.cnf \u542f\u52a8\uff1a/data/svr/inception/debug/sql/Inception \u2013defaults-file=/data/conf/inception/inception.cnf inception \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563 \u6ce8\u610f\u4e8b\u9879 \uff1a inception \u4e0b\u8f7d\u6e90\u7801\u7f16\u8bd1\u4e00\u6b21\u540e\uff0c\u5982\u679c\u9700\u8981\u505a\u8fc1\u79fb\uff0c\u8fc1\u79fb\u7684\u4e24\u53f0\u4e3b\u673a \u7cfb\u7edf\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u628a\u7f16\u8bd1\u6587\u4ef6 copy \u8fc7\u53bb\u8fd0\u884c\u5373\u53ef\u3002 \u6d4b\u8bd5\u73af\u5883\u7684DBMS\uff0c\u662f\u7ed9test-a\uff0ctest-b\u7b49\u73af\u5883\u4f7f\u7528\uff0c\u5730\u5740\u662f 192.168.1.15 \u5f00\u53d1\u73af\u5883\u7684 inception \u53ef\u4ee5\u91c7\u7528 10.10.50.30 \u73af\u5883\u4e0b\u7684 /data/svr/inception soar \u5b89\u88c5 soar \u4f5c\u4e3a\u4e00\u4e2a\u5de5\u5177\uff0c\u662f\u4e0d\u9700\u8981\u8fd0\u884c\u7684\uff0c\u53ea\u8981\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6709\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4ee3\u7801\uff0c\u5373\u53ef \u4e0b\u8f7d\u5730\u5740https://github.com/XiaoMi/soar \u6839\u636e\u7cfb\u7edf\u4e0b\u8f7d\u4e8c\u8fdb\u5236 \u6587\u4ef6\u5373\u53ef \u53ea\u6709\u4e00\u4e2a\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff1a/data/svr/soar/soar.linux-amd64 \u914d\u7f6e\u6587\u4ef6\uff1a/data/svr/soar/soar.yaml soar\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563 inception\u914d\u7f6e inception\u914d\u7f6e\u6587\u4ef6 \u73b0\u6709\u914d\u7f6e http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563 inception \u9ed8\u8ba4\u7684\u914d\u7f6e https://inception-document.readthedocs.io/zh_CN/latest/variables/ \u5e38\u9047\u89c1\u7684\u914d\u7f6e \u53c2\u6570\u540d\u5b57 \u53ef\u9009\u53c2\u6570 \u9ed8\u8ba4\u503c \u529f\u80fd\u8bf4\u660e inception_check_insert_field ON/OFF ON \u662f\u4e0d\u662f\u8981\u68c0\u67e5\u63d2\u5165\u8bed\u53e5\u4e2d\u7684\u5217\u94fe\u8868\u7684\u5b58\u5728\u6027 inception_enable_nullable ON/OFF ON \u521b\u5efa\u6216\u8005\u65b0\u589e\u5217\u65f6\u5982\u679c\u5217\u4e3aNULL\uff0c\u662f\u4e0d\u662f\u62a5\u9519 inception_max_update_rows 1-MAX 10000 \u5728\u4e00\u4e2a\u4fee\u6539\u8bed\u53e5\u4e2d\uff0c\u9884\u8ba1\u5f71\u54cd\u7684\u6700\u5927\u884c\u6570\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5c31\u62a5\u9519 inception_check_column_default_value ON/OFF ON \u68c0\u67e5\u5728\u5efa\u8868\u3001\u4fee\u6539\u5217\u3001\u65b0\u589e\u5217\u65f6\uff0c\u65b0\u7684\u5217\u5c5e\u6027\u662f\u4e0d\u662f\u8981\u6709\u9ed8\u8ba4\u503c inception_check_timestamp_default ON/OFF ON \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4e3atimestamp\u7c7b\u578b\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5219\u62a5\u9519 nception_enable_not_innodb ON/OFF OFF \u5efa\u8868\u6307\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\u4e0d\u4e3aInnodb\uff0c\u4e0d\u62a5\u9519 \u5bf9\u7ebf\u4e0a \u6570\u636e\u5e93\u7684\u8981\u6c42\uff1a https://qunarcorp.github.io/inception/requires/ \u7ebf\u4e0a\u670d\u52a1\u5668\u5fc5\u987b\u8981\u6253\u5f00 binlog\uff0c\u5728\u542f\u52a8\u65f6\u9700\u8981\u8bbe\u7f6e\u53c2\u6570log_bin\u3001log_bin_index\u7b49\u5173\u4e8e binlog \u7684\u53c2\u6570\u3002\u4e0d\u7136\u4e0d\u4f1a\u5907\u4efd\u53ca\u751f\u6210\u56de\u6eda\u8bed\u53e5\u3002 \u53c2\u6570binlog_format\u5fc5\u987b\u8981\u8bbe\u7f6e\u4e3a mixed \u6216\u8005 row \u6a21\u5f0f\uff0c\u901a\u8fc7\u8bed\u53e5\uff1a set global binlog_format=mixed/row \u6765\u8bbe\u7f6e\uff0c\u5982\u679c\u662f statement \u6a21\u5f0f\uff0c\u5219\u4e0d\u505a\u5907\u4efd\u53ca\u56de\u6eda\u8bed\u53e5\u7684\u751f\u6210 DBMS \u7684\u8fd0\u884c\u65b9\u5f0f dbms\u662f\u91c7\u7528django\u6846\u67b6, \u90e8\u7f72\u65f6 \u642d\u914d gunicorn \u6765\u4f7f\u7528\uff1a dbms+ gunicorn + nginx gunicorn \u672c\u8eab\u6765\u5b88\u62a4 \u8fdb\u7a0b\uff0c\u65e0\u9700supervisord publish-server \u7b49tornado \u6846\u67b6\u5e94\u7528\uff0c\u65e0\u9700gunicorn server+ nginx +supersisord \u4e24\u79cd\u65b9\u5f0f\u4e0b nginx\u4f5c\u7528\u7684\u5dee\u5f02 tornado\u6a21\u5f0f\u4e0bnginx\u7684\u4f5c\u7528\uff1a \u524d\u7aef\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668 \u7aef\u53e3\u8f6c\u53d1 \u8d1f\u8f7d\u5747\u8861 django\u6a21\u5f0f\u4e0bnginx\u7684\u4f5c\u7528\uff1a \u524d\u7aef\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668 \u7aef\u53e3\u8f6c\u53d1 django \u7684\u8d1f\u8f7d\u5747\u8861\u662fgunicorn \u6765\u5b8c\u6210\u7684\uff0c\u6211\u4eec\u5728\u8fd0\u884c /data/sh/dbms.sh start \u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u628agunicorn \u542f\u52a8\u8d77\u6765\uff0cdjango\u53ea\u662f\u4f5c\u4e3a\u4e00\u4e2a\u7f51\u7edc\u6846\u67b6\uff08framework\uff09\uff0c\u662f\u4e0d\u5177\u5907server\u7684\u529f\u80fd\u3002 tornado \u5219\u4e0d\u4ec5\u662f\u4e2a\u7f51\u7edc\u6846\u67b6\uff0c\u8fd8\u540c\u65f6\u662f\u4e2aserver,\u4f46\u662f\u5b83\u81ea\u8eab\u4e0d\u5177\u5907\u8d1f\u8f7d\u5747\u8861\u7684\u7ba1\u7406\uff0c\u9700\u8981\u501f\u52a9\u4e8enginx \u3002 watcher \u67b6\u6784 http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=27920155 watcher \u4e5f\u662f\u91c7\u7528\u7684 tornado \u6846\u67b6\uff0c\u8fd9\u4e2a\u8ddf cmdb-server ,publish-server \u90fd\u662f\u4e00\u6837\u3002 \u5728\u90e8\u7f72\u4e0a\uff0c\u4e5f\u662f\u7c7b\u4f3c\u7684\u7ec4\u4ef6\uff1a watcher-server + nginx +supervisord \u67b6\u6784\u4e2d\u6d89\u53ca\u7684zabbix-agent\uff0c\u4e3b\u8981\u662f\u4e3a\u4ee5\u4e0b\u8d44\u6e90\u83b7\u53d6\u76d1\u63a7\u4fe1\u606f\uff1a udb uredis ulb \u5176\u4e2dudb \u76d1\u63a7\u4fe1\u606f\u6709\u4e24\u79cd\u6765\u6e90\uff1a ucloud api \u83b7\u53d6\u7684\u76d1\u63a7\u4fe1\u606f \u672c\u673a\u901a\u8fc7mysql_client \u8fde\u63a5\u5230udb\u83b7\u53d6\u56de\u6765\u7684\u4fe1\u606f uredis \u548culb \u53ea\u6709 ucloud api \u83b7\u53d6\u76d1\u63a7\u4fe1\u606f\u8fd9\u552f\u4e00\u6765\u6e90\u3002 \u524d\u6bb5\u65f6\u95f4\uff0c\u7531\u4e8eucloud \u7684\u4e0d\u540c\u9879\u76ee\u95f4\uff0c\u7f51\u7edc\u4e0d\u53ef\u8fbe\u7684\u539f\u56e0\uff0c\u6211\u4eec\u628a udb \u7684\u901a\u8fc7mysql-client \u83b7\u53d6\u7684\u76d1\u63a7\u4fe1\u606f\u7ed9\u8fc1\u79fb\u5230\u4e86\u6df7\u5408\u4e91\u4e3b\u673a\uff08172.16.1.13\uff09\u4e0a\uff0c\u5176\u4f59\u7684\u8fd8\u4fdd\u7559\u5728 \u539f\u6765\u4e3b\u673a\u4e0a\u3002 \u5728\u505a\u8fd9\u79cd\u8fc1\u79fb\u65f6\uff0c\u9664\u4e86\u9700\u8981\u628a /data/conf/zabbix-agentd/zabbix_params/ \u76ee\u5f55\u4e0b\u76f8\u5173\u7684conf \u6587\u4ef6 /data/sh/zabbix_scripts/\u76ee\u5f55\u4e0b\u76f8\u5173\u7684\u811a\u672c \u8fd9\u4e24\u4e2a\u6587\u4ef6\u8fc1\u79fb\u5916\uff0c \u6211\u4eec\u8fd8\u9700\u8981\u628audb \u7684interface ip \u7531\u539f\u6765\u6240\u5728\u7684\u4e3b\u673aIP \u4fee\u6539\u6210\u8fc1\u79fb\u540e\u7684 \u6df7\u5408\u4e91\u4e3b\u673a\u7684IP\uff08172.16.1.13\uff09\uff0c\u8fd9\u91cc\u5efa\u8bae\u8c03\u7528 zabbix-api \u53bb\u4fee\u6539\u3002 \u6bcf\u5929\u5b9a\u65f6\u4efb\u52a1\u7684\u914d\u7f6e\u6587\u4ef6http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=27920155","title":"dbms& wathcer\u529f\u80fd\u4ecb\u7ecd"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#dbms-watcher","text":"","title":"DBMS \u4e0eWatcher\u4ecb\u7ecd"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#dbms","text":"","title":"DBMS"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#_1","text":"DBMS\u662f\u4e00\u4e2a\u57fa\u4e8e\u5f00\u6e90\u7684inception\u7684\u4e00\u4e2amyql \u81ea\u52a8\u5316\u5ba1\u6838/ \u6267\u884c/ \u56de\u6eda\u7684 \u6570\u636e\u5e93\u7ba1\u7406\u5e73\u53f0\uff0c\u6838\u5fc3\u7684\u529f\u80fd\u90fd\u662finception \u6765\u5e2e\u52a9\u5b9e\u73b0\u7684\uff0cDBMS \u662f\u5728\u8c03\u7528 inception\u7684\u57fa\u7840\u4e0a\uff0c\u81ea\u5df1\u91c7\u7528python django\u6846\u67b6 \u642d\u5efa\u8d77\u7684\u4e00\u4e2aweb\u5e73\u53f0\u3002 \u540e\u6765 \u5c0f\u7c73\u5f00\u6e90\u4e86\u4e00\u4e2asoar,\u4f5c\u7528\u662f\u5e94\u7528\u4e8esql \u8bed\u53e5\u7684\u8bc4\u4f30\uff0c\u7ed9\u51fa\u76f8\u5e94\u7684\u5f97\u5206 \u548c\u4f18\u5316\u610f\u89c1\uff0c\u800c\u8fd9\u662finception\u6240\u7f3a\u4e4f\u7684\uff0c\u56e0\u800c\u6211\u4eec\u628asoar \u5d4c\u5165\u8fdb\u6211\u4eec\u73b0\u6709\u7684DBMS\u3002","title":"\u67b6\u6784"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#inception","text":"inception \u6e90\u7801\uff1a https://github.com/qunarcorp/inception inception \u6587\u6863\u8bf4\u660e\uff1ahttps://qunarcorp.github.io/inception/ linux \u7cfb\u7edf\u4e0b\uff1a \u9996\u5148\u5c31\u662f\u7f16\u8bd1\uff0c\u5728\u6e90\u7801\u6839\u76ee\u5f55\u4e0b\u9762\u6709\u4e00\u4e2a\u6587\u4ef6inception_build.sh\uff0c\u6267\u884c\u547d\u4ee4 sh inception_build.sh \uff0c\u4f1a\u8f93\u51fa\u4f7f\u7528\u65b9\u6cd5\u3002 \u5b9e\u9645\u4e0a\u53ea\u9700\u8981\u6267\u884c inception_build.sh debug [Xcode] \u5373\u53ef\uff0c\u540e\u9762\u7684\u5e73\u53f0\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u662flinux\u5e73\u53f0\uff0c\u800c\u5982\u679c\u8981\u6307\u5b9a\u662fXcode\uff0c\u5c31\u540e\u9762\u6307\u5b9aXcode\uff0c\u800cdebug\u662f\u7f16\u8bd1\u7684\u76ee\u5f55\uff0c\u7f16\u8bd1\u4e4b\u540e\uff0c\u6240\u6709\u7684\u751f\u6210\u6587\u4ef6\u90fd\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\uff0c\u5305\u62ec\u53ef\u6267\u884c\u6587\u4ef6Inception\u3002\u53ef\u6267\u884c\u6587\u4ef6\u5728 debug/sql/ \u76ee\u5f55\u4e0b\u9762\uff08\u4e0d\u540c\u5e73\u53f0\u6709\u53ef\u80fd\u4e0d\u76f8\u540c\uff09\u3002 \u914d\u7f6e\u6587\u4ef6\uff1a/data/conf/inception/inception.cnf \u542f\u52a8\uff1a/data/svr/inception/debug/sql/Inception \u2013defaults-file=/data/conf/inception/inception.cnf inception \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563 \u6ce8\u610f\u4e8b\u9879 \uff1a inception \u4e0b\u8f7d\u6e90\u7801\u7f16\u8bd1\u4e00\u6b21\u540e\uff0c\u5982\u679c\u9700\u8981\u505a\u8fc1\u79fb\uff0c\u8fc1\u79fb\u7684\u4e24\u53f0\u4e3b\u673a \u7cfb\u7edf\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u628a\u7f16\u8bd1\u6587\u4ef6 copy \u8fc7\u53bb\u8fd0\u884c\u5373\u53ef\u3002 \u6d4b\u8bd5\u73af\u5883\u7684DBMS\uff0c\u662f\u7ed9test-a\uff0ctest-b\u7b49\u73af\u5883\u4f7f\u7528\uff0c\u5730\u5740\u662f 192.168.1.15 \u5f00\u53d1\u73af\u5883\u7684 inception \u53ef\u4ee5\u91c7\u7528 10.10.50.30 \u73af\u5883\u4e0b\u7684 /data/svr/inception","title":"inception\u7684\u5b89\u88c5 \u4e0e\u8fd0\u884c"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#soar","text":"soar \u4f5c\u4e3a\u4e00\u4e2a\u5de5\u5177\uff0c\u662f\u4e0d\u9700\u8981\u8fd0\u884c\u7684\uff0c\u53ea\u8981\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6709\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4ee3\u7801\uff0c\u5373\u53ef \u4e0b\u8f7d\u5730\u5740https://github.com/XiaoMi/soar \u6839\u636e\u7cfb\u7edf\u4e0b\u8f7d\u4e8c\u8fdb\u5236 \u6587\u4ef6\u5373\u53ef \u53ea\u6709\u4e00\u4e2a\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff1a/data/svr/soar/soar.linux-amd64 \u914d\u7f6e\u6587\u4ef6\uff1a/data/svr/soar/soar.yaml soar\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563","title":"soar \u5b89\u88c5"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#inception_1","text":"inception\u914d\u7f6e\u6587\u4ef6 \u73b0\u6709\u914d\u7f6e http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563 inception \u9ed8\u8ba4\u7684\u914d\u7f6e https://inception-document.readthedocs.io/zh_CN/latest/variables/ \u5e38\u9047\u89c1\u7684\u914d\u7f6e \u53c2\u6570\u540d\u5b57 \u53ef\u9009\u53c2\u6570 \u9ed8\u8ba4\u503c \u529f\u80fd\u8bf4\u660e inception_check_insert_field ON/OFF ON \u662f\u4e0d\u662f\u8981\u68c0\u67e5\u63d2\u5165\u8bed\u53e5\u4e2d\u7684\u5217\u94fe\u8868\u7684\u5b58\u5728\u6027 inception_enable_nullable ON/OFF ON \u521b\u5efa\u6216\u8005\u65b0\u589e\u5217\u65f6\u5982\u679c\u5217\u4e3aNULL\uff0c\u662f\u4e0d\u662f\u62a5\u9519 inception_max_update_rows 1-MAX 10000 \u5728\u4e00\u4e2a\u4fee\u6539\u8bed\u53e5\u4e2d\uff0c\u9884\u8ba1\u5f71\u54cd\u7684\u6700\u5927\u884c\u6570\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5c31\u62a5\u9519 inception_check_column_default_value ON/OFF ON \u68c0\u67e5\u5728\u5efa\u8868\u3001\u4fee\u6539\u5217\u3001\u65b0\u589e\u5217\u65f6\uff0c\u65b0\u7684\u5217\u5c5e\u6027\u662f\u4e0d\u662f\u8981\u6709\u9ed8\u8ba4\u503c inception_check_timestamp_default ON/OFF ON \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4e3atimestamp\u7c7b\u578b\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5219\u62a5\u9519 nception_enable_not_innodb ON/OFF OFF \u5efa\u8868\u6307\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\u4e0d\u4e3aInnodb\uff0c\u4e0d\u62a5\u9519 \u5bf9\u7ebf\u4e0a \u6570\u636e\u5e93\u7684\u8981\u6c42\uff1a https://qunarcorp.github.io/inception/requires/ \u7ebf\u4e0a\u670d\u52a1\u5668\u5fc5\u987b\u8981\u6253\u5f00 binlog\uff0c\u5728\u542f\u52a8\u65f6\u9700\u8981\u8bbe\u7f6e\u53c2\u6570log_bin\u3001log_bin_index\u7b49\u5173\u4e8e binlog \u7684\u53c2\u6570\u3002\u4e0d\u7136\u4e0d\u4f1a\u5907\u4efd\u53ca\u751f\u6210\u56de\u6eda\u8bed\u53e5\u3002 \u53c2\u6570binlog_format\u5fc5\u987b\u8981\u8bbe\u7f6e\u4e3a mixed \u6216\u8005 row \u6a21\u5f0f\uff0c\u901a\u8fc7\u8bed\u53e5\uff1a set global binlog_format=mixed/row \u6765\u8bbe\u7f6e\uff0c\u5982\u679c\u662f statement \u6a21\u5f0f\uff0c\u5219\u4e0d\u505a\u5907\u4efd\u53ca\u56de\u6eda\u8bed\u53e5\u7684\u751f\u6210 DBMS \u7684\u8fd0\u884c\u65b9\u5f0f dbms\u662f\u91c7\u7528django\u6846\u67b6, \u90e8\u7f72\u65f6 \u642d\u914d gunicorn \u6765\u4f7f\u7528\uff1a dbms+ gunicorn + nginx gunicorn \u672c\u8eab\u6765\u5b88\u62a4 \u8fdb\u7a0b\uff0c\u65e0\u9700supervisord publish-server \u7b49tornado \u6846\u67b6\u5e94\u7528\uff0c\u65e0\u9700gunicorn server+ nginx +supersisord \u4e24\u79cd\u65b9\u5f0f\u4e0b nginx\u4f5c\u7528\u7684\u5dee\u5f02 tornado\u6a21\u5f0f\u4e0bnginx\u7684\u4f5c\u7528\uff1a \u524d\u7aef\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668 \u7aef\u53e3\u8f6c\u53d1 \u8d1f\u8f7d\u5747\u8861 django\u6a21\u5f0f\u4e0bnginx\u7684\u4f5c\u7528\uff1a \u524d\u7aef\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668 \u7aef\u53e3\u8f6c\u53d1 django \u7684\u8d1f\u8f7d\u5747\u8861\u662fgunicorn \u6765\u5b8c\u6210\u7684\uff0c\u6211\u4eec\u5728\u8fd0\u884c /data/sh/dbms.sh start \u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u628agunicorn \u542f\u52a8\u8d77\u6765\uff0cdjango\u53ea\u662f\u4f5c\u4e3a\u4e00\u4e2a\u7f51\u7edc\u6846\u67b6\uff08framework\uff09\uff0c\u662f\u4e0d\u5177\u5907server\u7684\u529f\u80fd\u3002 tornado \u5219\u4e0d\u4ec5\u662f\u4e2a\u7f51\u7edc\u6846\u67b6\uff0c\u8fd8\u540c\u65f6\u662f\u4e2aserver,\u4f46\u662f\u5b83\u81ea\u8eab\u4e0d\u5177\u5907\u8d1f\u8f7d\u5747\u8861\u7684\u7ba1\u7406\uff0c\u9700\u8981\u501f\u52a9\u4e8enginx \u3002","title":"inception\u914d\u7f6e"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#watcher","text":"","title":"watcher"},{"location":"5.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%20%E4%B8%8EWatcher%E4%BB%8B%E7%BB%8D/#_2","text":"http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=27920155 watcher \u4e5f\u662f\u91c7\u7528\u7684 tornado \u6846\u67b6\uff0c\u8fd9\u4e2a\u8ddf cmdb-server ,publish-server \u90fd\u662f\u4e00\u6837\u3002 \u5728\u90e8\u7f72\u4e0a\uff0c\u4e5f\u662f\u7c7b\u4f3c\u7684\u7ec4\u4ef6\uff1a watcher-server + nginx +supervisord \u67b6\u6784\u4e2d\u6d89\u53ca\u7684zabbix-agent\uff0c\u4e3b\u8981\u662f\u4e3a\u4ee5\u4e0b\u8d44\u6e90\u83b7\u53d6\u76d1\u63a7\u4fe1\u606f\uff1a udb uredis ulb \u5176\u4e2dudb \u76d1\u63a7\u4fe1\u606f\u6709\u4e24\u79cd\u6765\u6e90\uff1a ucloud api \u83b7\u53d6\u7684\u76d1\u63a7\u4fe1\u606f \u672c\u673a\u901a\u8fc7mysql_client \u8fde\u63a5\u5230udb\u83b7\u53d6\u56de\u6765\u7684\u4fe1\u606f uredis \u548culb \u53ea\u6709 ucloud api \u83b7\u53d6\u76d1\u63a7\u4fe1\u606f\u8fd9\u552f\u4e00\u6765\u6e90\u3002 \u524d\u6bb5\u65f6\u95f4\uff0c\u7531\u4e8eucloud \u7684\u4e0d\u540c\u9879\u76ee\u95f4\uff0c\u7f51\u7edc\u4e0d\u53ef\u8fbe\u7684\u539f\u56e0\uff0c\u6211\u4eec\u628a udb \u7684\u901a\u8fc7mysql-client \u83b7\u53d6\u7684\u76d1\u63a7\u4fe1\u606f\u7ed9\u8fc1\u79fb\u5230\u4e86\u6df7\u5408\u4e91\u4e3b\u673a\uff08172.16.1.13\uff09\u4e0a\uff0c\u5176\u4f59\u7684\u8fd8\u4fdd\u7559\u5728 \u539f\u6765\u4e3b\u673a\u4e0a\u3002 \u5728\u505a\u8fd9\u79cd\u8fc1\u79fb\u65f6\uff0c\u9664\u4e86\u9700\u8981\u628a /data/conf/zabbix-agentd/zabbix_params/ \u76ee\u5f55\u4e0b\u76f8\u5173\u7684conf \u6587\u4ef6 /data/sh/zabbix_scripts/\u76ee\u5f55\u4e0b\u76f8\u5173\u7684\u811a\u672c \u8fd9\u4e24\u4e2a\u6587\u4ef6\u8fc1\u79fb\u5916\uff0c \u6211\u4eec\u8fd8\u9700\u8981\u628audb \u7684interface ip \u7531\u539f\u6765\u6240\u5728\u7684\u4e3b\u673aIP \u4fee\u6539\u6210\u8fc1\u79fb\u540e\u7684 \u6df7\u5408\u4e91\u4e3b\u673a\u7684IP\uff08172.16.1.13\uff09\uff0c\u8fd9\u91cc\u5efa\u8bae\u8c03\u7528 zabbix-api \u53bb\u4fee\u6539\u3002 \u6bcf\u5929\u5b9a\u65f6\u4efb\u52a1\u7684\u914d\u7f6e\u6587\u4ef6http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=27920155","title":"\u67b6\u6784"},{"location":"6.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%89%8D%E7%AB%AFvue%E4%BB%8B%E7%BB%8D/","text":"\u524d\u7aef\u9879\u76eeVUE\u4ecb\u7ecd vue \u7684\u5165\u95e8\u5b66\u4e60 https://cn.vuejs.org/v2/guide/index.html Vue Router \u5165\u95e8https://router.vuejs.org/zh/guide/ \u6211\u4eec\u524d\u7aef\u9879\u76ee \u4f7f\u7528\u7684element ui https://element.eleme.io/#/zh-CN/component/installation vue \u9879\u76ee\u6587\u4ef6\u7ed3\u6784\u4ecb\u7ecd $ npm install -g vue-cli $ vue init webpack my-project $ cd my-project $ npm install $ npm run dev \u4e00\u4e2avue \u9879\u76ee\u662f\u6709\u56fa\u5b9a\u6587\u4ef6\u7ed3\u6784\u7684\uff0c\u4f7f\u7528 vue init webpack my-project \u547d\u4ee4\u53ef\u4ee5\u521d\u59cb\u5316\u4e00\u4e2a\u5177\u5907vue \u5b8c\u6574\u67b6\u6784\u7684\u6587\u4ef6\u76ee\u5f55\uff0c\u7136\u540e\u6211\u4eec\u5230\u76f8\u5e94\u7684\u76ee\u5f55\u4e0b\u53bb\u6dfb\u52a0\u4fee\u6539\u6587\u4ef6\u5373\u53ef\u3002 \u4e0b\u9762\u8bb2\u8bb2 \u5404\u4e2a build webpack \u6253\u5305\u9759\u6001\u6587\u4ef6\u7684\u914d\u7f6e\uff0c\u5305\u542bdev /test/product \u4e09\u4e2a\u73af\u5883\u7684\u914d\u7f6e config - webpack config files webpack \u6253\u5305\u9759\u6001\u6587\u4ef6\u7684\u914d\u7f6e\uff0c\u5305\u542bdev /test/product \u4e09\u4e2a\u73af\u5883\u7684\u914d\u7f6e dist \u8fd9\u4e2a\u6587\u4ef6\u5939\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u662f\u6ca1\u6709\u7684\uff0c\u53ea\u6709\u8fd0\u884c\u4e86 npm run build \u547d\u4ee4\u540e\uff0c\u624d\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u76ee\u5f55\u3002\u6253\u5305\u597d\u7684\u9759\u6001\u6587\u4ef6\u5c31\u5b58\u653e\u5728\u6b64\u5904\uff0c\u90e8\u7f72\u5230\u670d\u52a1\u5668\u4e0a\u65f6\uff0c\u5c31\u662f\u91c7\u7528\u8fd9\u91cc\u7684\u6587\u4ef6\u3002 src #src \u624d\u662f\u6211\u4eec\u4fee\u6539\u524d\u7aefvue \u6e90\u7801\u7684\u771f\u6b63\u5730\u65b9\uff0c\u4e0b\u9762\u8bbe\u5f88\u591a\u4e2a\u76ee\u5f55 api #\u5b58\u653e\u524d\u7aef\u8c03\u7528api \u7684\u5730\u65b9 assets # \u4e00\u4e9b\u8d44\u6e90\u6587\u4ef6 \u5982 \u56fe\u7247\u7b49 common # \u4e00\u4e9b\u516c\u7528\u65b9\u6cd5 components - # \u7ec4\u4ef6\uff0cvue \u7684\u4e00\u4e2a\u7279\u6b8a\u4e4b\u5904\u5c31\u662f\u53ef\u4ee5\u4f7f\u7528\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u7684\u4f5c\u7528\u7c7b\u4f3c\u4e8ehtml\u7684\u51fd\u6570\uff0c\u4f5c\u7528\u662f\u590d\u7528 styles # css \u6587\u4ef6 views # \u5b9a\u4e49 vue \u9875\u9762\u7684\u5730\u65b9\uff0c\u4e3b\u529b\u5f00\u53d1\u5c31\u5728\u6b64\u5904 store # \u8bf7\u6c42\u540e\u7aef\u8fd4\u56de\u7684\u6570\u636e\uff0c\u5728\u6b64\u5904\u5168\u5c40\u5b58\u653e App.vue # \u5165\u53e3\u9875\u9762 main.js # \u5165\u53e3 \u52a0\u8f7d\u7ec4\u4ef6 \u521d\u59cb\u5316\u7b49 routes.js # \u8def\u7531\u5b9a\u4e49 static # \u4e00\u4e9b\u9759\u6001\u6587\u4ef6\u5b58\u653e\u5730\u65b9\uff0c\u6211\u4eec\u51e0\u4e2a\u9879\u76ee\u6b64\u76ee\u5f55\u90fd\u662f\u7a7a\u7684 index.html # \u6574\u4e2avue \u552f\u4e00\u7684\u4e00\u4e2ahtml,\u628a Vue \u5e94\u7528\u901a\u8fc7 main.js\u6302\u8f7d\u5230\u4e00\u4e2a DOM \u5143\u7d20\u4e0a index.html \u6587\u4ef6\u5185\u5bb9 <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <link rel=\"shortcut icon\" type=\"image/png\" href=\"/static/favicon.png\" /> <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\"> <title>title text</title> </head> <body style=\"margin: 0px\"> <div id=\"app\"></div> <!-- built files will be auto injected --> </body> </html> main.js \u5185\u5bb9 /* main.js */ import App from './App' /* \u628aApp.vue \u9875\u9762import \u8fdb\u6765 /* new Vue({ el: '#app', /* \u6b64\u5904 \u4e0a\u6587\u7684 index.html \u8fdb\u884c\u6302\u8f7d\uff0c\u901a\u8fc7 app\u8fd9\u4e2aid/* render: h => h(App) /* \u628aVue \u5e94\u7528\u4f1a\u5c06\u5176\u6302\u8f7d\u5230\u4e00\u4e2a DOM \u5143\u7d20\u4e0a }) Vue Router vue \u7684\u8bbe\u8ba1\u601d\u60f3\u8ddfserver \u7aef\u7684\u5f88\u7c7b\u4f3c\uff0c\u5b83\u7684router \u8ddf \u540e\u7aef\u7684\u4e5f\u662f\u540c\u6837\u7684\u542b\u4e49\uff0c\u6839\u636e\u8bf7\u6c42\u7684uri \u8def\u7531\u5230\u4e0d\u540c\u7684\u9875\u9762\u53bb\uff0c\u57fa\u672c\u4e0a\u4e5f\u53ef\u4ee5\u8ba4\u4e3avue router \u662f\u6211\u4eec\u524d\u7aef\u6587\u4ef6\u7684\u5927\u95e8\u3002 \u90a3\u4e48 vue router \u662f\u600e\u4e48\u5f15\u7528\u8d77\u6765\u7684\u5462\uff1f\u4e5f\u662f\u7c7b\u4f3c\uff0c\u901a\u8fc7main.js \u6587\u4ef6\u4e2d import router from './router' new Vue({ el: '#app', router, /* \u6b64\u5904\u628a router\u7ed1\u5b9a\u5230 vue \u5e94\u7528\u4e0a render: h => h(App) }) router/index.js import Vue from 'vue' import Router from 'vue-router' import Main from '@/views/main' import CreatePublishPlan from '@/views/pages/CreatePublishPlan' Vue.use(Router) export const navRoutes = [ { path: 'create-plan', component: CreatePublishPlan, // uri: create-plan \u4e0e\u6211\u4eec\u7684CreatePublishPlan \u7ec4\u4ef6\u7ed1\u5b9a title: '\u521b\u5efa\u53d1\u7248', name: 'CreatePlan', icon: 'el-icon-edit-outline', meta: { cache: true } } ] export default new Router({ mode: 'history', // require service support routes: [ { path: '/', name: 'Home', component: Main, // \u83dc\u5355\u5165\u53e3 children: navRoutes // \u5d4c\u5957\u8def\u7531 } ] }) \u4f7f\u7528router-view \u4f7f\u5f97\u83dc\u5355\u680f\u4e00\u76f4\u4fdd\u6301\u5728\u9875\u9762\u4e0a\uff0c\u8bf7\u6ce8\u610f\u770b \u6587\u4e2d\u7684\u6ce8\u91ca views/main.vue \u5185\u5bb9 <template> <el-container> <el-header> <el-menu :default-active=\"$route.name\" mode=\"horizontal\" background-color=\"#545c64\" text-color=\"#fff\" active-text-color=\"#ffd04b\" router> </el-menu> </el-header> <el-main> <transition name=\"fade\" mode=\"out-in\"> <keep-alive :include=\"cache_component_names\"> <!-- \u8def\u7531\u51fa\u53e3 --> <!-- \u8def\u7531\u5339\u914d\u5230\u7684\u7ec4\u4ef6\u5c06\u6e32\u67d3\u5728\u8fd9\u91cc --> <router-view/> </keep-alive> </transition> </el-main> </el-container> </template>","title":"\u524d\u7aef\u9879\u76eeVUE\u4ecb\u7ecd"},{"location":"6.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%89%8D%E7%AB%AFvue%E4%BB%8B%E7%BB%8D/#vue","text":"vue \u7684\u5165\u95e8\u5b66\u4e60 https://cn.vuejs.org/v2/guide/index.html Vue Router \u5165\u95e8https://router.vuejs.org/zh/guide/ \u6211\u4eec\u524d\u7aef\u9879\u76ee \u4f7f\u7528\u7684element ui https://element.eleme.io/#/zh-CN/component/installation","title":"\u524d\u7aef\u9879\u76eeVUE\u4ecb\u7ecd"},{"location":"6.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%89%8D%E7%AB%AFvue%E4%BB%8B%E7%BB%8D/#vue_1","text":"$ npm install -g vue-cli $ vue init webpack my-project $ cd my-project $ npm install $ npm run dev \u4e00\u4e2avue \u9879\u76ee\u662f\u6709\u56fa\u5b9a\u6587\u4ef6\u7ed3\u6784\u7684\uff0c\u4f7f\u7528 vue init webpack my-project \u547d\u4ee4\u53ef\u4ee5\u521d\u59cb\u5316\u4e00\u4e2a\u5177\u5907vue \u5b8c\u6574\u67b6\u6784\u7684\u6587\u4ef6\u76ee\u5f55\uff0c\u7136\u540e\u6211\u4eec\u5230\u76f8\u5e94\u7684\u76ee\u5f55\u4e0b\u53bb\u6dfb\u52a0\u4fee\u6539\u6587\u4ef6\u5373\u53ef\u3002 \u4e0b\u9762\u8bb2\u8bb2 \u5404\u4e2a build webpack \u6253\u5305\u9759\u6001\u6587\u4ef6\u7684\u914d\u7f6e\uff0c\u5305\u542bdev /test/product \u4e09\u4e2a\u73af\u5883\u7684\u914d\u7f6e config - webpack config files webpack \u6253\u5305\u9759\u6001\u6587\u4ef6\u7684\u914d\u7f6e\uff0c\u5305\u542bdev /test/product \u4e09\u4e2a\u73af\u5883\u7684\u914d\u7f6e dist \u8fd9\u4e2a\u6587\u4ef6\u5939\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u662f\u6ca1\u6709\u7684\uff0c\u53ea\u6709\u8fd0\u884c\u4e86 npm run build \u547d\u4ee4\u540e\uff0c\u624d\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u76ee\u5f55\u3002\u6253\u5305\u597d\u7684\u9759\u6001\u6587\u4ef6\u5c31\u5b58\u653e\u5728\u6b64\u5904\uff0c\u90e8\u7f72\u5230\u670d\u52a1\u5668\u4e0a\u65f6\uff0c\u5c31\u662f\u91c7\u7528\u8fd9\u91cc\u7684\u6587\u4ef6\u3002 src #src \u624d\u662f\u6211\u4eec\u4fee\u6539\u524d\u7aefvue \u6e90\u7801\u7684\u771f\u6b63\u5730\u65b9\uff0c\u4e0b\u9762\u8bbe\u5f88\u591a\u4e2a\u76ee\u5f55 api #\u5b58\u653e\u524d\u7aef\u8c03\u7528api \u7684\u5730\u65b9 assets # \u4e00\u4e9b\u8d44\u6e90\u6587\u4ef6 \u5982 \u56fe\u7247\u7b49 common # \u4e00\u4e9b\u516c\u7528\u65b9\u6cd5 components - # \u7ec4\u4ef6\uff0cvue \u7684\u4e00\u4e2a\u7279\u6b8a\u4e4b\u5904\u5c31\u662f\u53ef\u4ee5\u4f7f\u7528\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u7684\u4f5c\u7528\u7c7b\u4f3c\u4e8ehtml\u7684\u51fd\u6570\uff0c\u4f5c\u7528\u662f\u590d\u7528 styles # css \u6587\u4ef6 views # \u5b9a\u4e49 vue \u9875\u9762\u7684\u5730\u65b9\uff0c\u4e3b\u529b\u5f00\u53d1\u5c31\u5728\u6b64\u5904 store # \u8bf7\u6c42\u540e\u7aef\u8fd4\u56de\u7684\u6570\u636e\uff0c\u5728\u6b64\u5904\u5168\u5c40\u5b58\u653e App.vue # \u5165\u53e3\u9875\u9762 main.js # \u5165\u53e3 \u52a0\u8f7d\u7ec4\u4ef6 \u521d\u59cb\u5316\u7b49 routes.js # \u8def\u7531\u5b9a\u4e49 static # \u4e00\u4e9b\u9759\u6001\u6587\u4ef6\u5b58\u653e\u5730\u65b9\uff0c\u6211\u4eec\u51e0\u4e2a\u9879\u76ee\u6b64\u76ee\u5f55\u90fd\u662f\u7a7a\u7684 index.html # \u6574\u4e2avue \u552f\u4e00\u7684\u4e00\u4e2ahtml,\u628a Vue \u5e94\u7528\u901a\u8fc7 main.js\u6302\u8f7d\u5230\u4e00\u4e2a DOM \u5143\u7d20\u4e0a index.html \u6587\u4ef6\u5185\u5bb9 <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <link rel=\"shortcut icon\" type=\"image/png\" href=\"/static/favicon.png\" /> <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\"> <title>title text</title> </head> <body style=\"margin: 0px\"> <div id=\"app\"></div> <!-- built files will be auto injected --> </body> </html> main.js \u5185\u5bb9 /* main.js */ import App from './App' /* \u628aApp.vue \u9875\u9762import \u8fdb\u6765 /* new Vue({ el: '#app', /* \u6b64\u5904 \u4e0a\u6587\u7684 index.html \u8fdb\u884c\u6302\u8f7d\uff0c\u901a\u8fc7 app\u8fd9\u4e2aid/* render: h => h(App) /* \u628aVue \u5e94\u7528\u4f1a\u5c06\u5176\u6302\u8f7d\u5230\u4e00\u4e2a DOM \u5143\u7d20\u4e0a })","title":"vue \u9879\u76ee\u6587\u4ef6\u7ed3\u6784\u4ecb\u7ecd"},{"location":"6.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5D%E5%89%8D%E7%AB%AFvue%E4%BB%8B%E7%BB%8D/#vue-router","text":"vue \u7684\u8bbe\u8ba1\u601d\u60f3\u8ddfserver \u7aef\u7684\u5f88\u7c7b\u4f3c\uff0c\u5b83\u7684router \u8ddf \u540e\u7aef\u7684\u4e5f\u662f\u540c\u6837\u7684\u542b\u4e49\uff0c\u6839\u636e\u8bf7\u6c42\u7684uri \u8def\u7531\u5230\u4e0d\u540c\u7684\u9875\u9762\u53bb\uff0c\u57fa\u672c\u4e0a\u4e5f\u53ef\u4ee5\u8ba4\u4e3avue router \u662f\u6211\u4eec\u524d\u7aef\u6587\u4ef6\u7684\u5927\u95e8\u3002 \u90a3\u4e48 vue router \u662f\u600e\u4e48\u5f15\u7528\u8d77\u6765\u7684\u5462\uff1f\u4e5f\u662f\u7c7b\u4f3c\uff0c\u901a\u8fc7main.js \u6587\u4ef6\u4e2d import router from './router' new Vue({ el: '#app', router, /* \u6b64\u5904\u628a router\u7ed1\u5b9a\u5230 vue \u5e94\u7528\u4e0a render: h => h(App) }) router/index.js import Vue from 'vue' import Router from 'vue-router' import Main from '@/views/main' import CreatePublishPlan from '@/views/pages/CreatePublishPlan' Vue.use(Router) export const navRoutes = [ { path: 'create-plan', component: CreatePublishPlan, // uri: create-plan \u4e0e\u6211\u4eec\u7684CreatePublishPlan \u7ec4\u4ef6\u7ed1\u5b9a title: '\u521b\u5efa\u53d1\u7248', name: 'CreatePlan', icon: 'el-icon-edit-outline', meta: { cache: true } } ] export default new Router({ mode: 'history', // require service support routes: [ { path: '/', name: 'Home', component: Main, // \u83dc\u5355\u5165\u53e3 children: navRoutes // \u5d4c\u5957\u8def\u7531 } ] }) \u4f7f\u7528router-view \u4f7f\u5f97\u83dc\u5355\u680f\u4e00\u76f4\u4fdd\u6301\u5728\u9875\u9762\u4e0a\uff0c\u8bf7\u6ce8\u610f\u770b \u6587\u4e2d\u7684\u6ce8\u91ca views/main.vue \u5185\u5bb9 <template> <el-container> <el-header> <el-menu :default-active=\"$route.name\" mode=\"horizontal\" background-color=\"#545c64\" text-color=\"#fff\" active-text-color=\"#ffd04b\" router> </el-menu> </el-header> <el-main> <transition name=\"fade\" mode=\"out-in\"> <keep-alive :include=\"cache_component_names\"> <!-- \u8def\u7531\u51fa\u53e3 --> <!-- \u8def\u7531\u5339\u914d\u5230\u7684\u7ec4\u4ef6\u5c06\u6e32\u67d3\u5728\u8fd9\u91cc --> <router-view/> </keep-alive> </transition> </el-main> </el-container> </template>","title":"Vue  Router"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/","text":"DBMS \u90e8\u7f72\u8bf4\u660e 1.\u6587\u6863\u9002\u7528\u8303\u56f4\uff1a \u6d4b\u8bd5\u73af\u5883 \u4e0e\u53ca\u751f\u4ea7\u73af\u5883\uff0c\u5f00\u53d1\u73af\u5883\u90e8\u7f72\u6587\u6863\u8bf7\u53c2\u89c1\u9879\u76ee\u5185\u7684readme.md ps: django\u9879\u76ee\uff0c\u5f00\u53d1\u73af\u5883\u4e0b\u8fd0\u884c\u4e0d\u4f9d\u8d56\u4e8egunicorn\uff08\u4fbf\u4e8e\u8c03\u8bd5\uff09\uff0c\u4f46\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u4e0b\u4f7f\u7528gunicorn,\u56e0\u800c\u4e8c\u8005\u90e8\u7f72\u6587\u6863\u6709\u5dee\u5f02\u3002 2.DBMS \u6574\u4f53\u90e8\u7f72\u8bf4\u660e \u6a21\u5757 DBMS \u662f\u4e2a\u57fa\u4e8e inception\u7684\u4e8c\u6b21\u5f00\u53d1\u7684\u7cfb\u7edf\uff0c\u4f7f\u7528\u7684\u662fpython3.6 \u7248\u672c\uff0c\u57fa\u4e8edjango \u6846\u67b6\uff0c\u540e\u6765\u53c8\u52a0\u5165\u4e86\u5c0f\u7c73\u7684soar \u4f5c\u4e3a\u4e00\u4e2asql \u5ba1\u6838\u5de5\u5177\u3002\u6240\u4ee5\u6211\u4eec\u5728\u90e8\u7f72\u65f6\uff0c\u9700\u8981\u90e8\u7f72\u4ee5\u4e0b\u8fd9\u4e9b\u6a21\u5757\uff1a inception \u5c0f\u7c73soar dbms \u672c\u8eab\u7a0b\u5e8f\uff08dbms+gunicorn +nginx\uff09 \u5176\u4e2d dbms \u90e8\u7f72\u65f6 \u9700\u91c7\u7528 gunicorn \u4f5c\u4e3a\u670d\u52a1\u5668\uff0c\u63d0\u4f9b\u670d\u52a1\u5904\u7406/\u670d\u52a1\u7ba1\u7406/\u670d\u52a1\u8d1f\u8f7d\u5747\u8861\u7684\u5de5\u4f5c\uff0cnginx \u4f5c\u4e3a\u9759\u6001\u6587\u4ef6\u7684\u670d\u52a1\u5668 \u4e0e\u53ca\u628a\u7aef\u53e3\u8f6c\u53d1\u5230gunicorn\u3002 \u6570\u636e\u5e93 \u7248\u672c\u8981\u6c42\uff1a mysql5.6 \uff0c\u5176\u4ed6\u7248\u672c\u672a\u9a8c\u8bc1\u8fc7\uff0c\u4e0d\u77e5\u662f\u5426\u6709\u517c\u5bb9\u95ee\u9898 \u4ece\u67b6\u6784\u56fe\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6570\u636e\u5e93\u662f\u6709\u4e09\u5927\u7528\u9014\u7684\uff1a inception \u5728\u8fd0\u884c\u65f6 \u9700\u8981\u4fdd\u5b58\u5907\u4efd\u548c\u56de\u6eda\u6570\u636e\u7684myql \u6570\u636e\u5e93\uff0c\u8fd9\u90e8\u5206inception \u81ea\u884c\u7ba1\u7406\uff0c\u53ea\u9700\u7533\u8bf7\u6216\u8005\u5b89\u88c5\u597dmysql \u5b9e\u4f8b\u540e\uff0c \u5728inception\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a \u6570\u636e\u5e93\u53c2\u6570\uff08host user password \u7b49\u4fe1\u606f\uff09\u5373\u53ef \u5c0f\u7c73soar \u5728\u8bc4\u4f30sql \u65f6\u9700\u8981\u4e34\u65f6\u5efa\u8868\u7684\u6570\u636e\u5e93\uff0c\u540cinception,\u8fd9\u4e2a\u5e93\u4e5f\u662f\u7531saor \u6765\u81ea\u884c\u7ba1\u7406\uff0c\u53ea\u9700\u4fee\u6539soar \u914d\u7f6e\u6587\u4ef6\uff0c\u63d0\u4f9b\u6570\u636e\u5e93\u53c2\u6570\u5373\u53ef dbms \u672c\u8eab\u4f7f\u7528\u7684\u6570\u636e\u5e93\uff0c\u4e3b\u8981\u8bb0\u5f55\u7ebf\u4e0a\u6570\u636e\u5e93\u5730\u5740/\u8d26\u53f7/\u7528\u6237\u6743\u9650\u7ba1\u7406\u7b49\u4fe1\u606f\uff0c\u7531dbms \u672c\u8eab\u521b\u5efa\u8868\u7ed3\u6784\uff0c\u65b0\u589e\u4fee\u6539\u5220\u9664\u6570\u636e\u7b49\uff0c\u5728\u521d\u59cb\u5316\u90e8\u7f72\u65f6\uff0c\u9700\u521d\u59cb\u5316\u6570\u636e\u5e93 \u6240\u4ee5\uff0c\u6570\u636e\u5e93\u8fd9\u5757\u6211\u4eec\u9700\u8981\u5b89\u88c5\u4e86\u4e00\u4e2a mysql5.6 \u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u6839\u636edbms\u7684\u521d\u59cb\u5316\u6b65\u9aa4\uff0c\u521d\u59cb\u5316\u6570\u636e\u5e93\uff0c\u518d\u4fee\u6539\u4e09\u5904\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u3002 3.\u90e8\u7f72\u76ee\u5f55\u7ea6\u5b9a \u4ee5\u4e0b\u7684\u90e8\u7f72\uff0c\u6211\u4eec\u9075\u5faa\u4ee5\u4e0b\u7684\u76ee\u5f55\u539f\u5219\uff1a /data/svr/\u9879\u76ee\u540d \u5982\uff1a /data/svr/dbms ,/data/svr/inception ,/data/svr/soar \u8fd9\u4e2a\u76ee\u5f55\u4e0b \u653e\u7f6e\u6a21\u5757\u6e90\u7801 /data/conf/\u9879\u76ee\u540d/ \u5982\uff1a/data/conf/dbms/, /data/conf/inception/, \u8fd9\u4e2a\u76ee\u5f55\u4e0b\u653e\u7f6e\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\uff0c \u4f46soar \u6709\u70b9\u7279\u6b8a\uff0csoar\u7684\u914d\u7f6e\u6587\u4ef6\u662f\u8ddf\u968f\u6e90\u7801\u76ee\u5f55\uff1a/data/svr/soar/ \uff0c\u8fd9\u4e2a\u5f53\u65f6\u6ca1\u6709\u505asoar\u7684\u8f6f\u94fe /data/sh/\u9879\u76ee\u540d.sh \u5982\uff1a /data/sh/dbms.sh\uff0c /data/sh/inception.sh , /data/sh/redis.sh ,/data/sh/dbms-celery.sh \u8fd9\u4e2a\u76ee\u5f55 \u4e3b\u8981\u662f\u653e\u9879\u76ee\u7684\u542f\u505c\u811a\u672c /data/logs/\u9879\u76ee\u540d \u5982\uff1a /data/logs/dbms ,/data/logs/dbms-celery, /data/logs/soar, /data/logs/redis \u653e\u7f6e\u9879\u76ee\u7684log, \u4f46inception\u7684log \u653e\u5728\u4e86tmp\u76ee\u5f55\u5e95\u4e0b\uff08\u8fd9\u4e2a\u4ee5\u524d\u4e00\u76f4\u662f\u8fd9\u4e48\u653e\u7684\uff0c\u4e5f\u6ca1\u4eba\u4fee\u6539\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\uff0c\u53ef\u4ee5\u5148\u67e5\u770b\u4e0b\u6587\u6863\uff0c\uff09 4.\u5177\u4f53\u90e8\u7f72 4.1\u5b89\u88c5mysql5.6\u5b9e\u4f8b \u5b89\u88c5 mysql 5.6 \u7248\u672c\u5b9e\u4f8b\uff0c\u8bf7\u6309\u6307\u5b9a\u7248\u672c\u5b89\u88c5\uff0c\u5176\u4ed6\u7248\u672c\u672a\u7ecf\u9a8c\u8bc1\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\u3002 \u5e76\u521b\u5efa\u76f8\u5e94\u7684\u7528\u6237\uff0c\u4f7f\u5f97\u8be5\u7528\u6237\u5177\u5907\u65b0\u589e\u6570\u636e\u5e93/ \u65b0\u5efa\u8868/\u4fee\u6539\u8868/\u5220\u9664\u8868\u7b49\u6743\u9650. \u8fd0\u884cmysql server. 4.2 \u90e8\u7f72inception \u7f16\u8bd1\u5b89\u88c5 inception \u6e90\u7801\uff1a https://github.com/qunarcorp/inception inception \u6587\u6863\u8bf4\u660e\uff1ahttps://qunarcorp.github.io/inception/ \u8bf7\u521b\u5efa /data/svr/inception \u76ee\u5f55\u540e\uff0c\u5728\u8be5\u76ee\u5f55\u4e0b\uff0c\u6839\u636einception\u7684\u6587\u6863\u8fdb\u884c\u7f16\u8bd1\u5b89\u88c5\u3002 \u521b\u5efa\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u628a\u4ee5\u4e0b\u914d\u7f6e\u9009\u9879\u5efa\u7acb\u5230 /data/conf/inception/inception.cnf \u6587\u4ef6\uff0c \u5e76\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\uff0c \u5982 \u6570\u636e\u5e93\u5730\u5740 /\u8d26\u53f7/\u7aef\u53e3\u7b49\u4fe1\u606f\u3002 [inception] # inception\u8fd0\u884c\u7684\u7aef\u53e3\u53f7 port=6669 socket=/tmp/inc.socket general_log=ON # \u8bbe\u7f6einception\u7684\u65e5\u5fd7\u8def\u5f84 general_log_file=/tmp/inception.log #mysql \u5b9e\u4f8b\u7684\u5730\u5740\uff0c\u8d26\u53f7 \u7aef\u53e3\u7b49\u4fe1\u606f\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 inception_remote_system_user=backup inception_remote_system_password=fd56RDtXwTgEExl7Ewx inception_remote_backup_port=3306 inception_remote_backup_host=10.13.137.136 #\u5b57\u7b26\u96c6 character-set-client-handshake=0 character-set-server=utf8mb4 inception_support_charset=utf8mb4,utf8 #\u662f\u5426\u5141\u8bb8\u5217\u81ea\u5df1\u8bbe\u7f6e\u5b57\u7b26\u96c6 inception_enable_column_charset=1 #\u53ef\u4ee5\u4f7f\u7528\u5173\u952e\u5b57 inception_enable_identifer_keyword=ON #\u4e0d\u652f\u6301\u5916\u952e inception_enable_foreign_key=OFF #\u81ea\u589e\u5217\u53ef\u4ee5\u4e0d\u4e3a\u65e0\u7b26\u53f7\u578b inception_enable_autoincrement_unsigned=OFF #pt-osc\u5de5\u5177\u7684\u8def\u5f84 inception_osc_bin_dir=/usr/bin/ #\u8868\u5927\u5c0f\u5927\u4e8e4G\u65f6\u4f7f\u7528pt-osc inception_osc_min_table_size=4096 inception_max_update_rows = 50000 \u53e6\uff0cinception \u914d\u7f6e\u6587\u4ef6\u8bf4\u53ef\u53c2\u89c1\u5b98\u65b9\u6587\u6863\uff1ahttp://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563 \u542f\u52a8inception \u542f\u52a8\uff1a/data/svr/inception/debug/sql/Inception \u2013defaults-file=/data/conf/inception/inception.cnf \u6ce8\u610f\u4e8b\u9879 \uff1a inception \u4e0b\u8f7d\u6e90\u7801\u7f16\u8bd1\u4e00\u6b21\u540e\uff0c\u5982\u679c\u9700\u8981\u505a\u8fc1\u79fb\uff0c\u8fc1\u79fb\u7684\u4e24\u53f0\u4e3b\u673a \u7cfb\u7edf\u4e0e\u53ca\u7cfb\u7edf\u7248\u672c\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u628a\u7f16\u8bd1\u6587\u4ef6 copy \u8fc7\u53bb\u8fd0\u884c\u5373\u53ef\u3002 \u6d4b\u8bd5\u73af\u5883\u7684DBMS\uff0c\u662f\u7ed9test-a\uff0ctest-b\u7b49\u73af\u5883\u4f7f\u7528\uff0c\u5730\u5740\u662f 192.168.1.15 4.3 \u4e0b\u8f7dsoar \u53ef\u6267\u884c\u6587\u4ef6 soar \u4f5c\u4e3a\u4e00\u4e2a\u5de5\u5177\uff0c\u662f\u4e0d\u9700\u8981\u8fd0\u884c\u7684\uff0c\u53ea\u8981\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6709\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4ee3\u7801\uff0c\u5373\u53ef \u4e0b\u8f7d\u5730\u5740https://github.com/XiaoMi/soar \u6839\u636e\u7cfb\u7edf\u4e0b\u8f7d\u4e8c\u8fdb\u5236 \u6587\u4ef6\u5373\u53ef \u628asoar \u53ef\u6267\u884c\u6587\u4ef6\u653e\u5230\u6307\u5b9a\u76ee\u5f55\uff1a /data/svr/soar/soar.linux-amd64 \u521b\u5efa\u5e76\u4fee\u6539soar\u914d\u7f6e\u6587\u4ef6 \u4f7f\u7528\u4ee5\u4e0b\u5185\u5bb9\uff0c\u521b\u5efa\u6587\u4ef6 /data/svr/soar/soar.yaml \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 log-level: 6 log-output: /data/logs/soar/soar.log \u76ee\u524d\u53ea\u914d\u7f6e\u5173\u4e8elog\u8fd9\u4e24\u4e2a\u9009\u9879\uff0c\u5982\u679c\u9700\u8981\u589e\u52a0\u5176\u4ed6\u9009\u9879 \uff0c\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\u8fdb\u884c\u5904\u7406\u3002 4.4\u5b89\u88c5redis \u7531\u4e8edbms \u91c7\u7528celery \u505a\u4e86\u5f02\u6b65\u67e5\u8be2\uff0c\u9700\u8981\u4f9d\u8d56\u4e8eredis\u505a\u6d88\u606f\u961f\u5217\uff0c\u6240\u4ee5\u9700\u8981\u5b89\u88c5redis\uff0c\u5e76\u542f\u52a8\u3002 \u914d\u7f6e\u6587\u4ef6\u8bf7\u653e\u5230 /data/conf/redis/6379.conf redis\u542f\u52a8\u811a\u672c\u8bf7\u653e\u5230 /data/sh/redis.sh 4.5 \u5b89\u88c5openresty \u5b89\u88c5openresty \u5230\u76ee\u5f55 /data/svr \u76ee\u5f55\u4e0b\uff0c\u628a\u542f\u52a8\u811a\u672c\u653e\u7f6e\u5230 /data/sh/openresty.sh \u4e0b\uff0c \u5e76\u628a dbms.conf \u653e\u7f6e\u5230 /data/conf/openresty/vhost/ \u76ee\u5f55\u4e0b\uff0c\u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u53ea\u9700\u6539\u57df\u540d\uff0c\u5176\u4ed6\u53ef\u4e0d\u52a8\u3002 upstream gunicorn { # gunicorn\u7684\u8fd0\u884c\u5730\u5740 server 127.0.0.1:8080; } server { listen 80; # \u6b64\u5904\u8bbe\u7f6e\u57df\u540d\uff0c\u5982\u679c\u662f\u6d4b\u8bd5\u73af\u5883\u4e0b\uff0c\u53ef\u66f4\u6362\u4e3aip\u5730\u5740 server_name myadmin.ops.yunnex.com; access_log /data/logs/openresty/dbms.access.log main; charset utf-8; location = /50x.html { root html; } location / { include uwsgi_params; proxy_pass http://gunicorn; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $http_x_forwarded_for; #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $host; proxy_redirect off; } location /static/ { root /data/svr/dbms-static/; expires off; #access_log off; } location /docs { index index.html; alias /data/svr/dbms-doc/site; expires off; } location = /favicon.ico { rewrite (.*) /static/favicon.ico; } location = /robots.txt { root html; } } 4.6 \u5b89\u88c5supervisor \u5b89\u88c5\u8fc7\u7a0b\u8bf7\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28607636 supervisor \u4e3b\u8981\u662f\u7528\u6765\u5b88\u62a4 dbms-celery\u7684\u8fdb\u7a0b\uff0cgunicorn \u65e0\u9700supervisor \u3002 \u542f\u52a8\u811a\u672c\u8bf7\u653e\u5230 /data/sh/supervisord.sh /data/sh/supervisorctl.sh \u5b89\u88c5supervisord \u65f6\u8bf7\u786e\u4fdd \u914d\u7f6e\u6587\u4ef6\u653e\u7f6e\u4e8e /data/conf/supervisor/ \u76ee\u5f55\u4e0b\u3002 \u914d\u7f6e /data/conf/supervisor/conf.d/dbms-celry.conf [group:dbms-celery] programs=dbms-celery-1 [program:dbms-celery-1] environment=PYTHONOPTIMIZE=1 command=/data/svr/python36dbms/bin/celery worker -A db-tool -l info --logfile=/data/logs/dbms-celery/celery.log process_name=%(program_name)s startsecs=1 directory=/data/svr/dbms autorestart=true autostart=true stderr_logfile=/data/logs/supervisor/%(program_name)s_error.log stderr_logfile_maxbytes=50MB stderr_logfile_backups=10 stdout_logfile=/data/logs/supervisor/%(program_name)s_error.log stdout_logfile_maxbytes=50MB stdout_logfile_backups=10 user=root stopsignal=INT 4.6 \u90e8\u7f72dbms \u62c9\u53d6dbms\u4ee3\u7801 \u9879\u76ee\u5730\u5740\uff1ahttp://git.dev.yunnex.com/ops/dbms.git \u628a\u6e90\u7801\u62c9\u53d6\u5230 /data/svr/dbms \u76ee\u5f55\u4e0b \u521b\u5efa\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 mkdir -p /data/conf/dbms cp db-tool/local_settings_example.py /data/conf/dbms/local_settings.py \u4fee\u6539local_settings.py \u4fee\u6539inception \u914d\u7f6e(local_settings.py) # inception setting ##inception \u8fd0\u884c\u6240\u5728\u7684\u4e3b\u673a \u548c\u8fd0\u884c\u7684\u7aef\u53e3\u53f7 INCEPTION_HOST = '10.10.50.30' INCEPTION_PORT = 6669 # inception\u6267\u884c\u4e4b\u540e\uff0c\u5904\u7406rollback\u8bed\u53e5\uff0c\u6240\u9700\u7684\u7528\u6237 # \u5373\uff1ainception\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684inception_remote_system_user BACKUP_HOST = '192.168.1.15' BACKUP_PORT = 3306 BACKUP_USER = 'root' BACKUP_PASSWD = '3uqaGVM8CST8Uq1z' \u4fee\u6539soar \u914d\u7f6e(local_settings.py) # soar setting # soar\u9700\u8981\u914d\u7f6e\u6570\u636e\u5e93\uff0c\u8fdb\u884c\u6570\u636e\u91c7\u6837\uff0c #\u7136\u540e\u5728\u91c7\u6837\u83b7\u5f97\u7684\u6570\u636e\u8868\u4e0a\u6267\u884csql \u8bc4\u4f30 # \u6b64\u5904\u914d\u7f6e\u4f9bsoar \u4f7f\u7528\u7684\u6570\u636e\u5e93\uff0c\u9700\u786e\u4fdd \u91c7\u7528\u7684user \u5177\u6709\u65b0\u589e\u6570\u636e\u5e93\u548c\u6570\u636e\u8868\u7684\u6743\u9650 # user:password@mysql_host:port TEST_DSN = 'root:yunnex@10.10.50.30:3306' # soar path \u6307\u5411\u672c\u5730\u7684soar \u76ee\u5f55 SOAR_PATH = 'G:\\\\work\\\\soar\\\\' \u4fee\u6539celery\u914d\u7f6e(local_settings.py) # CELERY settings # celery\u5f02\u6b65\u67e5\u8be2\u4efb\u52a1 \u7ed3\u679c\u5b58\u653e\u5730\u5740 # \u751f\u4ea7\u673a\u5668\u53ef\u5b9a\u671f\u6e05\u7406\u8be5\u76ee\u5f55\uff0c\u5df2\u8bbe\u7f6e\u5b9a\u65f6\u4efb\u52a1\uff08crontab \uff09\u8fdb\u884c\u6e05\u7406 QUERY_RESULT_DIR = '/home/data/dbms-query-result/' # \u6d88\u606f\u961f\u5217 redis \u7684\u5730\u5740/\u6570\u636e\u5e93 CELERY_BROKER_URL = 'redis://10.10.50.30/4' \u4fee\u6539dbms \u8bbe\u7f6e(local_settings.py) # database setting # dbms \u91c7\u7528\u7684\u6570\u636e\u5e93\uff0c\u8bb0\u5f55user db host group \u7b49\u4fe1\u606f # \u53ea\u9700\u4fee\u6539 host user password \u4fe1\u606f DATABASES = { 'default': { 'ENGINE': 'django.db.backends.mysql', 'NAME': 'devops', 'USER': 'remote_user', 'PASSWORD': 'remote_passwd', 'HOST': '10.10.50.30', 'PORT': '3306', 'OPTIONS': { 'init_command': \"SET sql_mode='STRICT_TRANS_TABLES'\", }, }, } # \u754c\u9762\u4e0a\u663e\u793a\u7684\u73af\u5883\u4fe1\u606f SITE_NAME = '\u751f\u4ea7\u73af\u5883' # static setting # \u5f53\u4f7f\u7528 python manage.py collectstatic\u547d\u4ee4\u53bb\u81ea\u52a8\u5316\u751f\u6210\u9759\u6001\u6587\u4ef6\u65f6\uff0c # \u628a\u9759\u6001\u6587\u4ef6 \u5b58\u653e\u5230\u54ea\u91cc STATIC_ROOT = '/data/svr/dbms-static' \u5b89\u88c5python3.6 \u5e76\u4f7f\u7528\u865a\u62df\u73af\u5883 \u5177\u4f53\u5b89\u88c5\u548c\u865a\u62df\u73af\u5883\u8bbe\u7f6e\u8bf7\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28607633 \u786e\u4fdd\u6b64\u6b65\u9aa4\u865a\u62df\u51fa\u7684\u73af\u5883\u540d\u53ca\u8def\u5f84\u4e3a /data/svr/python36dbms \uff08\u542f\u52a8\u811a\u672c\u4f1a\u4f9d\u8d56\u6b64\u865a\u62df\u73af\u5883\u540d\u79f0\uff09 \u5b89\u88c5python\u9879\u76ee\u4f9d\u8d56 #\u6fc0\u6d3b\u865a\u62df\u73af\u5883 \u5e76\u4fdd\u6301\uff0c\u76f4\u5230 \u9879\u76ee\u90e8\u7f72\u6210\u529f source /data/svr/python36dbms/bin/activate cd /data/svr/dbms # \u5b89\u88c5\u4f9d\u8d56 pip install -r requirement.txt # \u5b89\u88c5\u5f00\u53d1\u73af\u5883\u4e0b\u7684\u4f9d\u8d56,\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u65e0\u9700\u5904\u7406 python install -r requirement-deploy.txt # \u5982\u679c\u662fwindow\u5f00\u53d1\uff0c\u8fd8\u9700\u5b89\u88c5evenlet\uff08celery\u4f9d\u8d56\uff09 pip install eventlet==0.25.2 \u521d\u59cb\u5316dbms\u6570\u636e\u5e93 \u5728\u5b89\u88c5\u597d\u7684mysql \u5b9e\u4f8b\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93devops create database devops; \u6267\u884c\u547d\u4ee4\uff0c\u628a\u6570\u636e\u5e93\u7ed3\u6784\u5efa\u7acb\u5230 \u6570\u636e\u5e93 \u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u7684\u610f\u601d\u662f\u663e\u793a\u51fa\u6709\u54ea\u4e9b\u6570\u636e\u5e93\u53d8\u66f4\u548c\u5f53\u524d\u72b6\u6001\uff08which lists a project\u2019s migrations and their status.\uff09 python manage.py showmigrations \u751f\u6210\u53d8\u66f4\u6587\u4ef6\uff08which is responsible for creating new migrations based on the changes you have made to your models.\uff09 python manage.py makemigrations \u6267\u884c\u53d8\u66f4\u5230\u6570\u636e\u5e93\uff08which is responsible for applying and unapplying migrations\uff09 python manage.py migrate \u6536\u96c6 django \u9759\u6001\u6587\u4ef6 \u8bf7\u786e\u4fdd /data/conf/dbms/local_settings.py \u6587\u4ef6\u4e2dSTATIC_ROOT \u662f\u6307\u5411 /data/svr/dbms-static/ \uff0c \u7136\u540e\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff0c\u628acss \u7b49\u9759\u6001\u6587\u4ef6\u6536\u96c6\u5230\u6307\u5b9a\u4f4d\u7f6e # \u9759\u6001\u6587\u4ef6 # \u9759\u6001\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\uff1a/data/svr/dbms-static/ python manage.py collectstatic \u521b\u5efa\u5e76\u4fee\u6539gunicorn \u914d\u7f6e\u6587\u4ef6 \u5728\u975e\u5f00\u53d1\u73af\u5883\u4e2d, django \u53ea\u4f5c\u4e3a\u4e00\u4e2a http framwork\u6765\u4f7f\u7528\uff0c\u4e0d\u5177\u5907server\u7684\u529f\u80fd\uff0c\u9700\u8981gunicorn \u6765\u5b9e\u73b0\uff0c\u521b\u5efa gunicorn.cnf \u5230\u76ee\u5f55 /data/conf/dbms/ \u4e0b\uff08\u542f\u52a8\u811a\u672c\u4f1a\u4f9d\u8d56\u6b64\u8def\u5f84\uff09 gunicorn.cnf \u5185\u5bb9\uff1a worker_class = 'gevent' graceful_timeout = 28800 workers = 8 threads = 16 daemon = True access_log_format = '%(h)s %(l)s %(u)s %(t)s \"%(r)s\" %(s)s %(b)s \"%(f)s\" \"%(a)s\" %(L)s \"%({Header}i)s\" \"%({Header}o)s\" ' loglevel = 'debug' bind = '127.0.0.1:8080' timeout = 28800 backlog = 65535 # dbms \u6e90\u7801\u4f4d\u7f6e chdir = '/data/svr/dbms' # log \u65e5\u5fd7\u8bbe\u7f6e errorlog = '/data/logs/dbms/gunicorn.log' accesslog = '/data/logs/dbms/gunicorn.log' \u590d\u5236\u811a\u672c\u5e76\u542f\u52a8\u670d\u52a1 \u8bf7\u628a\u4ee5\u4e0b\u4e24\u4e2a\u811a\u672c dbms.sh dbms-celery \u521b\u5efa\u5230 /data/sh \u76ee\u5f55\u4e0b\uff0c \u521b\u5efa\u5b8c\u6210\u540e\uff0c\u6309\u4ee5\u4e0b\u811a\u672c\u8fdb\u884c\u542f\u52a8\uff0c\u542f\u52a8\u5b8c\u6210\u540e\u90e8\u7f72\u5b8c\u6210 # \u542f\u52a8openresty /data/sh/openresty.sh start # \u542f\u52a8redis /data/sh/redis.sh #\u542f\u52a8 inception /data/svr/inception/debug/sql/Inception --defaults-file=/data/conf/inception/inception.cnf #\u542f\u52a8supervisord\uff08\u5148\u542f\u52a8supervisord\uff0c\u518d\u542f\u52a8dbms \u548cdbms-celery\uff09 /data/sh/supervisord.sh # \u542f\u52a8dbms /data/sh/dbms.sh start # \u542f\u52a8dbms-celery /data/sh/dbms-celery.sh start /data/sh/dbms.sh` #!/bin/bash source /data/svr/python36dbms/bin/activate start() { gunicorn db-tool.wsgi -c /data/conf/dbms/gunicorn.conf } stop() { pkill -9 -f gunicorn.conf } status() { pid=$(ps -ef |grep \"/data/conf/dbms/gunicorn.conf\"|grep -v grep |awk '{print $2}') if [[ \"${pid}\" ]] ; then echo \"running\" else echo \"stopping\" fi } restart() { stop && start } case \"$1\" in start) $1 ;; stop) $1 ;; status) $1 ;; refresh) $1 ;; restart) $1 ;; *) echo $\"Usage: $0 {start|stop|status|restart}\" exit 1 esac exit $? /data/sh/dbms-celery.sh #!/bin/bash GROUPNAME=dbms-celery PIDPATH=/var/run CONF=/data/conf/supervisor/supervisord.conf USER=product PROGRAM=\"/usr/bin/supervisorctl -c $CONF\" if [ ! -d $PIDPATH ]; then mkdir $PIDPATH chown $USER $PIDPATH fi RETVAL=0 start() { $PROGRAM start $GROUPNAME:* RETVAL=$? } stop() { $PROGRAM stop $GROUPNAME:* RETVAL=$? } restart() { $PROGRAM restart $GROUPNAME:* RETVAL=$? } status() { $PROGRAM status $GROUPNAME:* RETVAL=$? } case \"$1\" in start) start ;; stop) stop ;; restart) restart ;; status) status ;; *) echo $\"Usage: $0 {start|stop|status|restart}\" exit 1 esac exit $RETVAL \u5b9a\u65f6\u4efb\u52a1\u6e05\u7406\u65e5\u5fd7 \u548c\u6e05\u7406celery_query \u7ed3\u679c 0 0 * * * /bin/bash /root/cron/cut_dbms_celery_log.sh 0 0 * * 0 /bin/bash /root/cron/delete_query_result.sh cut_dbms_celery_log.sh #!/bin/bash src_path=\"/data/logs/dbms-celery\" src_file=\"celery.log\" suffix=\"$(date -d \"yesterday\" +\"%F\")\" save_backup_day=30 cut_log() { file_path=\"${src_path}/${src_file}\" cp ${file_path} ${file_path}.$suffix && > ${file_path} find ${src_path} -mtime +\"${save_backup_day}\" -exec rm -rf {} \\; >/dev/null 2>&1 } cut_log delete_query_result.sh #!/bin/bash src_path=\"/data/logs/dbms-celery\" src_file=\"celery.log\" suffix=\"$(date -d \"yesterday\" +\"%F\")\" save_backup_day=30 cut_log() { file_path=\"${src_path}/${src_file}\" cp ${file_path} ${file_path}.$suffix && > ${file_path} find ${src_path} -mtime +\"${save_backup_day}\" -exec rm -rf {} \\; >/dev/null 2>&1 } cut_log [root@UGZ-DBMS-001 ~]# cat /root/cron/delete_query_result.sh base_dir=\"/home/data/dbms-query-result\" save_backup_day=90 find ${base_dir} -mtime +\"${save_backup_day}\" -delete","title":"dbms\u90e8\u7f72"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#dbms","text":"","title":"DBMS \u90e8\u7f72\u8bf4\u660e"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#1","text":"\u6d4b\u8bd5\u73af\u5883 \u4e0e\u53ca\u751f\u4ea7\u73af\u5883\uff0c\u5f00\u53d1\u73af\u5883\u90e8\u7f72\u6587\u6863\u8bf7\u53c2\u89c1\u9879\u76ee\u5185\u7684readme.md ps: django\u9879\u76ee\uff0c\u5f00\u53d1\u73af\u5883\u4e0b\u8fd0\u884c\u4e0d\u4f9d\u8d56\u4e8egunicorn\uff08\u4fbf\u4e8e\u8c03\u8bd5\uff09\uff0c\u4f46\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u4e0b\u4f7f\u7528gunicorn,\u56e0\u800c\u4e8c\u8005\u90e8\u7f72\u6587\u6863\u6709\u5dee\u5f02\u3002","title":"1.\u6587\u6863\u9002\u7528\u8303\u56f4\uff1a"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#2dbms","text":"","title":"2.DBMS \u6574\u4f53\u90e8\u7f72\u8bf4\u660e"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#_1","text":"DBMS \u662f\u4e2a\u57fa\u4e8e inception\u7684\u4e8c\u6b21\u5f00\u53d1\u7684\u7cfb\u7edf\uff0c\u4f7f\u7528\u7684\u662fpython3.6 \u7248\u672c\uff0c\u57fa\u4e8edjango \u6846\u67b6\uff0c\u540e\u6765\u53c8\u52a0\u5165\u4e86\u5c0f\u7c73\u7684soar \u4f5c\u4e3a\u4e00\u4e2asql \u5ba1\u6838\u5de5\u5177\u3002\u6240\u4ee5\u6211\u4eec\u5728\u90e8\u7f72\u65f6\uff0c\u9700\u8981\u90e8\u7f72\u4ee5\u4e0b\u8fd9\u4e9b\u6a21\u5757\uff1a inception \u5c0f\u7c73soar dbms \u672c\u8eab\u7a0b\u5e8f\uff08dbms+gunicorn +nginx\uff09 \u5176\u4e2d dbms \u90e8\u7f72\u65f6 \u9700\u91c7\u7528 gunicorn \u4f5c\u4e3a\u670d\u52a1\u5668\uff0c\u63d0\u4f9b\u670d\u52a1\u5904\u7406/\u670d\u52a1\u7ba1\u7406/\u670d\u52a1\u8d1f\u8f7d\u5747\u8861\u7684\u5de5\u4f5c\uff0cnginx \u4f5c\u4e3a\u9759\u6001\u6587\u4ef6\u7684\u670d\u52a1\u5668 \u4e0e\u53ca\u628a\u7aef\u53e3\u8f6c\u53d1\u5230gunicorn\u3002","title":"\u6a21\u5757"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#_2","text":"\u7248\u672c\u8981\u6c42\uff1a mysql5.6 \uff0c\u5176\u4ed6\u7248\u672c\u672a\u9a8c\u8bc1\u8fc7\uff0c\u4e0d\u77e5\u662f\u5426\u6709\u517c\u5bb9\u95ee\u9898 \u4ece\u67b6\u6784\u56fe\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6570\u636e\u5e93\u662f\u6709\u4e09\u5927\u7528\u9014\u7684\uff1a inception \u5728\u8fd0\u884c\u65f6 \u9700\u8981\u4fdd\u5b58\u5907\u4efd\u548c\u56de\u6eda\u6570\u636e\u7684myql \u6570\u636e\u5e93\uff0c\u8fd9\u90e8\u5206inception \u81ea\u884c\u7ba1\u7406\uff0c\u53ea\u9700\u7533\u8bf7\u6216\u8005\u5b89\u88c5\u597dmysql \u5b9e\u4f8b\u540e\uff0c \u5728inception\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a \u6570\u636e\u5e93\u53c2\u6570\uff08host user password \u7b49\u4fe1\u606f\uff09\u5373\u53ef \u5c0f\u7c73soar \u5728\u8bc4\u4f30sql \u65f6\u9700\u8981\u4e34\u65f6\u5efa\u8868\u7684\u6570\u636e\u5e93\uff0c\u540cinception,\u8fd9\u4e2a\u5e93\u4e5f\u662f\u7531saor \u6765\u81ea\u884c\u7ba1\u7406\uff0c\u53ea\u9700\u4fee\u6539soar \u914d\u7f6e\u6587\u4ef6\uff0c\u63d0\u4f9b\u6570\u636e\u5e93\u53c2\u6570\u5373\u53ef dbms \u672c\u8eab\u4f7f\u7528\u7684\u6570\u636e\u5e93\uff0c\u4e3b\u8981\u8bb0\u5f55\u7ebf\u4e0a\u6570\u636e\u5e93\u5730\u5740/\u8d26\u53f7/\u7528\u6237\u6743\u9650\u7ba1\u7406\u7b49\u4fe1\u606f\uff0c\u7531dbms \u672c\u8eab\u521b\u5efa\u8868\u7ed3\u6784\uff0c\u65b0\u589e\u4fee\u6539\u5220\u9664\u6570\u636e\u7b49\uff0c\u5728\u521d\u59cb\u5316\u90e8\u7f72\u65f6\uff0c\u9700\u521d\u59cb\u5316\u6570\u636e\u5e93 \u6240\u4ee5\uff0c\u6570\u636e\u5e93\u8fd9\u5757\u6211\u4eec\u9700\u8981\u5b89\u88c5\u4e86\u4e00\u4e2a mysql5.6 \u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u6839\u636edbms\u7684\u521d\u59cb\u5316\u6b65\u9aa4\uff0c\u521d\u59cb\u5316\u6570\u636e\u5e93\uff0c\u518d\u4fee\u6539\u4e09\u5904\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u3002","title":"\u6570\u636e\u5e93"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#3","text":"\u4ee5\u4e0b\u7684\u90e8\u7f72\uff0c\u6211\u4eec\u9075\u5faa\u4ee5\u4e0b\u7684\u76ee\u5f55\u539f\u5219\uff1a /data/svr/\u9879\u76ee\u540d \u5982\uff1a /data/svr/dbms ,/data/svr/inception ,/data/svr/soar \u8fd9\u4e2a\u76ee\u5f55\u4e0b \u653e\u7f6e\u6a21\u5757\u6e90\u7801 /data/conf/\u9879\u76ee\u540d/ \u5982\uff1a/data/conf/dbms/, /data/conf/inception/, \u8fd9\u4e2a\u76ee\u5f55\u4e0b\u653e\u7f6e\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\uff0c \u4f46soar \u6709\u70b9\u7279\u6b8a\uff0csoar\u7684\u914d\u7f6e\u6587\u4ef6\u662f\u8ddf\u968f\u6e90\u7801\u76ee\u5f55\uff1a/data/svr/soar/ \uff0c\u8fd9\u4e2a\u5f53\u65f6\u6ca1\u6709\u505asoar\u7684\u8f6f\u94fe /data/sh/\u9879\u76ee\u540d.sh \u5982\uff1a /data/sh/dbms.sh\uff0c /data/sh/inception.sh , /data/sh/redis.sh ,/data/sh/dbms-celery.sh \u8fd9\u4e2a\u76ee\u5f55 \u4e3b\u8981\u662f\u653e\u9879\u76ee\u7684\u542f\u505c\u811a\u672c /data/logs/\u9879\u76ee\u540d \u5982\uff1a /data/logs/dbms ,/data/logs/dbms-celery, /data/logs/soar, /data/logs/redis \u653e\u7f6e\u9879\u76ee\u7684log, \u4f46inception\u7684log \u653e\u5728\u4e86tmp\u76ee\u5f55\u5e95\u4e0b\uff08\u8fd9\u4e2a\u4ee5\u524d\u4e00\u76f4\u662f\u8fd9\u4e48\u653e\u7684\uff0c\u4e5f\u6ca1\u4eba\u4fee\u6539\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\uff0c\u53ef\u4ee5\u5148\u67e5\u770b\u4e0b\u6587\u6863\uff0c\uff09","title":"3.\u90e8\u7f72\u76ee\u5f55\u7ea6\u5b9a"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#4","text":"","title":"4.\u5177\u4f53\u90e8\u7f72"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#41mysql56","text":"\u5b89\u88c5 mysql 5.6 \u7248\u672c\u5b9e\u4f8b\uff0c\u8bf7\u6309\u6307\u5b9a\u7248\u672c\u5b89\u88c5\uff0c\u5176\u4ed6\u7248\u672c\u672a\u7ecf\u9a8c\u8bc1\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\u3002 \u5e76\u521b\u5efa\u76f8\u5e94\u7684\u7528\u6237\uff0c\u4f7f\u5f97\u8be5\u7528\u6237\u5177\u5907\u65b0\u589e\u6570\u636e\u5e93/ \u65b0\u5efa\u8868/\u4fee\u6539\u8868/\u5220\u9664\u8868\u7b49\u6743\u9650. \u8fd0\u884cmysql server.","title":"4.1\u5b89\u88c5mysql5.6\u5b9e\u4f8b"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#42-inception","text":"","title":"4.2 \u90e8\u7f72inception"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#_3","text":"inception \u6e90\u7801\uff1a https://github.com/qunarcorp/inception inception \u6587\u6863\u8bf4\u660e\uff1ahttps://qunarcorp.github.io/inception/ \u8bf7\u521b\u5efa /data/svr/inception \u76ee\u5f55\u540e\uff0c\u5728\u8be5\u76ee\u5f55\u4e0b\uff0c\u6839\u636einception\u7684\u6587\u6863\u8fdb\u884c\u7f16\u8bd1\u5b89\u88c5\u3002","title":"\u7f16\u8bd1\u5b89\u88c5"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#_4","text":"\u628a\u4ee5\u4e0b\u914d\u7f6e\u9009\u9879\u5efa\u7acb\u5230 /data/conf/inception/inception.cnf \u6587\u4ef6\uff0c \u5e76\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\uff0c \u5982 \u6570\u636e\u5e93\u5730\u5740 /\u8d26\u53f7/\u7aef\u53e3\u7b49\u4fe1\u606f\u3002 [inception] # inception\u8fd0\u884c\u7684\u7aef\u53e3\u53f7 port=6669 socket=/tmp/inc.socket general_log=ON # \u8bbe\u7f6einception\u7684\u65e5\u5fd7\u8def\u5f84 general_log_file=/tmp/inception.log #mysql \u5b9e\u4f8b\u7684\u5730\u5740\uff0c\u8d26\u53f7 \u7aef\u53e3\u7b49\u4fe1\u606f\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 inception_remote_system_user=backup inception_remote_system_password=fd56RDtXwTgEExl7Ewx inception_remote_backup_port=3306 inception_remote_backup_host=10.13.137.136 #\u5b57\u7b26\u96c6 character-set-client-handshake=0 character-set-server=utf8mb4 inception_support_charset=utf8mb4,utf8 #\u662f\u5426\u5141\u8bb8\u5217\u81ea\u5df1\u8bbe\u7f6e\u5b57\u7b26\u96c6 inception_enable_column_charset=1 #\u53ef\u4ee5\u4f7f\u7528\u5173\u952e\u5b57 inception_enable_identifer_keyword=ON #\u4e0d\u652f\u6301\u5916\u952e inception_enable_foreign_key=OFF #\u81ea\u589e\u5217\u53ef\u4ee5\u4e0d\u4e3a\u65e0\u7b26\u53f7\u578b inception_enable_autoincrement_unsigned=OFF #pt-osc\u5de5\u5177\u7684\u8def\u5f84 inception_osc_bin_dir=/usr/bin/ #\u8868\u5927\u5c0f\u5927\u4e8e4G\u65f6\u4f7f\u7528pt-osc inception_osc_min_table_size=4096 inception_max_update_rows = 50000 \u53e6\uff0cinception \u914d\u7f6e\u6587\u4ef6\u8bf4\u53ef\u53c2\u89c1\u5b98\u65b9\u6587\u6863\uff1ahttp://wiki.corp.yunnex.com/pages/viewpage.action?pageId=22121563","title":"\u521b\u5efa\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#inception","text":"\u542f\u52a8\uff1a/data/svr/inception/debug/sql/Inception \u2013defaults-file=/data/conf/inception/inception.cnf \u6ce8\u610f\u4e8b\u9879 \uff1a inception \u4e0b\u8f7d\u6e90\u7801\u7f16\u8bd1\u4e00\u6b21\u540e\uff0c\u5982\u679c\u9700\u8981\u505a\u8fc1\u79fb\uff0c\u8fc1\u79fb\u7684\u4e24\u53f0\u4e3b\u673a \u7cfb\u7edf\u4e0e\u53ca\u7cfb\u7edf\u7248\u672c\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u628a\u7f16\u8bd1\u6587\u4ef6 copy \u8fc7\u53bb\u8fd0\u884c\u5373\u53ef\u3002 \u6d4b\u8bd5\u73af\u5883\u7684DBMS\uff0c\u662f\u7ed9test-a\uff0ctest-b\u7b49\u73af\u5883\u4f7f\u7528\uff0c\u5730\u5740\u662f 192.168.1.15","title":"\u542f\u52a8inception"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#43-soar","text":"soar \u4f5c\u4e3a\u4e00\u4e2a\u5de5\u5177\uff0c\u662f\u4e0d\u9700\u8981\u8fd0\u884c\u7684\uff0c\u53ea\u8981\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6709\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4ee3\u7801\uff0c\u5373\u53ef \u4e0b\u8f7d\u5730\u5740https://github.com/XiaoMi/soar \u6839\u636e\u7cfb\u7edf\u4e0b\u8f7d\u4e8c\u8fdb\u5236 \u6587\u4ef6\u5373\u53ef \u628asoar \u53ef\u6267\u884c\u6587\u4ef6\u653e\u5230\u6307\u5b9a\u76ee\u5f55\uff1a /data/svr/soar/soar.linux-amd64","title":"4.3 \u4e0b\u8f7dsoar \u53ef\u6267\u884c\u6587\u4ef6"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#soar","text":"\u4f7f\u7528\u4ee5\u4e0b\u5185\u5bb9\uff0c\u521b\u5efa\u6587\u4ef6 /data/svr/soar/soar.yaml \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 log-level: 6 log-output: /data/logs/soar/soar.log \u76ee\u524d\u53ea\u914d\u7f6e\u5173\u4e8elog\u8fd9\u4e24\u4e2a\u9009\u9879\uff0c\u5982\u679c\u9700\u8981\u589e\u52a0\u5176\u4ed6\u9009\u9879 \uff0c\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\u8fdb\u884c\u5904\u7406\u3002","title":"\u521b\u5efa\u5e76\u4fee\u6539soar\u914d\u7f6e\u6587\u4ef6"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#44redis","text":"\u7531\u4e8edbms \u91c7\u7528celery \u505a\u4e86\u5f02\u6b65\u67e5\u8be2\uff0c\u9700\u8981\u4f9d\u8d56\u4e8eredis\u505a\u6d88\u606f\u961f\u5217\uff0c\u6240\u4ee5\u9700\u8981\u5b89\u88c5redis\uff0c\u5e76\u542f\u52a8\u3002 \u914d\u7f6e\u6587\u4ef6\u8bf7\u653e\u5230 /data/conf/redis/6379.conf redis\u542f\u52a8\u811a\u672c\u8bf7\u653e\u5230 /data/sh/redis.sh","title":"4.4\u5b89\u88c5redis"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#45-openresty","text":"\u5b89\u88c5openresty \u5230\u76ee\u5f55 /data/svr \u76ee\u5f55\u4e0b\uff0c\u628a\u542f\u52a8\u811a\u672c\u653e\u7f6e\u5230 /data/sh/openresty.sh \u4e0b\uff0c \u5e76\u628a dbms.conf \u653e\u7f6e\u5230 /data/conf/openresty/vhost/ \u76ee\u5f55\u4e0b\uff0c\u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u53ea\u9700\u6539\u57df\u540d\uff0c\u5176\u4ed6\u53ef\u4e0d\u52a8\u3002 upstream gunicorn { # gunicorn\u7684\u8fd0\u884c\u5730\u5740 server 127.0.0.1:8080; } server { listen 80; # \u6b64\u5904\u8bbe\u7f6e\u57df\u540d\uff0c\u5982\u679c\u662f\u6d4b\u8bd5\u73af\u5883\u4e0b\uff0c\u53ef\u66f4\u6362\u4e3aip\u5730\u5740 server_name myadmin.ops.yunnex.com; access_log /data/logs/openresty/dbms.access.log main; charset utf-8; location = /50x.html { root html; } location / { include uwsgi_params; proxy_pass http://gunicorn; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $http_x_forwarded_for; #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $host; proxy_redirect off; } location /static/ { root /data/svr/dbms-static/; expires off; #access_log off; } location /docs { index index.html; alias /data/svr/dbms-doc/site; expires off; } location = /favicon.ico { rewrite (.*) /static/favicon.ico; } location = /robots.txt { root html; } }","title":"4.5 \u5b89\u88c5openresty"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#46-supervisor","text":"\u5b89\u88c5\u8fc7\u7a0b\u8bf7\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28607636 supervisor \u4e3b\u8981\u662f\u7528\u6765\u5b88\u62a4 dbms-celery\u7684\u8fdb\u7a0b\uff0cgunicorn \u65e0\u9700supervisor \u3002 \u542f\u52a8\u811a\u672c\u8bf7\u653e\u5230 /data/sh/supervisord.sh /data/sh/supervisorctl.sh \u5b89\u88c5supervisord \u65f6\u8bf7\u786e\u4fdd \u914d\u7f6e\u6587\u4ef6\u653e\u7f6e\u4e8e /data/conf/supervisor/ \u76ee\u5f55\u4e0b\u3002 \u914d\u7f6e /data/conf/supervisor/conf.d/dbms-celry.conf [group:dbms-celery] programs=dbms-celery-1 [program:dbms-celery-1] environment=PYTHONOPTIMIZE=1 command=/data/svr/python36dbms/bin/celery worker -A db-tool -l info --logfile=/data/logs/dbms-celery/celery.log process_name=%(program_name)s startsecs=1 directory=/data/svr/dbms autorestart=true autostart=true stderr_logfile=/data/logs/supervisor/%(program_name)s_error.log stderr_logfile_maxbytes=50MB stderr_logfile_backups=10 stdout_logfile=/data/logs/supervisor/%(program_name)s_error.log stdout_logfile_maxbytes=50MB stdout_logfile_backups=10 user=root stopsignal=INT","title":"4.6 \u5b89\u88c5supervisor"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#46-dbms","text":"","title":"4.6 \u90e8\u7f72dbms"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#dbms_1","text":"\u9879\u76ee\u5730\u5740\uff1ahttp://git.dev.yunnex.com/ops/dbms.git \u628a\u6e90\u7801\u62c9\u53d6\u5230 /data/svr/dbms \u76ee\u5f55\u4e0b","title":"\u62c9\u53d6dbms\u4ee3\u7801"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#_5","text":"mkdir -p /data/conf/dbms cp db-tool/local_settings_example.py /data/conf/dbms/local_settings.py","title":"\u521b\u5efa\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#local_settingspy","text":"\u4fee\u6539inception \u914d\u7f6e(local_settings.py) # inception setting ##inception \u8fd0\u884c\u6240\u5728\u7684\u4e3b\u673a \u548c\u8fd0\u884c\u7684\u7aef\u53e3\u53f7 INCEPTION_HOST = '10.10.50.30' INCEPTION_PORT = 6669 # inception\u6267\u884c\u4e4b\u540e\uff0c\u5904\u7406rollback\u8bed\u53e5\uff0c\u6240\u9700\u7684\u7528\u6237 # \u5373\uff1ainception\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684inception_remote_system_user BACKUP_HOST = '192.168.1.15' BACKUP_PORT = 3306 BACKUP_USER = 'root' BACKUP_PASSWD = '3uqaGVM8CST8Uq1z' \u4fee\u6539soar \u914d\u7f6e(local_settings.py) # soar setting # soar\u9700\u8981\u914d\u7f6e\u6570\u636e\u5e93\uff0c\u8fdb\u884c\u6570\u636e\u91c7\u6837\uff0c #\u7136\u540e\u5728\u91c7\u6837\u83b7\u5f97\u7684\u6570\u636e\u8868\u4e0a\u6267\u884csql \u8bc4\u4f30 # \u6b64\u5904\u914d\u7f6e\u4f9bsoar \u4f7f\u7528\u7684\u6570\u636e\u5e93\uff0c\u9700\u786e\u4fdd \u91c7\u7528\u7684user \u5177\u6709\u65b0\u589e\u6570\u636e\u5e93\u548c\u6570\u636e\u8868\u7684\u6743\u9650 # user:password@mysql_host:port TEST_DSN = 'root:yunnex@10.10.50.30:3306' # soar path \u6307\u5411\u672c\u5730\u7684soar \u76ee\u5f55 SOAR_PATH = 'G:\\\\work\\\\soar\\\\' \u4fee\u6539celery\u914d\u7f6e(local_settings.py) # CELERY settings # celery\u5f02\u6b65\u67e5\u8be2\u4efb\u52a1 \u7ed3\u679c\u5b58\u653e\u5730\u5740 # \u751f\u4ea7\u673a\u5668\u53ef\u5b9a\u671f\u6e05\u7406\u8be5\u76ee\u5f55\uff0c\u5df2\u8bbe\u7f6e\u5b9a\u65f6\u4efb\u52a1\uff08crontab \uff09\u8fdb\u884c\u6e05\u7406 QUERY_RESULT_DIR = '/home/data/dbms-query-result/' # \u6d88\u606f\u961f\u5217 redis \u7684\u5730\u5740/\u6570\u636e\u5e93 CELERY_BROKER_URL = 'redis://10.10.50.30/4' \u4fee\u6539dbms \u8bbe\u7f6e(local_settings.py) # database setting # dbms \u91c7\u7528\u7684\u6570\u636e\u5e93\uff0c\u8bb0\u5f55user db host group \u7b49\u4fe1\u606f # \u53ea\u9700\u4fee\u6539 host user password \u4fe1\u606f DATABASES = { 'default': { 'ENGINE': 'django.db.backends.mysql', 'NAME': 'devops', 'USER': 'remote_user', 'PASSWORD': 'remote_passwd', 'HOST': '10.10.50.30', 'PORT': '3306', 'OPTIONS': { 'init_command': \"SET sql_mode='STRICT_TRANS_TABLES'\", }, }, } # \u754c\u9762\u4e0a\u663e\u793a\u7684\u73af\u5883\u4fe1\u606f SITE_NAME = '\u751f\u4ea7\u73af\u5883' # static setting # \u5f53\u4f7f\u7528 python manage.py collectstatic\u547d\u4ee4\u53bb\u81ea\u52a8\u5316\u751f\u6210\u9759\u6001\u6587\u4ef6\u65f6\uff0c # \u628a\u9759\u6001\u6587\u4ef6 \u5b58\u653e\u5230\u54ea\u91cc STATIC_ROOT = '/data/svr/dbms-static'","title":"\u4fee\u6539local_settings.py"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#python36","text":"\u5177\u4f53\u5b89\u88c5\u548c\u865a\u62df\u73af\u5883\u8bbe\u7f6e\u8bf7\u53c2\u89c1http://wiki.corp.yunnex.com/pages/viewpage.action?pageId=28607633 \u786e\u4fdd\u6b64\u6b65\u9aa4\u865a\u62df\u51fa\u7684\u73af\u5883\u540d\u53ca\u8def\u5f84\u4e3a /data/svr/python36dbms \uff08\u542f\u52a8\u811a\u672c\u4f1a\u4f9d\u8d56\u6b64\u865a\u62df\u73af\u5883\u540d\u79f0\uff09","title":"\u5b89\u88c5python3.6 \u5e76\u4f7f\u7528\u865a\u62df\u73af\u5883"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#python","text":"#\u6fc0\u6d3b\u865a\u62df\u73af\u5883 \u5e76\u4fdd\u6301\uff0c\u76f4\u5230 \u9879\u76ee\u90e8\u7f72\u6210\u529f source /data/svr/python36dbms/bin/activate cd /data/svr/dbms # \u5b89\u88c5\u4f9d\u8d56 pip install -r requirement.txt # \u5b89\u88c5\u5f00\u53d1\u73af\u5883\u4e0b\u7684\u4f9d\u8d56,\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u65e0\u9700\u5904\u7406 python install -r requirement-deploy.txt # \u5982\u679c\u662fwindow\u5f00\u53d1\uff0c\u8fd8\u9700\u5b89\u88c5evenlet\uff08celery\u4f9d\u8d56\uff09 pip install eventlet==0.25.2","title":"\u5b89\u88c5python\u9879\u76ee\u4f9d\u8d56"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#dbms_2","text":"\u5728\u5b89\u88c5\u597d\u7684mysql \u5b9e\u4f8b\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93devops create database devops; \u6267\u884c\u547d\u4ee4\uff0c\u628a\u6570\u636e\u5e93\u7ed3\u6784\u5efa\u7acb\u5230 \u6570\u636e\u5e93 \u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u7684\u610f\u601d\u662f\u663e\u793a\u51fa\u6709\u54ea\u4e9b\u6570\u636e\u5e93\u53d8\u66f4\u548c\u5f53\u524d\u72b6\u6001\uff08which lists a project\u2019s migrations and their status.\uff09 python manage.py showmigrations \u751f\u6210\u53d8\u66f4\u6587\u4ef6\uff08which is responsible for creating new migrations based on the changes you have made to your models.\uff09 python manage.py makemigrations \u6267\u884c\u53d8\u66f4\u5230\u6570\u636e\u5e93\uff08which is responsible for applying and unapplying migrations\uff09 python manage.py migrate","title":"\u521d\u59cb\u5316dbms\u6570\u636e\u5e93"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#django","text":"\u8bf7\u786e\u4fdd /data/conf/dbms/local_settings.py \u6587\u4ef6\u4e2dSTATIC_ROOT \u662f\u6307\u5411 /data/svr/dbms-static/ \uff0c \u7136\u540e\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff0c\u628acss \u7b49\u9759\u6001\u6587\u4ef6\u6536\u96c6\u5230\u6307\u5b9a\u4f4d\u7f6e # \u9759\u6001\u6587\u4ef6 # \u9759\u6001\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\uff1a/data/svr/dbms-static/ python manage.py collectstatic","title":"\u6536\u96c6 django \u9759\u6001\u6587\u4ef6"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#gunicorn","text":"\u5728\u975e\u5f00\u53d1\u73af\u5883\u4e2d, django \u53ea\u4f5c\u4e3a\u4e00\u4e2a http framwork\u6765\u4f7f\u7528\uff0c\u4e0d\u5177\u5907server\u7684\u529f\u80fd\uff0c\u9700\u8981gunicorn \u6765\u5b9e\u73b0\uff0c\u521b\u5efa gunicorn.cnf \u5230\u76ee\u5f55 /data/conf/dbms/ \u4e0b\uff08\u542f\u52a8\u811a\u672c\u4f1a\u4f9d\u8d56\u6b64\u8def\u5f84\uff09 gunicorn.cnf \u5185\u5bb9\uff1a worker_class = 'gevent' graceful_timeout = 28800 workers = 8 threads = 16 daemon = True access_log_format = '%(h)s %(l)s %(u)s %(t)s \"%(r)s\" %(s)s %(b)s \"%(f)s\" \"%(a)s\" %(L)s \"%({Header}i)s\" \"%({Header}o)s\" ' loglevel = 'debug' bind = '127.0.0.1:8080' timeout = 28800 backlog = 65535 # dbms \u6e90\u7801\u4f4d\u7f6e chdir = '/data/svr/dbms' # log \u65e5\u5fd7\u8bbe\u7f6e errorlog = '/data/logs/dbms/gunicorn.log' accesslog = '/data/logs/dbms/gunicorn.log'","title":"\u521b\u5efa\u5e76\u4fee\u6539gunicorn \u914d\u7f6e\u6587\u4ef6"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#_6","text":"\u8bf7\u628a\u4ee5\u4e0b\u4e24\u4e2a\u811a\u672c dbms.sh dbms-celery \u521b\u5efa\u5230 /data/sh \u76ee\u5f55\u4e0b\uff0c \u521b\u5efa\u5b8c\u6210\u540e\uff0c\u6309\u4ee5\u4e0b\u811a\u672c\u8fdb\u884c\u542f\u52a8\uff0c\u542f\u52a8\u5b8c\u6210\u540e\u90e8\u7f72\u5b8c\u6210 # \u542f\u52a8openresty /data/sh/openresty.sh start # \u542f\u52a8redis /data/sh/redis.sh #\u542f\u52a8 inception /data/svr/inception/debug/sql/Inception --defaults-file=/data/conf/inception/inception.cnf #\u542f\u52a8supervisord\uff08\u5148\u542f\u52a8supervisord\uff0c\u518d\u542f\u52a8dbms \u548cdbms-celery\uff09 /data/sh/supervisord.sh # \u542f\u52a8dbms /data/sh/dbms.sh start # \u542f\u52a8dbms-celery /data/sh/dbms-celery.sh start /data/sh/dbms.sh` #!/bin/bash source /data/svr/python36dbms/bin/activate start() { gunicorn db-tool.wsgi -c /data/conf/dbms/gunicorn.conf } stop() { pkill -9 -f gunicorn.conf } status() { pid=$(ps -ef |grep \"/data/conf/dbms/gunicorn.conf\"|grep -v grep |awk '{print $2}') if [[ \"${pid}\" ]] ; then echo \"running\" else echo \"stopping\" fi } restart() { stop && start } case \"$1\" in start) $1 ;; stop) $1 ;; status) $1 ;; refresh) $1 ;; restart) $1 ;; *) echo $\"Usage: $0 {start|stop|status|restart}\" exit 1 esac exit $? /data/sh/dbms-celery.sh #!/bin/bash GROUPNAME=dbms-celery PIDPATH=/var/run CONF=/data/conf/supervisor/supervisord.conf USER=product PROGRAM=\"/usr/bin/supervisorctl -c $CONF\" if [ ! -d $PIDPATH ]; then mkdir $PIDPATH chown $USER $PIDPATH fi RETVAL=0 start() { $PROGRAM start $GROUPNAME:* RETVAL=$? } stop() { $PROGRAM stop $GROUPNAME:* RETVAL=$? } restart() { $PROGRAM restart $GROUPNAME:* RETVAL=$? } status() { $PROGRAM status $GROUPNAME:* RETVAL=$? } case \"$1\" in start) start ;; stop) stop ;; restart) restart ;; status) status ;; *) echo $\"Usage: $0 {start|stop|status|restart}\" exit 1 esac exit $RETVAL","title":"\u590d\u5236\u811a\u672c\u5e76\u542f\u52a8\u670d\u52a1"},{"location":"7.%5B%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%5DDBMS%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/#celery_query","text":"0 0 * * * /bin/bash /root/cron/cut_dbms_celery_log.sh 0 0 * * 0 /bin/bash /root/cron/delete_query_result.sh cut_dbms_celery_log.sh #!/bin/bash src_path=\"/data/logs/dbms-celery\" src_file=\"celery.log\" suffix=\"$(date -d \"yesterday\" +\"%F\")\" save_backup_day=30 cut_log() { file_path=\"${src_path}/${src_file}\" cp ${file_path} ${file_path}.$suffix && > ${file_path} find ${src_path} -mtime +\"${save_backup_day}\" -exec rm -rf {} \\; >/dev/null 2>&1 } cut_log delete_query_result.sh #!/bin/bash src_path=\"/data/logs/dbms-celery\" src_file=\"celery.log\" suffix=\"$(date -d \"yesterday\" +\"%F\")\" save_backup_day=30 cut_log() { file_path=\"${src_path}/${src_file}\" cp ${file_path} ${file_path}.$suffix && > ${file_path} find ${src_path} -mtime +\"${save_backup_day}\" -exec rm -rf {} \\; >/dev/null 2>&1 } cut_log [root@UGZ-DBMS-001 ~]# cat /root/cron/delete_query_result.sh base_dir=\"/home/data/dbms-query-result\" save_backup_day=90 find ${base_dir} -mtime +\"${save_backup_day}\" -delete","title":"\u5b9a\u65f6\u4efb\u52a1\u6e05\u7406\u65e5\u5fd7 \u548c\u6e05\u7406celery_query \u7ed3\u679c"}]}